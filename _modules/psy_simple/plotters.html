<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>psy_simple.plotters &mdash; psy-simple 1.4.0+1.g91d3bda documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> psy-simple
          </a>
              <div class="version">
                1.4.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plot_methods.html">psyplot plot methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contributing to psy-simple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/psy_simple.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">psy-simple</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Module code</a> &raquo;</li>
      <li>psy_simple.plotters</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for psy_simple.plotters</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Plotters and formatoptions for the psy-simple plugin.&quot;&quot;&quot;</span>

<span class="c1"># Disclaimer</span>
<span class="c1"># ----------</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2021 Helmholtz-Zentrum Hereon</span>
<span class="c1"># Copyright (C) 2020-2021 Helmholtz-Zentrum Geesthacht</span>
<span class="c1"># Copyright (C) 2016-2021 University of Lausanne</span>
<span class="c1">#</span>
<span class="c1"># This file is part of psy-simple and is released under the GNU LGPL-3.O license.</span>
<span class="c1"># See COPYING and COPYING.LESSER in the root of the repository for full</span>
<span class="c1"># licensing details.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License version 3.0 as</span>
<span class="c1"># published by the Free Software Foundation.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU LGPL-3.0 license for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU LGPL-3.0 license</span>
<span class="c1"># along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>
<span class="kn">from</span> <span class="nn">psyplot.warning</span> <span class="kn">import</span> <span class="n">PsyPlotRuntimeWarning</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">abstractproperty</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span><span class="p">,</span> <span class="n">starmap</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">islice</span><span class="p">,</span> <span class="n">repeat</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">date_range</span><span class="p">,</span> <span class="n">to_datetime</span><span class="p">,</span> <span class="n">DatetimeIndex</span><span class="p">,</span> <span class="n">to_timedelta</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">from</span> <span class="nn">pandas.tseries</span> <span class="kn">import</span> <span class="n">offsets</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.axes</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FormatStrFormatter</span><span class="p">,</span> <span class="n">FixedLocator</span><span class="p">,</span> <span class="n">FixedFormatter</span>
<span class="kn">from</span> <span class="nn">matplotlib.dates</span> <span class="kn">import</span> <span class="n">DateFormatter</span><span class="p">,</span> <span class="n">AutoDateFormatter</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcol</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">psyplot.docstring</span> <span class="kn">import</span> <span class="n">docstrings</span><span class="p">,</span> <span class="n">dedent</span>
<span class="kn">from</span> <span class="nn">psyplot.plotter</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Plotter</span><span class="p">,</span> <span class="n">Formatoption</span><span class="p">,</span> <span class="n">BEFOREPLOTTING</span><span class="p">,</span> <span class="n">DictFormatoption</span><span class="p">,</span> <span class="n">END</span><span class="p">,</span> <span class="n">rcParams</span><span class="p">,</span>
    <span class="n">START</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">psy_simple.base</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BasePlotter</span><span class="p">,</span> <span class="n">TextBase</span><span class="p">,</span> <span class="n">label_size</span><span class="p">,</span> <span class="n">label_weight</span><span class="p">,</span> <span class="n">label_props</span><span class="p">,</span> <span class="n">MaskLess</span><span class="p">,</span>
    <span class="n">MaskGreater</span><span class="p">,</span> <span class="n">MaskBetween</span><span class="p">,</span> <span class="n">MaskLeq</span><span class="p">,</span> <span class="n">MaskGeq</span><span class="p">,</span> <span class="n">Mask</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">psy_simple.colors</span> <span class="kn">import</span> <span class="n">get_cmap</span>
<span class="kn">from</span> <span class="nn">psyplot.data</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">InteractiveList</span><span class="p">,</span> <span class="n">isstring</span><span class="p">,</span> <span class="n">CFDecoder</span><span class="p">,</span> <span class="n">_infer_interval_breaks</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">psyplot.compat.pycompat</span> <span class="kn">import</span> <span class="nb">map</span><span class="p">,</span> <span class="nb">zip</span><span class="p">,</span> <span class="nb">range</span>
<span class="kn">from</span> <span class="nn">psy_simple.plugin</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">validate_color</span><span class="p">,</span> <span class="n">validate_float</span><span class="p">,</span> <span class="n">safe_list</span> <span class="k">as</span> <span class="n">slist</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">psyplot.utils</span> <span class="kn">import</span> <span class="n">is_iterable</span>


<span class="k">def</span> <span class="nf">_get_index_vals</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">)</span> <span class="ow">and</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">index</span><span class="o">.</span><span class="n">values</span>


<span class="n">mpl_version</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]))</span>


<div class="viewcode-block" id="round_to_05"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.round_to_05">[docs]</a><span class="k">def</span> <span class="nf">round_to_05</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">exp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Round to the next 0.5-value.</span>

<span class="sd">    This function applies the round function `func` to round `n` to the</span>
<span class="sd">    next 0.5-value with respect to its exponent with base 10 (i.e.</span>
<span class="sd">    1.3e-4 will be rounded to 1.5e-4) if `exp` is None or with respect</span>
<span class="sd">    to the given exponent in `exp`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n: numpy.ndarray</span>
<span class="sd">        number to round</span>
<span class="sd">    exp: int or numpy.ndarray</span>
<span class="sd">        Exponent for rounding. If None, it will be computed from `n` to be the</span>
<span class="sd">        exponents for base 10.</span>
<span class="sd">    mode: {&#39;s&#39;, &#39;l&#39;}</span>
<span class="sd">        rounding mode. If &#39;s&#39;, it will be rounded to value whose absolute</span>
<span class="sd">        value is below `n`, if &#39;l&#39; it will rounded to the value whose absolute</span>
<span class="sd">        value is above `n`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    numpy.ndarray</span>
<span class="sd">        rounded `n`</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    The effects of the different parameters are show in the example below::</span>

<span class="sd">        &gt;&gt;&gt; from psyplot.plotter.simple import round_to_05</span>
<span class="sd">        &gt;&gt;&gt; a = [-100.3, 40.6, 8.7, -0.00023]</span>
<span class="sd">        &gt;&gt;&gt;round_to_05(a, mode=&#39;s&#39;)</span>
<span class="sd">        array([ -1.00000000e+02,   4.00000000e+01,   8.50000000e+00,</span>
<span class="sd">                -2.00000000e-04])</span>

<span class="sd">        &gt;&gt;&gt; round_to_05(a, mode=&#39;l&#39;)</span>
<span class="sd">        array([ -1.50000000e+02,   4.50000000e+01,   9.00000000e+00,</span>
<span class="sd">                -2.50000000e-04])&quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">exp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>  <span class="c1"># exponent for base 10</span>
    <span class="n">ntmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">/</span><span class="mf">10.</span><span class="o">**</span><span class="n">exp</span>  <span class="c1"># mantissa for base 10</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;s&#39;</span><span class="p">:</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">ntmp</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="n">n2</span> <span class="o">=</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">ntmp</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">ntmp</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.</span>
        <span class="n">n2</span> <span class="o">=</span> <span class="n">ntmp</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">nret</span> <span class="o">+</span> <span class="n">s</span><span class="o">*</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="mf">10.</span><span class="o">**</span><span class="n">exp</span><span class="p">,</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="n">nret</span><span class="o">*</span><span class="mf">10.</span><span class="o">**</span><span class="n">exp</span><span class="p">)</span></div>


<div class="viewcode-block" id="convert_radian"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.convert_radian">[docs]</a><span class="k">def</span> <span class="nf">convert_radian</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="o">*</span><span class="n">variables</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert the given coordinate from radian to degree</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    coord: xr.Variable</span>
<span class="sd">        The variable to transform</span>
<span class="sd">    ``*variables``</span>
<span class="sd">        The variables that are on the same unit.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    xr.Variable</span>
<span class="sd">        The transformed variable if one of the given `variables` has units in</span>
<span class="sd">        radian&quot;&quot;&quot;</span>
    <span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;The psy_simple.plotters.convert_radian method has been deprecated.&quot;</span>
        <span class="s2">&quot;Please use the `plotter.convert_coordinate` instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;radian&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">coord</span> <span class="o">*</span> <span class="mf">180.</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
    <span class="k">return</span> <span class="n">coord</span></div>


<div class="viewcode-block" id="AlternativeXCoord"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AlternativeXCoord">[docs]</a><span class="k">class</span> <span class="nc">AlternativeXCoord</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use an alternative variable as x-coordinate</span>

<span class="sd">    This formatoption let&#39;s you specify another variable in the base dataset</span>
<span class="sd">    of the data array in case you want to use this as the x-coordinate instead</span>
<span class="sd">    of the raw data</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Use the default</span>
<span class="sd">    str</span>
<span class="sd">        The name of the variable to use in the base dataset</span>
<span class="sd">    xarray.DataArray</span>
<span class="sd">        An alternative variable with the same shape as the displayed array</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    To see the difference, we create a simple test dataset::</span>

<span class="sd">        &gt;&gt;&gt; import xarray as xr</span>

<span class="sd">        &gt;&gt;&gt; import numpy as np</span>

<span class="sd">        &gt;&gt;&gt; import psyplot.project as psy</span>

<span class="sd">        &gt;&gt;&gt; ds = xr.Dataset({</span>
<span class="sd">        ...     &#39;temp&#39;: xr.Variable((&#39;time&#39;, ), np.arange(5)),</span>
<span class="sd">        ...     &#39;std&#39;: xr.Variable((&#39;time&#39;, ), np.arange(5, 10))})</span>
<span class="sd">        &gt;&gt;&gt; ds</span>
<span class="sd">        &lt;xarray.Dataset&gt;</span>
<span class="sd">        Dimensions:  (time: 5)</span>
<span class="sd">        Coordinates:</span>
<span class="sd">          * time     (time) int64 0 1 2 3 4</span>
<span class="sd">        Data variables:</span>
<span class="sd">            temp     (time) int64 0 1 2 3 4</span>
<span class="sd">            std      (time) int64 5 6 7 8 9</span>

<span class="sd">    If we create a plot with it, we get the ``&#39;time&#39;`` dimension on the</span>
<span class="sd">    x-axis::</span>

<span class="sd">        &gt;&gt;&gt; plotter = psy.plot.lineplot(ds, name=[&#39;temp&#39;]).plotters[0]</span>

<span class="sd">        &gt;&gt;&gt; plotter.plot_data[0].dims</span>
<span class="sd">        (&#39;time&#39;,)</span>

<span class="sd">    If we however set the ``&#39;coord&#39;`` keyword, we get::</span>

<span class="sd">        &gt;&gt;&gt; plotter = psy.plot.lineplot(</span>
<span class="sd">        ...     ds, name=[&#39;temp&#39;], coord=&#39;std&#39;).plotters[0]</span>

<span class="sd">        &gt;&gt;&gt; plotter.plot_data[0].dims</span>
<span class="sd">        (&#39;std&#39;,)</span>

<span class="sd">    and ``&#39;std&#39;`` is plotted on the x-axis.&quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Alternative X-Variable&#39;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1">#: Bool. If True, this Formatoption directly uses the raw_data, otherwise</span>
    <span class="c1">#: use the normal data</span>
    <span class="n">use_raw_data</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_raw_data</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_raw_data</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span>

<div class="viewcode-block" id="AlternativeXCoord.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AlternativeXCoord.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">da</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_iterator</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace_coord</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">i</span><span class="p">)</span></div>

<div class="viewcode-block" id="AlternativeXCoord.diff"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AlternativeXCoord.diff">[docs]</a>    <span class="k">def</span> <span class="nf">diff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">~</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span> <span class="o">&amp;</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="AlternativeXCoord.replace_coord"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AlternativeXCoord.replace_coord">[docs]</a>    <span class="k">def</span> <span class="nf">replace_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replace the coordinate for the data array at the given position</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        i: int</span>
<span class="sd">            The number of the data array in the raw data (if the raw data is</span>
<span class="sd">            not an interactive list, use 0)</span>

<span class="sd">        Returns</span>
<span class="sd">        xarray.DataArray</span>
<span class="sd">            The data array with the replaced coordinate&quot;&quot;&quot;</span>
        <span class="n">da</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_iterator</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_alternative_coord</span><span class="p">(</span><span class="n">da</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">other_coords</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">)}</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span> <span class="n">name</span><span class="p">})</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">coord</span><span class="p">})</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="o">**</span><span class="n">other_coords</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="AlternativeXCoord.get_alternative_coord"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AlternativeXCoord.get_alternative_coord">[docs]</a>    <span class="k">def</span> <span class="nf">get_alternative_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">variable</span>
        <span class="n">alternative_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)),</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">coord_da</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="o">.</span><span class="n">from_dataset</span><span class="p">(</span>
            <span class="n">da</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">alternative_name</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="n">da</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">idims</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">coord_da</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">),</span> <span class="n">coord_da</span><span class="p">,</span> <span class="n">coord_da</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">coord_da</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">coord</span></div></div>


<div class="viewcode-block" id="AlternativeXCoordPost"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AlternativeXCoordPost">[docs]</a><span class="k">class</span> <span class="nc">AlternativeXCoordPost</span><span class="p">(</span><span class="n">AlternativeXCoord</span><span class="p">):</span>
    <span class="c1"># The same as the :class:`AlternativeXCoord, but it uses the</span>
    <span class="c1"># :attr:`psyplot.plotter.Formatoption.data` attribute as a src, not the</span>
    <span class="c1"># :attr:`psyplot.plotter.Formatoption.raw_data`</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">AlternativeXCoord</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">use_raw_data</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Grid"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Grid">[docs]</a><span class="k">class</span> <span class="nc">Grid</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Display the grid</span>

<span class="sd">    Show the grid on the plot with the specified color.</span>


<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        If the grid is currently shown, it will not be displayed any longer. If</span>
<span class="sd">        the grid is not shown, it will be drawn</span>
<span class="sd">    bool</span>
<span class="sd">        If True, the grid is displayed with the automatic settings (usually</span>
<span class="sd">        black)</span>
<span class="sd">    string, tuple.</span>
<span class="sd">        Defines the color of the grid.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    %(colors)s&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;axes&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Grid lines&#39;</span>

<div class="viewcode-block" id="Grid.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Grid.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">_initialized</span> <span class="ow">and</span> <span class="n">mpl_version</span> <span class="o">==</span> <span class="mf">3.3</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Updating grids is known to malfunction for matplotlib 3.3!&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">validate_color</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="AxisColor"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AxisColor">[docs]</a><span class="k">class</span> <span class="nc">AxisColor</span><span class="p">(</span><span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Color the x- and y-axes</span>

<span class="sd">    This formatoption colors the left, right, bottom and top axis bar.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    dict</span>
<span class="sd">        Keys may be one of {&#39;right&#39;, &#39;left&#39;, &#39;bottom&#39;, &#39;top&#39;},  the values can</span>
<span class="sd">        be any valid color or None.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    %(colors)s&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;axes&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Color of x- and y-axes&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value2pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the current axis colors&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">get_edgecolor</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<div class="viewcode-block" id="AxisColor.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AxisColor.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">positions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">]</span>
        <span class="c1">#: :class:`dict` storing the default linewidths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_lw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">pos</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="o">.</span><span class="n">get_linewidth</span><span class="p">(),</span> <span class="n">positions</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="AxisColor.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.AxisColor.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">spine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
            <span class="n">spine</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">spine</span><span class="o">.</span><span class="n">get_linewidth</span><span class="p">()</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">spine</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">spine</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.edgecolor&#39;</span><span class="p">])</span>
                <span class="n">spine</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_lw</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TicksManagerBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksManagerBase">[docs]</a><span class="k">class</span> <span class="nc">TicksManagerBase</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for formatoptions handling ticks&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TicksManagerBase.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksManagerBase.update_axis">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="TicksManager"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksManager">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;TicksManager&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TicksManager</span><span class="p">(</span><span class="n">TicksManagerBase</span><span class="p">,</span> <span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for ticks formatoptions controlling major and minor</span>
<span class="sd">    ticks</span>

<span class="sd">    This formatoption simply serves as a base that allows the simultaneous</span>
<span class="sd">    managment of major and minor ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    dict</span>
<span class="sd">        A dictionary with the keys ``&#39;minor&#39;`` and (or) ``&#39;major&#39;`` to specify</span>
<span class="sd">        which ticks are managed. If the given value is not a dictionary with</span>
<span class="sd">        those keys, it is put into a dictionary with the key determined by the</span>
<span class="sd">        rcParams ``&#39;ticks.which&#39;`` key (usually ``&#39;major&#39;``).</span>
<span class="sd">        The values in the dictionary can be one types below.&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;ticks&#39;</span>

<div class="viewcode-block" id="TicksManager.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksManager.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">which</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">which</span> <span class="o">=</span> <span class="n">which</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DataTicksCalculator"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataTicksCalculator">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;DataTicksCalculator&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DataTicksCalculator</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base formatoption to calculate ticks and bounds from the data</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    numeric array</span>
<span class="sd">        specifies the ticks manually</span>
<span class="sd">    str or list [str, ...]</span>
<span class="sd">        A list of the below mentioned values of the mapping like</span>
<span class="sd">        ``[method, N, percmin, percmax, vmin, vmax]``, where only the first</span>
<span class="sd">        one is absolutely necessary</span>
<span class="sd">    dict</span>
<span class="sd">        Automatically determine the ticks corresponding to the data. The</span>
<span class="sd">        mapping can have the following keys, but only `method` is not optional.</span>

<span class="sd">        N</span>
<span class="sd">            An integer describing the number of boundaries (or ticks per</span>
<span class="sd">            power of ten, see `log` and `symlog` above)</span>
<span class="sd">        percmin</span>
<span class="sd">            The percentile to use for the minimum (by default, 0, i.e. the</span>
<span class="sd">            minimum of the array)</span>
<span class="sd">        percmax</span>
<span class="sd">            The percentile to use for the maximum (by default, 100, i.e. the</span>
<span class="sd">            maximum of the array)</span>
<span class="sd">        vmin</span>
<span class="sd">            The minimum to use (in which case it is not calculated from the</span>
<span class="sd">            specified `method`)</span>
<span class="sd">        vmax</span>
<span class="sd">            The maximum to use (in which case it is not calculated from the</span>
<span class="sd">            specified `method`)</span>
<span class="sd">        method</span>
<span class="sd">            A string that defines how minimum and maximum shall be set. This</span>
<span class="sd">            argument is **not optional** and can be one of the following:</span>

<span class="sd">            data</span>
<span class="sd">                plot the ticks exactly where the data is.</span>
<span class="sd">            mid</span>
<span class="sd">                plot the ticks in the middle of the data.</span>
<span class="sd">            rounded</span>
<span class="sd">                Sets the minimum and maximum of the ticks to the rounded data</span>
<span class="sd">                minimum or maximum. Ticks are rounded to the next 0.5 value</span>
<span class="sd">                with to the difference between data max- and minimum. The</span>
<span class="sd">                minimal tick will always be lower or equal than the data</span>
<span class="sd">                minimum, the maximal tick will always be higher or equal than</span>
<span class="sd">                the data maximum.</span>
<span class="sd">            roundedsym</span>
<span class="sd">                Same as `rounded` above but the ticks are chose such that they</span>
<span class="sd">                are symmetric around zero</span>
<span class="sd">            minmax</span>
<span class="sd">                Uses the minimum as minimal tick and maximum as maximal tick</span>
<span class="sd">            sym</span>
<span class="sd">                Same as minmax but symmetric around zero</span>
<span class="sd">            log</span>
<span class="sd">                Use logarithmic bounds. In this case, the given number `N`</span>
<span class="sd">                determines the number of bounds per power of tenth (i.e.</span>
<span class="sd">                ``N == 2`` results in something like ``1.0, 5.0, 10.0, 50.0``,</span>
<span class="sd">                etc., If this second number is None, then it will be chosen</span>
<span class="sd">                such that we have around 11 boundaries but at least one per</span>
<span class="sd">                power of ten.</span>
<span class="sd">            symlog</span>
<span class="sd">                The same as ``log`` but symmetric around 0. If the number `N`</span>
<span class="sd">                is None, then we have around 12 boundaries but at least one</span>
<span class="sd">                per power of ten&quot;&quot;&quot;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full array of this and the shared data&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">fmto</span><span class="o">.</span><span class="n">array</span> <span class="k">for</span> <span class="n">fmto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The numpy array of the data&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;notnull&#39;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_data_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">step</span> <span class="ow">or</span> <span class="mi">1</span>
        <span class="sd">&quot;&quot;&quot;Array of ticks that match exactly the data&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">)[::</span><span class="n">step</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_mid_data_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">step</span> <span class="ow">or</span> <span class="mi">1</span>
        <span class="sd">&quot;&quot;&quot;Array of ticks in the middle between the data points&quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">arr</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="o">/</span><span class="mf">2.</span><span class="p">)[::</span><span class="n">step</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_collect_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percmax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Collect the data from the shared formatoptions (if necessary).&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">minmax</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span>

        <span class="k">def</span> <span class="nf">shared_arrays</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">fmto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared</span><span class="p">:</span>
                <span class="n">fmto</span><span class="o">.</span><span class="n">_lock_children</span><span class="p">()</span>
                <span class="c1"># do not lock the fmto itself, because this breaks the plotter</span>
                <span class="c1"># update procedure. But make sure, that the dependencies are</span>
                <span class="c1"># locked</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">fmto</span><span class="o">.</span><span class="n">array</span>
                <span class="k">yield</span> <span class="n">arr</span>
                <span class="c1"># release the locks</span>
                <span class="n">fmto</span><span class="o">.</span><span class="n">_release_children</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># np.concatenate all arrays if any of the percentiles are required</span>
            <span class="k">if</span> <span class="n">percmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">percmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span>
                    <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">],</span> <span class="n">shared_arrays</span><span class="p">())))</span>
            <span class="c1"># np.concatenate only min and max-values instead of the full arrays</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">minmax</span><span class="p">,</span> <span class="n">chain</span><span class="p">(</span>
                    <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">],</span> <span class="n">shared_arrays</span><span class="p">()))))</span>
        <span class="k">return</span> <span class="n">arr</span>

    <span class="k">def</span> <span class="nf">_calc_vmin_vmax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">vmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">vmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>

        <span class="n">percentiles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_array</span><span class="p">(</span><span class="n">percmin</span><span class="p">,</span> <span class="n">percmax</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">vmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">percmin</span><span class="p">:</span>
                <span class="n">vmin</span> <span class="o">=</span> <span class="n">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">percentiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">percmin</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">vmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">percmax</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">percmax</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="n">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">percentiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">percmax</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">&#39;Cannot calculate minimum and maximum of the data!&#39;</span><span class="p">,</span>
                <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">percentiles</span><span class="p">:</span>
            <span class="n">percentiles</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">percentiles</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">percmin</span><span class="p">:</span>
                <span class="n">vmin</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">percentiles</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">percmax</span> <span class="ow">and</span> <span class="n">percmax</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">percentiles</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_round_min_max</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">vmin</span> <span class="o">==</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)))</span>
        <span class="n">larger</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">],</span> <span class="n">exp</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="n">smaller</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">],</span> <span class="n">exp</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">([</span><span class="n">larger</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">smaller</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="nb">max</span><span class="p">([</span><span class="n">larger</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">smaller</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">_rounded_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">N</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="mi">11</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_calc_vmin_vmax</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_log_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expmin</span><span class="p">,</span> <span class="n">expmax</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">expmax</span> <span class="o">-</span> <span class="n">expmin</span><span class="p">)):</span>
            <span class="n">new_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="n">expmin</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span>
                                   <span class="mi">9</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="n">expmin</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span> <span class="n">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">bounds</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new_vals</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bounds</span>

    <span class="k">def</span> <span class="nf">_log_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_vmin_vmax</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">larger</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="n">smaller</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">larger</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">smaller</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="nb">max</span><span class="p">([</span><span class="n">larger</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">smaller</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

        <span class="k">if</span> <span class="n">symmetric</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">vmin</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">vmax</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">vmin</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># make vmax positive</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmax</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># make vmin negative</span>
                <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmin</span>
        <span class="k">elif</span> <span class="n">symmetric</span><span class="p">:</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">([</span><span class="o">-</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">])</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmax</span>

        <span class="k">if</span> <span class="n">vmin</span> <span class="o">==</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>

        <span class="n">signs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">])</span>
        <span class="n">crossing0</span> <span class="o">=</span> <span class="n">vmin</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">vmax</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">signs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">signs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">crossing0</span><span class="p">:</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">]))</span>
            <span class="n">vmin0</span> <span class="o">=</span> <span class="n">vmax</span>
            <span class="n">vmax0</span> <span class="o">=</span> <span class="n">vmin</span>

            <span class="n">expmin</span><span class="p">,</span> <span class="n">expmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">])))</span>

            <span class="n">dexp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expmax</span> <span class="o">-</span> <span class="n">expmin</span><span class="p">)</span>
            <span class="n">expmax0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># vmin &lt; 0, vmax &gt; 0</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collect_array</span><span class="p">()</span>
            <span class="n">less0</span> <span class="o">=</span> <span class="n">arr</span> <span class="o">&lt;</span> <span class="mi">0</span>
            <span class="n">greater0</span> <span class="o">=</span> <span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">less0</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
                <span class="n">vmin0</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
                <span class="n">vmax0</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmin0</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">greater0</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
                <span class="n">vmax0</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">arr</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
                <span class="n">vmin0</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmax0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vmin0</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">arr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
                <span class="n">vmax0</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">arr</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">symmetric</span><span class="p">:</span>
                    <span class="n">vmin0</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">vmax0</span><span class="p">,</span> <span class="n">vmin0</span><span class="p">)</span>
                    <span class="n">vmax0</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmin0</span>

            <span class="n">expmin</span><span class="p">,</span> <span class="n">expmax0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">([</span><span class="n">vmax0</span><span class="p">,</span> <span class="n">vmin</span><span class="p">])))</span>
            <span class="n">expmin0</span><span class="p">,</span> <span class="n">expmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">([</span><span class="n">vmin0</span><span class="p">,</span> <span class="n">vmax</span><span class="p">])))</span>

            <span class="n">dexp_neg</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expmax0</span> <span class="o">-</span> <span class="n">expmin</span><span class="p">)</span>
            <span class="n">dexp_pos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expmax</span> <span class="o">-</span> <span class="n">expmin0</span><span class="p">)</span>

            <span class="n">dexp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dexp_neg</span> <span class="o">+</span> <span class="n">dexp_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dexp</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="n">dexp</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">vmax</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="n">expmax</span><span class="p">):</span>
            <span class="c1"># effectively only one factor of 10 (e.g. vmin = 1, vmax = 10)</span>
            <span class="n">N</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">11</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">symmetric</span> <span class="k">else</span> <span class="mi">12</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">N</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># we go close to 11 bounds in total</span>
                <span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="mi">11</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">symmetric</span> <span class="k">else</span> <span class="mi">12</span><span class="p">)</span> <span class="o">/</span> <span class="n">dexp</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">crossing0</span><span class="p">:</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_bounds</span><span class="p">(</span><span class="n">expmin</span><span class="p">,</span> <span class="n">expmax</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
                <span class="n">bounds</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">1</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="n">expmax</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">signs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">signs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">bounds</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bounds_neg</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_bounds</span><span class="p">(</span><span class="n">expmin</span><span class="p">,</span> <span class="n">expmax0</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>
                <span class="n">bounds_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_bounds</span><span class="p">(</span><span class="n">expmin0</span><span class="p">,</span> <span class="n">expmax</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">bounds_neg</span><span class="p">,</span> <span class="n">bounds_pos</span><span class="p">,</span>
                          <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">expmin</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">expmax0</span><span class="p">,</span>
                          <span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">expmin0</span><span class="p">,</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">expmax</span><span class="p">])</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[(</span><span class="n">bounds</span> <span class="o">&lt;=</span> <span class="n">vmax0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">bounds</span> <span class="o">&gt;=</span> <span class="n">vmin0</span><span class="p">)]</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_roundedsym_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">N</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="mi">10</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_calc_vmin_vmax</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))))</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmax</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_data_minmax_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">N</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="mi">11</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_vmin_vmax</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_data_symminmax_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">N</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="mi">10</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_vmin_vmax</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)))</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">vmax</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DataTicksCalculator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calc_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_ticks</span><span class="p">,</span>
            <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mid_data_ticks</span><span class="p">,</span>
            <span class="s1">&#39;rounded&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rounded_ticks</span><span class="p">,</span>
            <span class="s1">&#39;roundedsym&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roundedsym_ticks</span><span class="p">,</span>
            <span class="s1">&#39;minmax&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_minmax_ticks</span><span class="p">,</span>
            <span class="s1">&#39;sym&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_symminmax_ticks</span><span class="p">,</span>
            <span class="s1">&#39;log&#39;</span><span class="p">:</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_ticks</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s1">&#39;symlog&#39;</span><span class="p">:</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_ticks</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="p">}</span></div>


<div class="viewcode-block" id="TicksBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;TicksBase&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TicksBase</span><span class="p">(</span><span class="n">TicksManagerBase</span><span class="p">,</span> <span class="n">DataTicksCalculator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for calculating ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        use the default ticks</span>
<span class="sd">    int</span>
<span class="sd">        for an integer *i*, only every *i-th* tick of the default ticks are</span>
<span class="sd">        used&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;ticks&#39;</span>

    <span class="nd">@abstractproperty</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TicksBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="TicksBase.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_default_locators</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="TicksBase.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">which</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">which</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_locator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="n">which</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reduce_ticks</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calc_funcs</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]](</span><span class="o">*</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">steps</span> <span class="o">=</span> <span class="mi">11</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">steps</span><span class="p">,</span>
                                       <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="TicksBase.set_ticks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase.set_ticks">[docs]</a>    <span class="k">def</span> <span class="nf">set_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;minor&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TicksBase.get_locator"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase.get_locator">[docs]</a>    <span class="k">def</span> <span class="nf">get_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="s1">&#39;get_</span><span class="si">%s</span><span class="s1">_locator&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">)()</span></div>

<div class="viewcode-block" id="TicksBase.set_locator"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase.set_locator">[docs]</a>    <span class="k">def</span> <span class="nf">set_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the locator corresponding of the axis</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        locator: matplotlib.ticker.Locator</span>
<span class="sd">            The locator to set</span>
<span class="sd">        which: {None, &#39;minor&#39;, &#39;major&#39;}</span>
<span class="sd">            Specify which locator shall be set. If None, it will be taken from</span>
<span class="sd">            the :attr:`which` attribute&quot;&quot;&quot;</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="s2">&quot;set_</span><span class="si">%s</span><span class="s2">_locator&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">)(</span><span class="n">locator</span><span class="p">)</span></div>

<div class="viewcode-block" id="TicksBase.set_default_locators"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksBase.set_default_locators">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_locators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the default locator that is used for updating to None or int</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        which: {None, &#39;minor&#39;, &#39;major&#39;}</span>
<span class="sd">            Specify which locator shall be set&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;minor&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="s1">&#39;minor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;major&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="s1">&#39;major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_reduce_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_locator</span><span class="p">(</span><span class="n">FixedLocator</span><span class="p">(</span><span class="n">loc</span><span class="p">()[::</span><span class="n">i</span><span class="p">]))</span></div>


<div class="viewcode-block" id="DtTicksBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DtTicksBase">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;DtTicksBase&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DtTicksBase</span><span class="p">(</span><span class="n">TicksBase</span><span class="p">,</span> <span class="n">TicksManager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for x- and y-tick formatoptions</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TicksManager.possible_types)s</span>
<span class="sd">    %(TicksBase.possible_types)s</span>
<span class="sd">    %(DataTicksCalculator.possible_types)s</span>
<span class="sd">            hour</span>
<span class="sd">                draw ticks every hour</span>
<span class="sd">            day</span>
<span class="sd">                draw ticks every day</span>
<span class="sd">            week</span>
<span class="sd">                draw ticks every week</span>
<span class="sd">            month, monthend, monthbegin</span>
<span class="sd">                draw ticks in the middle, at the end or at the beginning of each</span>
<span class="sd">                month</span>
<span class="sd">            year, yearend, yearbegin</span>
<span class="sd">                draw ticks in the middle, at the end or at the beginning of each</span>
<span class="sd">                year</span>

<span class="sd">        For data, mid, hour, day, week, month, etc., the optional second value</span>
<span class="sd">        can be an integer i determining that every i-th data point shall be</span>
<span class="sd">        used (by default, it is set to 1). For rounded, roundedsym, minmax and</span>
<span class="sd">        sym, the second value determines the total number of ticks (defaults to</span>
<span class="sd">        11).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DtTicksBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calc_funcs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s1">&#39;hour&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">),</span>
            <span class="s1">&#39;day&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">),</span>
            <span class="s1">&#39;week&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span><span class="n">offsets</span><span class="o">.</span><span class="n">Week</span><span class="p">()),</span>
            <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mid_dt_ticks</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">),</span>
            <span class="s1">&#39;monthend&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span>
                <span class="n">offsets</span><span class="o">.</span><span class="n">MonthEnd</span><span class="p">(),</span> <span class="n">onset</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">MonthBegin</span><span class="p">()),</span>
            <span class="s1">&#39;monthbegin&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span>
                <span class="n">offsets</span><span class="o">.</span><span class="n">MonthBegin</span><span class="p">(),</span> <span class="n">onset</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">MonthBegin</span><span class="p">(),</span>
                <span class="n">offset</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">MonthBegin</span><span class="p">()),</span>
            <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mid_dt_ticks</span><span class="p">(</span><span class="n">offsets</span><span class="o">.</span><span class="n">YearBegin</span><span class="p">()),</span>
            <span class="s1">&#39;yearend&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span>
                <span class="n">offsets</span><span class="o">.</span><span class="n">YearEnd</span><span class="p">(),</span> <span class="n">onset</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">YearBegin</span><span class="p">()),</span>
            <span class="s1">&#39;yearbegin&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequent_ticks</span><span class="p">(</span>
                <span class="n">offsets</span><span class="o">.</span><span class="n">YearBegin</span><span class="p">(),</span> <span class="n">onset</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">YearBegin</span><span class="p">(),</span>
                <span class="n">offset</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">YearBegin</span><span class="p">())})</span>

<div class="viewcode-block" id="DtTicksBase.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DtTicksBase.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="ow">or</span> <span class="p">{</span><span class="s1">&#39;minor&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;major&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DtTicksBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dtdata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The np.unique :attr:`data` as datetime objects&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="c1"># do nothing if the data is a pandas.Index without time informations</span>
        <span class="c1"># or not a pandas.Index</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;is_all_dates&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">] - Could not convert time informations for </span><span class="si">%s</span><span class="s2"> ticks &quot;</span>
                 <span class="s2">&quot;with object </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">_frequent_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">onset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="mi">1</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtdata</span>
            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">mindata</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="k">if</span> <span class="n">onset</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">onset</span>
            <span class="n">maxdata</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="n">offset</span>
            <span class="k">return</span> <span class="n">date_range</span><span class="p">(</span>
                <span class="n">mindata</span><span class="p">,</span> <span class="n">maxdata</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">)[::</span><span class="n">step</span><span class="p">]</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">func</span>

    <span class="k">def</span> <span class="nf">_mid_dt_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freq</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="mi">1</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtdata</span>
            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span>
                <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">)</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
            <span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">step</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">func</span></div>


<div class="viewcode-block" id="XTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XTicks">[docs]</a><span class="k">class</span> <span class="nc">XTicks</span><span class="p">(</span><span class="n">DtTicksBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modify the x-axis ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(DtTicksBase.possible_types)s</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Plot 11 ticks over the whole data range::</span>

<span class="sd">        &gt;&gt;&gt; plotter.update(xticks=&#39;rounded&#39;)</span>

<span class="sd">    Plot 7 ticks over the whole data range where the maximal and minimal</span>
<span class="sd">    tick matches the data maximum and minimum::</span>

<span class="sd">        &gt;&gt;&gt; plotter.update(xticks=[&#39;minmax&#39;, 7])</span>

<span class="sd">    Plot ticks every year and minor ticks every month::</span>

<span class="sd">        &gt;&gt;&gt; plotter.update(xticks={&#39;major&#39;: &#39;year&#39;, &#39;minor&#39;: &#39;month&#39;})</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xticklabels, ticksize, tickweight, xtickprops, yticks&quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">TicksBase</span><span class="o">.</span><span class="n">children</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;yticks&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">DtTicksBase</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Location of the x-Axis ticks&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">select_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;plotted_data&#39;</span><span class="p">,</span> <span class="nb">super</span><span class="p">(</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">select_array</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>

<div class="viewcode-block" id="XTicks.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XTicks.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">initialize_plot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">swap_funcs</span><span class="p">[</span><span class="s1">&#39;ticks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_ticks</span></div>

    <span class="k">def</span> <span class="nf">_swap_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xticks</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">yticks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yticks</span>
        <span class="n">old_xlocators</span> <span class="o">=</span> <span class="n">xticks</span><span class="o">.</span><span class="n">default_locators</span>
        <span class="n">xticks</span><span class="o">.</span><span class="n">default_locators</span> <span class="o">=</span> <span class="n">yticks</span><span class="o">.</span><span class="n">default_locators</span>
        <span class="n">yticks</span><span class="o">.</span><span class="n">default_locators</span> <span class="o">=</span> <span class="n">old_xlocators</span>
        <span class="n">old_xval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">no_validation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yticks</span><span class="o">.</span><span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">yticks</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_xval</span></div>


<div class="viewcode-block" id="YTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.YTicks">[docs]</a><span class="k">class</span> <span class="nc">YTicks</span><span class="p">(</span><span class="n">DtTicksBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modify the y-axis ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(DtTicksBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    yticklabels, ticksize, tickweight, ytickprops</span>
<span class="sd">    xticks: for possible examples&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">DtTicksBase</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Location of the y-Axis ticks&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">select_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;plotted_data&#39;</span><span class="p">,</span> <span class="nb">super</span><span class="p">(</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">select_array</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="TickLabelsBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;TickLabelsBase&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TickLabelsBase</span><span class="p">(</span><span class="n">TicksManagerBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        A formatstring like ``&#39;%%Y&#39;`` for plotting the year (in the case that</span>
<span class="sd">        time is shown on the axis) or &#39;%%i&#39; for integers</span>
<span class="sd">    array</span>
<span class="sd">        An array of strings to use for the ticklabels&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;ticks&#39;</span>

    <span class="nd">@abstractproperty</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The axis on the axes to modify the ticks of&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TickLabelsBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_formatters</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="TickLabelsBase.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_default_formatters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="TickLabelsBase.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_formatters</span><span class="p">[</span><span class="s1">&#39;major&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_stringformatter</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ticks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_ticklocs</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;minor&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">] - Length of ticks (</span><span class="si">%i</span><span class="s2">) and ticklabels (</span><span class="si">%i</span><span class="s2">)&quot;</span>
                     <span class="s2">&quot;do not match!&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ticks</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="TickLabelsBase.set_stringformatter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase.set_stringformatter">[docs]</a>    <span class="k">def</span> <span class="nf">set_stringformatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">default_formatter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_formatters</span><span class="p">[</span><span class="s1">&#39;major&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default_formatter</span><span class="p">,</span> <span class="n">AutoDateFormatter</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">DateFormatter</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="n">s</span><span class="p">))</span></div>

<div class="viewcode-block" id="TickLabelsBase.set_ticklabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase.set_ticklabels">[docs]</a>    <span class="k">def</span> <span class="nf">set_ticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the given tick labels&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">FixedFormatter</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span></div>

<div class="viewcode-block" id="TickLabelsBase.set_formatter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase.set_formatter">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">set_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets a given formatter&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TickLabelsBase.set_default_formatters"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabelsBase.set_default_formatters">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">set_default_formatters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the default formatters that is used for updating to None&quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="TickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabels">[docs]</a><span class="k">class</span> <span class="nc">TickLabels</span><span class="p">(</span><span class="n">TickLabelsBase</span><span class="p">,</span> <span class="n">TicksManager</span><span class="p">):</span>

<div class="viewcode-block" id="TickLabels.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabels.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                 <span class="s1">&#39;minor&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="s1">&#39;minor&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="p">[(</span><span class="s1">&#39;minor&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TickLabels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">items</span><span class="p">))</span></div>

<div class="viewcode-block" id="TickLabels.set_default_formatters"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabels.set_default_formatters">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_formatters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the default formatters that is used for updating to None</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        which: {None, &#39;minor&#39;, &#39;major&#39;}</span>
<span class="sd">            Specify which locator shall be set&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;minor&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_formatters</span><span class="p">[</span><span class="s1">&#39;minor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_minor_formatter</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;major&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_formatters</span><span class="p">[</span><span class="s1">&#39;major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span></div>

<div class="viewcode-block" id="TickLabels.set_formatter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickLabels.set_formatter">[docs]</a>    <span class="k">def</span> <span class="nf">set_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">which</span> <span class="o">=</span> <span class="n">which</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">which</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="s1">&#39;set_</span><span class="si">%s</span><span class="s1">_formatter&#39;</span> <span class="o">%</span> <span class="n">which</span><span class="p">)(</span><span class="n">formatter</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="XTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XTickLabels">[docs]</a><span class="k">class</span> <span class="nc">XTickLabels</span><span class="p">(</span><span class="n">TickLabels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modify the x-axis ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TicksManager.possible_types)s</span>
<span class="sd">    %(TickLabelsBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xticks, ticksize, tickweight, xtickprops, yticklabels&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">TickLabelsBase</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;xticks&#39;</span><span class="p">,</span> <span class="s1">&#39;yticklabels&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;x-xxis Ticklabels&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span>

<div class="viewcode-block" id="XTickLabels.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XTickLabels.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">XTickLabels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">initialize_plot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">swap_funcs</span><span class="p">[</span><span class="s1">&#39;ticklabels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_ticklabels</span></div>

    <span class="k">def</span> <span class="nf">_swap_ticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xticklabels</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">yticklabels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yticklabels</span>
        <span class="n">old_xformatters</span> <span class="o">=</span> <span class="n">xticklabels</span><span class="o">.</span><span class="n">default_formatters</span>
        <span class="n">xticklabels</span><span class="o">.</span><span class="n">default_formatters</span> <span class="o">=</span> <span class="n">yticklabels</span><span class="o">.</span><span class="n">default_formatters</span>
        <span class="n">yticklabels</span><span class="o">.</span><span class="n">default_formatters</span> <span class="o">=</span> <span class="n">old_xformatters</span>
        <span class="n">old_xval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">no_validation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yticklabels</span><span class="o">.</span><span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">yticklabels</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_xval</span></div>


<div class="viewcode-block" id="YTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.YTickLabels">[docs]</a><span class="k">class</span> <span class="nc">YTickLabels</span><span class="p">(</span><span class="n">TickLabels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modify the y-axis ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TicksManager.possible_types)s</span>
<span class="sd">    %(TickLabelsBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    yticks, ticksize, tickweight, ytickprops, xticklabels&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">TickLabelsBase</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;yticks&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;y-xxis ticklabels&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span></div>


<div class="viewcode-block" id="BarXTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXTicks">[docs]</a><span class="k">class</span> <span class="nc">BarXTicks</span><span class="p">(</span><span class="n">XTicks</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">XTicks</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="n">XTicks</span><span class="o">.</span><span class="n">connections</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;xlim&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">XTicks</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="BarXTicks.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXTicks.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="s1">&#39;major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtick</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="s1">&#39;minor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtick</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_default_locators</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BarXTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="BarXTicks.set_default_locators"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXTicks.set_default_locators">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_locators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BarXTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_default_locators</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orig_default_locators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[[</span><span class="nb">min</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">min</span><span class="p">()])],</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">get_xys</span><span class="p">(</span><span class="n">arr</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">iter_data</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">get_xys</span><span class="p">(</span><span class="n">arr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">iter_data</span><span class="p">])</span></div>


<div class="viewcode-block" id="BarYTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYTicks">[docs]</a><span class="k">class</span> <span class="nc">BarYTicks</span><span class="p">(</span><span class="n">YTicks</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">YTicks</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="n">YTicks</span><span class="o">.</span><span class="n">connections</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ylim&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">YTicks</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="BarYTicks.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYTicks.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="s1">&#39;major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtick</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="p">[</span><span class="s1">&#39;minor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtick</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_default_locators</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BarYTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="BarYTicks.set_default_locators"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYTicks.set_default_locators">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_locators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BarYTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_default_locators</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orig_default_locators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_locators</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[[</span><span class="nb">min</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">min</span><span class="p">()])],</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">get_xys</span><span class="p">(</span><span class="n">arr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">iter_data</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">get_xys</span><span class="p">(</span><span class="n">arr</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">iter_data</span><span class="p">])</span></div>


<div class="viewcode-block" id="BarXTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXTickLabels">[docs]</a><span class="k">class</span> <span class="nc">BarXTickLabels</span><span class="p">(</span><span class="n">XTickLabels</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">XTickLabels</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">XTickLabels</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="BarXTickLabels.set_stringformatter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXTickLabels.set_stringformatter">[docs]</a>    <span class="k">def</span> <span class="nf">set_stringformatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
            <span class="k">if</span> <span class="n">index</span><span class="o">.</span><span class="n">is_all_dates</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span><span class="p">:</span>
                    <span class="n">xticks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;minor&#39;</span><span class="p">)</span>
                    <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span>
                                   <span class="n">to_datetime</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">xticks</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)])))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">DateFormatter</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">arr</span><span class="p">)))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">DateFormatter</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
                <span class="k">return</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BarXTickLabels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_stringformatter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="BarYTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYTickLabels">[docs]</a><span class="k">class</span> <span class="nc">BarYTickLabels</span><span class="p">(</span><span class="n">YTickLabels</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">YTickLabels</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">YTickLabels</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="BarYTickLabels.set_stringformatter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYTickLabels.set_stringformatter">[docs]</a>    <span class="k">def</span> <span class="nf">set_stringformatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
            <span class="k">if</span> <span class="n">index</span><span class="o">.</span><span class="n">is_all_dates</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span><span class="p">:</span>
                    <span class="n">yticks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;minor&#39;</span><span class="p">)</span>
                    <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">toordinal</span><span class="p">(),</span>
                                   <span class="n">to_datetime</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">yticks</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)])))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">DateFormatter</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">arr</span><span class="p">)))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">DateFormatter</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
                <span class="k">return</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BarYTickLabels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_stringformatter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TicksOptions"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksOptions">[docs]</a><span class="k">class</span> <span class="nc">TicksOptions</span><span class="p">(</span><span class="n">TicksManagerBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for ticklabels options that apply for x- and y-axis&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TicksOptions.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TicksOptions.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">which</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">axis</span><span class="p">,</span> <span class="n">axisname</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="p">],</span> <span class="s1">&#39;xy&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">which</span> <span class="o">=</span> <span class="n">which</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="n">axis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axisname</span> <span class="o">=</span> <span class="n">axisname</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TickSizeBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickSizeBase">[docs]</a><span class="k">class</span> <span class="nc">TickSizeBase</span><span class="p">(</span><span class="n">TicksOptions</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract base class for modifying tick sizes&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TickSizeBase.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickSizeBase.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">):</span>
            <span class="n">t</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TickSize"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickSize">[docs]</a><span class="k">class</span> <span class="nc">TickSize</span><span class="p">(</span><span class="n">TickSizeBase</span><span class="p">,</span> <span class="n">TicksOptions</span><span class="p">,</span> <span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the ticksize of the ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TicksManager.possible_types)s</span>
<span class="sd">    %(fontsizes)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    tickweight, xtickprops, ytickprops&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">TicksOptions</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;xtickprops&#39;</span><span class="p">,</span> <span class="s1">&#39;ytickprops&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font size of the ticklabels&#39;</span></div>


<div class="viewcode-block" id="TickWeightBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickWeightBase">[docs]</a><span class="k">class</span> <span class="nc">TickWeightBase</span><span class="p">(</span><span class="n">TicksOptions</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract base class for modifying font weight of ticks&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TickWeightBase.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickWeightBase.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">):</span>
            <span class="n">t</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TickWeight"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickWeight">[docs]</a><span class="k">class</span> <span class="nc">TickWeight</span><span class="p">(</span><span class="n">TickWeightBase</span><span class="p">,</span> <span class="n">TicksOptions</span><span class="p">,</span> <span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the fontweight of the ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TicksManager.possible_types)s</span>
<span class="sd">    %(fontweights)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    ticksize, xtickprops, ytickprops&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">TicksOptions</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;xtickprops&#39;</span><span class="p">,</span> <span class="s1">&#39;ytickprops&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font weight of the ticklabels&#39;</span></div>


<div class="viewcode-block" id="TickPropsBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickPropsBase">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;TickPropsBase&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TickPropsBase</span><span class="p">(</span><span class="n">TicksManagerBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for tick parameters</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    dict</span>
<span class="sd">        Items may be anything of the :func:`matplotlib.pyplot.tick_params`</span>
<span class="sd">        function&quot;&quot;&quot;</span>

    <span class="nd">@abstractproperty</span>
    <span class="k">def</span> <span class="nf">axisname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The name of the axis (either &#39;x&#39; or &#39;y&#39;)&quot;&quot;&quot;</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="TickPropsBase.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.TickPropsBase.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]))</span> <span class="o">&gt;=</span> <span class="mf">1.5</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;visible&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axisname</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="XTickProps"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XTickProps">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;XTickProps&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">XTickProps</span><span class="p">(</span><span class="n">TickPropsBase</span><span class="p">,</span> <span class="n">TicksManager</span><span class="p">,</span> <span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the x-axis tick parameters</span>

<span class="sd">    This formatoption can be used to make a detailed change of the ticks</span>
<span class="sd">    parameters on the x-axis.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TicksManager.possible_types)s</span>
<span class="sd">    %(TickPropsBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xticks, yticks, ticksize, tickweight, ytickprops&quot;&quot;&quot;</span>

    <span class="n">axisname</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font properties of the x-ticklabels&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span></div>


<div class="viewcode-block" id="YTickProps"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.YTickProps">[docs]</a><span class="k">class</span> <span class="nc">YTickProps</span><span class="p">(</span><span class="n">XTickProps</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the y-axis tick parameters</span>

<span class="sd">    This formatoption can be used to make a detailed change of the ticks</span>
<span class="sd">    parameters of the y-axis.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(XTickProps.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xticks, yticks, ticksize, tickweight, xtickprops&quot;&quot;&quot;</span>

    <span class="n">axisname</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font properties of the y-ticklabels&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span></div>


<div class="viewcode-block" id="Xlabel"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlabel">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;Xlabel&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Xlabel</span><span class="p">(</span><span class="n">TextBase</span><span class="p">,</span> <span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the x-axis label</span>

<span class="sd">    Set the label for the x-axis.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        The text for the :func:`~matplotlib.pyplot.xlabel` function.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xlabelsize, xlabelweight, xlabelprops&quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="s1">&#39;ylabel&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;x-axis label&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enhanced_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">replot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">replot</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_enhanced_attrs&#39;</span><span class="p">)</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="n">replot</span><span class="p">)</span>
        <span class="n">arr_attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="n">replot</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">arr_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attrs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enhanced_attrs</span> <span class="o">=</span> <span class="n">attrs</span>
        <span class="k">return</span> <span class="n">attrs</span>

<div class="viewcode-block" id="Xlabel.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlabel.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">swap_funcs</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texts</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_attrs</span><span class="p">))]</span></div>

<div class="viewcode-block" id="Xlabel.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlabel.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_attrs</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">_swap_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">plotter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">_swap_labels</span><span class="p">()</span>
        <span class="n">old_xlabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">with</span> <span class="n">plotter</span><span class="o">.</span><span class="n">no_validation</span><span class="p">:</span>
            <span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="o">.</span><span class="n">value</span>
            <span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_xlabel</span></div>


<div class="viewcode-block" id="BarXlabel"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXlabel">[docs]</a><span class="k">class</span> <span class="nc">BarXlabel</span><span class="p">(</span><span class="n">Xlabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the x-axis label</span>

<span class="sd">    Set the label for the x-axis.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(Xlabel.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xlabelsize, xlabelweight, xlabelprops&quot;&quot;&quot;</span>

    <span class="c1">#: Xlabel is modified by the pandas plot routine, therefore we update it</span>
    <span class="c1">#: after each plot</span>
    <span class="n">update_after_plot</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Ylabel"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Ylabel">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;Ylabel&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Ylabel</span><span class="p">(</span><span class="n">TextBase</span><span class="p">,</span> <span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the y-axis label</span>

<span class="sd">    Set the label for the y-axis.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        The text for the :func:`~matplotlib.pyplot.ylabel` function.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    ylabelsize, ylabelweight, ylabelprops&quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;y-axis label&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enhanced_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">replot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">replot</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_enhanced_attrs&#39;</span><span class="p">)</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="n">replot</span><span class="p">)</span>
        <span class="n">arr_attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="n">replot</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">arr_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attrs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enhanced_attrs</span> <span class="o">=</span> <span class="n">attrs</span>
        <span class="k">return</span> <span class="n">attrs</span>

<div class="viewcode-block" id="Ylabel.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Ylabel.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texts</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_attrs</span><span class="p">))]</span></div>

<div class="viewcode-block" id="Ylabel.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Ylabel.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enhanced_attrs</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="BarYlabel"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYlabel">[docs]</a><span class="k">class</span> <span class="nc">BarYlabel</span><span class="p">(</span><span class="n">Ylabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the y-axis label</span>

<span class="sd">    Set the label for the y-axis.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(Ylabel.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    ylabelsize, ylabelweight, ylabelprops&quot;&quot;&quot;</span>

    <span class="c1">#: Ylabel is modified by the pandas plot routine, therefore we update it</span>
    <span class="c1">#: after each plot</span>
    <span class="n">update_after_plot</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="LabelOptions"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelOptions">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;LabelOptions&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">LabelOptions</span><span class="p">(</span><span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base formatoption class for label sizes</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    dict</span>
<span class="sd">        A dictionary with the keys ``&#39;x&#39;`` and (or) ``&#39;y&#39;`` to specify</span>
<span class="sd">        which ticks are managed. If the given value is not a dictionary with</span>
<span class="sd">        those keys, it is used for the x- and y-axis.</span>
<span class="sd">        The values in the dictionary can be one types below.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">,</span> <span class="s1">&#39;ylabel&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="LabelOptions.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelOptions.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">axis</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span> <span class="o">+</span> <span class="s1">&#39;label&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">_texts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axis_str</span> <span class="o">=</span> <span class="n">axis</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="LabelOptions.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelOptions.update_axis">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="LabelSize"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelSize">[docs]</a><span class="k">class</span> <span class="nc">LabelSize</span><span class="p">(</span><span class="n">LabelOptions</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the size of both, x- and y-label</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LabelOptions.possible_types)s</span>
<span class="sd">    %(fontsizes)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xlabel, ylabel, labelweight, labelprops&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;labels&#39;</span>

    <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;labelprops&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;font size of x- and y-axis label&#39;</span>

<div class="viewcode-block" id="LabelSize.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelSize.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LabelWeight"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelWeight">[docs]</a><span class="k">class</span> <span class="nc">LabelWeight</span><span class="p">(</span><span class="n">LabelOptions</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the font size of both, x- and y-label</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LabelOptions.possible_types)s</span>
<span class="sd">    %(fontweights)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xlabel, ylabel, labelsize, labelprops&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;labels&#39;</span>

    <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;labelprops&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;font weight of x- and y-axis label&#39;</span>

<div class="viewcode-block" id="LabelWeight.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelWeight.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LabelProps"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelProps">[docs]</a><span class="k">class</span> <span class="nc">LabelProps</span><span class="p">(</span><span class="n">LabelOptions</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the font properties of both, x- and y-label</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LabelOptions.possible_types)s</span>
<span class="sd">    dict</span>
<span class="sd">        Items may be any valid text property</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xlabel, ylabel, labelsize, labelweight&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;labels&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xlabel&#39;</span><span class="p">,</span> <span class="s1">&#39;ylabel&#39;</span><span class="p">,</span> <span class="s1">&#39;labelsize&#39;</span><span class="p">,</span> <span class="s1">&#39;labelweight&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;font properties of x- and y-axis label&#39;</span>

<div class="viewcode-block" id="LabelProps.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LabelProps.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontprops</span><span class="p">):</span>
        <span class="n">fontprops</span> <span class="o">=</span> <span class="n">fontprops</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;size&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fontprops</span> <span class="ow">and</span> <span class="s1">&#39;fontsize&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fontprops</span><span class="p">:</span>
            <span class="n">fontprops</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labelsize</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_str</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;weight&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fontprops</span> <span class="ow">and</span> <span class="s1">&#39;fontweight&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fontprops</span><span class="p">:</span>
            <span class="n">fontprops</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labelweight</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_str</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fontprops</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Transpose"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Transpose">[docs]</a><span class="k">class</span> <span class="nc">Transpose</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Switch x- and y-axes</span>

<span class="sd">    By default, one-dimensional arrays have the dimension on the x-axis and two</span>
<span class="sd">    dimensional arrays have the first dimension on the y and the second on the</span>
<span class="sd">    x-axis. You can set this formatoption to True to change this behaviour</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    bool</span>
<span class="sd">        If True, axes are switched&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;axes&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Switch x- and y-axes&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Transpose</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">swap_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ticks&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_ticks</span><span class="p">,</span>
            <span class="s1">&#39;ticklabels&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_ticklabels</span><span class="p">,</span>
            <span class="s1">&#39;limits&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_limits</span><span class="p">,</span>
            <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_labels</span><span class="p">,</span>
            <span class="p">}</span>

<div class="viewcode-block" id="Transpose.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Transpose.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Transpose.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Transpose.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">swap_funcs</span><span class="p">):</span>
            <span class="n">func</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_swap_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span>
        <span class="n">yaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span>
        <span class="c1"># swap major ticks</span>
        <span class="n">old_xlocator</span> <span class="o">=</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
        <span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">())</span>
        <span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">old_xlocator</span><span class="p">)</span>
        <span class="c1"># swap minor ticks</span>
        <span class="n">old_xlocator</span> <span class="o">=</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">()</span>
        <span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">())</span>
        <span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">old_xlocator</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_swap_ticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span>
        <span class="n">yaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span>
        <span class="c1"># swap major ticklabels</span>
        <span class="n">old_xformatter</span> <span class="o">=</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span>
        <span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">())</span>
        <span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">old_xformatter</span><span class="p">)</span>
        <span class="c1"># swap minor ticklabels</span>
        <span class="n">old_xformatter</span> <span class="o">=</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_formatter</span><span class="p">()</span>
        <span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minor_formatter</span><span class="p">())</span>
        <span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">old_xformatter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_swap_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">old_xlim</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">old_xlim</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_swap_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">old_xlabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">old_xlabel</span><span class="p">)</span>

<div class="viewcode-block" id="Transpose.get_x"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Transpose.get_x">[docs]</a>    <span class="k">def</span> <span class="nf">get_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="s1">&#39;ndim&#39;</span><span class="p">):</span>  <span class="c1"># if the data object is an array list</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;variable&#39;</span> <span class="ow">and</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">is_unstructured</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_unstructured</span> <span class="ow">and</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#: The x-coordinate name of the variable as stored in the</span>
                <span class="c1">#: dataset (might differ from the one in this array because</span>
                <span class="c1">#: this could also be time, z, y, etc.)</span>
                <span class="n">ds_coord</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">xname</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">ds_coord</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">xname</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_unstructured</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ds_coord</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">xname</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">xname</span> <span class="o">==</span> <span class="n">ds_coord</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_coord</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_coord</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">xname</span><span class="p">]</span></div>

<div class="viewcode-block" id="Transpose.get_y"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Transpose.get_y">[docs]</a>    <span class="k">def</span> <span class="nf">get_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="s1">&#39;ndim&#39;</span><span class="p">):</span>  <span class="c1"># if the data object is an array list</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;variable&#39;</span> <span class="ow">and</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">is_unstructured</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_unstructured</span> <span class="ow">and</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#: The x-coordinate name of the variable as stored in the</span>
                <span class="c1">#: dataset (might differ from the one in this array because</span>
                <span class="c1">#: this could also be time, z, y, etc.)</span>
                <span class="n">ds_coord</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">yname</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">ds_coord</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">yname</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_unstructured</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ds_coord</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_dim</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">yname</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">yname</span> <span class="o">==</span> <span class="n">ds_coord</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_coord</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">get_coord</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">yname</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="LineColors"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LineColors">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;LineColors&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">LineColors</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the color coding</span>

<span class="sd">    This formatoptions sets the color of the lines, bars, etc.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        to use the axes color_cycle</span>
<span class="sd">    iterable</span>
<span class="sd">        (e.g. list) to specify the colors manually</span>
<span class="sd">    str</span>
<span class="sd">        %(cmap_note)s</span>
<span class="sd">    matplotlib.colors.ColorMap</span>
<span class="sd">        to automatically choose the colors according to the number of lines,</span>
<span class="sd">        etc. from the given colormap&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Color cycle&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value2pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colors</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value2share</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extended_colors</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LineColors</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extended_colors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">c</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_cycle</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">c</span>

<div class="viewcode-block" id="LineColors.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LineColors.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.prop_cycle&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">((</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">props</span> <span class="ow">in</span> <span class="n">prop_cycler</span><span class="p">))</span>
            <span class="n">prop_cycler</span><span class="o">.</span><span class="n">_keys</span>  <span class="c1"># this should make a copy</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">value</span><span class="p">)(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">)),</span>
                                <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># do not use safe_list, because it might be a generator</span>
                    <span class="n">validate_color</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color_cycle</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Marker"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Marker">[docs]</a><span class="k">class</span> <span class="nc">Marker</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose the marker for points</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Use the default from matplotlibs rcParams</span>
<span class="sd">    str</span>
<span class="sd">        A valid symbol for the matplotlib markers (see</span>
<span class="sd">        :mod:`matplotlib.markers`)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

<div class="viewcode-block" id="Marker.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Marker.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.marker&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MarkerSize"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MarkerSize">[docs]</a><span class="k">class</span> <span class="nc">MarkerSize</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose the size of the markers for points</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Use the default from matplotlibs rcParams</span>
<span class="sd">    float</span>
<span class="sd">        The size of the marker</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

<div class="viewcode-block" id="MarkerSize.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MarkerSize.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;markersize&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;markersize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="LineWidth"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LineWidth">[docs]</a><span class="k">class</span> <span class="nc">LineWidth</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose the width of the lines</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Use the default from matplotlibs rcParams</span>
<span class="sd">    float</span>
<span class="sd">        The width of the lines</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

<div class="viewcode-block" id="LineWidth.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LineWidth.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;linewidth&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="LinePlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LinePlot">[docs]</a><span class="k">class</span> <span class="nc">LinePlot</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose the line style of the plot</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Don&#39;t make any plotting</span>
<span class="sd">    ``&#39;area&#39;``</span>
<span class="sd">        To make an area plot (filled between y=0 and y), see</span>
<span class="sd">        :func:`matplotlib.pyplot.fill_between`</span>
<span class="sd">    ``&#39;areax&#39;``</span>
<span class="sd">        To make a transposed area plot (filled between x=0 and x), see</span>
<span class="sd">        :func:`matplotlib.pyplot.fill_betweenx`</span>
<span class="sd">    ``&#39;stacked&#39;``</span>
<span class="sd">        Make a stacked plot</span>
<span class="sd">    str or list of str</span>
<span class="sd">        The line style string to use ([&#39;solid&#39; | &#39;dashed&#39;, &#39;dashdot&#39;, &#39;dotted&#39;</span>
<span class="sd">        | (offset, on-off-dash-seq) | &#39;-&#39; | &#39;--&#39; | &#39;-.&#39; | &#39;:&#39; | &#39;None&#39; | &#39; &#39; |</span>
<span class="sd">        &#39;&#39;]).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">plot_fmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;plotting&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span> <span class="o">+</span> <span class="mf">0.1</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Line plot type&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">plotted_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The data that is shown to the user&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">InteractiveList</span><span class="p">(</span>
            <span class="p">[</span><span class="n">arr</span> <span class="k">for</span> <span class="n">arr</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">,</span>
                                     <span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)))</span>
             <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Formatoption</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="LinePlot.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LinePlot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># the real plot making is done by make_plot</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="LinePlot.make_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LinePlot.make_plot">[docs]</a>    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stacked_plot</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">markers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">markers</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="n">markers</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">starmap</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_arr</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">extended_colors</span><span class="p">,</span>
                        <span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)),</span> <span class="n">markers</span><span class="p">)))))</span></div>

    <span class="k">def</span> <span class="nf">_stacked_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">transpose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">([</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">arr</span>
                                    <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="n">data</span><span class="p">])</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_index</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">DatetimeIndex</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">s</span><span class="p">),</span> <span class="n">c</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">extended_colors</span><span class="p">,</span>
                                    <span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))):</span>
            <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">fill_betweenx</span> <span class="k">if</span> <span class="n">transpose</span> <span class="k">else</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">c</span><span class="p">))</span>
            <span class="n">base</span> <span class="o">+=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">_get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
        <span class="k">return</span> <span class="n">index</span>

<div class="viewcode-block" id="LinePlot.plot_arr"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LinePlot.plot_arr">[docs]</a>    <span class="k">def</span> <span class="nf">plot_arr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">ls</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
        <span class="c1"># since date time objects are covered better by pandas,</span>
        <span class="c1"># we convert to a series</span>
        <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># contains also error information</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_index</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">DatetimeIndex</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>
        <span class="k">if</span> <span class="n">ls</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="s1">&#39;areay&#39;</span><span class="p">]:</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">y</span><span class="p">)])</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">y</span><span class="p">)])</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">ls</span> <span class="o">==</span> <span class="s1">&#39;areax&#39;</span><span class="p">:</span>
            <span class="n">xmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">fill_betweenx</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">ls</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">m</span><span class="p">,</span>
                                <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinePlot.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LinePlot.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">:</span>
            <span class="n">artist</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span></div></div>


<div class="viewcode-block" id="ErrorPlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorPlot">[docs]</a><span class="k">class</span> <span class="nc">ErrorPlot</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Visualize the error range</span>

<span class="sd">    This formatoption visualizes the error range. For this, you must provide a</span>
<span class="sd">    two-dimensional data array as input. The first dimension might be either of</span>
<span class="sd">    length</span>

<span class="sd">    - 2 to provide the deviation from minimum and maximum error range from</span>
<span class="sd">      the data</span>
<span class="sd">    - 3 to provide the minimum and maximum error range explicitly</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        No errors are visualized</span>
<span class="sd">    &#39;fill&#39;</span>
<span class="sd">        The area between min- and max-error is filled with the same color as</span>
<span class="sd">        the line and the alpha is determined by the :attr:`fillalpha` attribute</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Assume you have the standard deviation stored in the ``&#39;std&#39;``-variable and</span>
<span class="sd">    the data in the ``&#39;data&#39;`` variable. Then you can visualize the standard</span>
<span class="sd">    deviation simply via::</span>

<span class="sd">        &gt;&gt;&gt; psy.plot.lineplot(input_ds, name=[[&#39;data&#39;, &#39;std&#39;]])</span>

<span class="sd">    On the other hand, assume you want to visualize the area between the 25th</span>
<span class="sd">    and 75th percentile (stored in the variables ``&#39;p25&#39;`` and ``&#39;p75&#39;``)::</span>

<span class="sd">        &gt;&gt;&gt; psy.plot.lineplot(input_ds, name=[[&#39;data&#39;, &#39;p25&#39;, &#39;p75&#39;]])</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    erroralpha</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">plot_fmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;plotting&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Error plot type&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Formatoption</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="ErrorPlot.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorPlot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>  <span class="c1"># the work is done in make_plot</span></div>

<div class="viewcode-block" id="ErrorPlot.make_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorPlot.make_plot">[docs]</a>    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">extended_colors</span>
            <span class="k">for</span> <span class="n">da</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_plot</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">da</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">da</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">da</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
                    <span class="n">error</span> <span class="o">=</span> <span class="n">da</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="p">:]</span>
                    <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">min_range</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span> <span class="o">-</span> <span class="n">error</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">max_range</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span> <span class="o">+</span> <span class="n">error</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">min_range</span> <span class="o">=</span> <span class="n">error</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">max_range</span> <span class="o">=</span> <span class="n">error</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;fill&#39;</span><span class="p">:</span>
                        <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_x_values</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_fill</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">min_range</span><span class="p">,</span> <span class="n">max_range</span><span class="p">,</span>
                                       <span class="nb">next</span><span class="p">(</span><span class="n">colors</span><span class="p">),</span> <span class="n">zorder</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">zorder</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">next</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_x_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">DatetimeIndex</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">x</span>

<div class="viewcode-block" id="ErrorPlot.plot_fill"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorPlot.plot_fill">[docs]</a>    <span class="k">def</span> <span class="nf">plot_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">min_range</span><span class="p">,</span> <span class="n">max_range</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">plot_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">fill_betweenx</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">plot_method</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">min_range</span><span class="p">,</span> <span class="n">max_range</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">c</span><span class="p">,</span>
                        <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span>
                            <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">])))))</span></div>

<div class="viewcode-block" id="ErrorPlot.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorPlot.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">:</span>
            <span class="n">artist</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span></div></div>


<div class="viewcode-block" id="ErrorAlpha"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorAlpha">[docs]</a><span class="k">class</span> <span class="nc">ErrorAlpha</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the alpha value for the error range</span>

<span class="sd">    This formatoption can be used to set the alpha value (opacity) for the</span>
<span class="sd">    :attr:`error` formatoption</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        A float between 0 and 1</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    error&quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Alpha value of the error range&#39;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="ErrorAlpha.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorAlpha.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="BarWidths"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarWidths">[docs]</a><span class="k">class</span> <span class="nc">BarWidths</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the widths of the bars</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    &#39;equal&#39;</span>
<span class="sd">        Each bar will have the same width (the default)</span>
<span class="sd">    &#39;data&#39;</span>
<span class="sd">        Each bar will have the width as specified by the boundaries</span>
<span class="sd">    float</span>
<span class="sd">        The width for each bar</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    categorical</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Width of the bars&#39;</span>

<div class="viewcode-block" id="BarWidths.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarWidths.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># Does nothing, the work is done in the :class:`BarPlot` formatoption</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="CategoricalBars"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CategoricalBars">[docs]</a><span class="k">class</span> <span class="nc">CategoricalBars</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The location of each bar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        If None, use a categorical plotting if the widths are ``&#39;equal&#39;``,</span>
<span class="sd">        otherwise, not</span>
<span class="sd">    bool</span>
<span class="sd">        If True, use a categorical plotting</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    widths</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Categorical or non-categorical plotting&#39;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;widths&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="CategoricalBars.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CategoricalBars.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">widths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_categorical</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">widths</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="BarAlpha"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarAlpha">[docs]</a><span class="k">class</span> <span class="nc">BarAlpha</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the transparency (alpha)</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        A value between 0 (opaque) and 1 invisible&quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Transparency of the bars&#39;</span>

<div class="viewcode-block" id="BarAlpha.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarAlpha.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="BarPlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarPlot">[docs]</a><span class="k">class</span> <span class="nc">BarPlot</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose how to make the bar plot</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Don&#39;t make any plotting</span>
<span class="sd">    &#39;bar&#39;</span>
<span class="sd">        Create a usual bar plot with the bars side-by-side</span>
<span class="sd">    &#39;stacked&#39;</span>
<span class="sd">        Create stacked plot</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">plot_fmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;plotting&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="s1">&#39;alpha&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;widths&#39;</span><span class="p">,</span> <span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Bar plot type&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Formatoption</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="BarPlot.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarPlot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># the real plot making is done by make_plot</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="BarPlot.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarPlot.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">:</span>
            <span class="n">artist</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">plotted_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The data that is shown to the user&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">InteractiveList</span><span class="p">(</span>
            <span class="p">[</span><span class="n">arr</span> <span class="k">for</span> <span class="n">arr</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">,</span>
                                     <span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)))</span>
             <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>

<div class="viewcode-block" id="BarPlot.make_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarPlot.make_plot">[docs]</a>    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span>
            <span class="c1"># for a transposed plot, we use the barh plot method of the axes</span>
            <span class="n">pm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">barh</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">pm</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xys</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span>
                       <span class="n">align</span><span class="o">=</span><span class="s1">&#39;edge&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">arr</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">extended_colors</span><span class="p">)]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_date</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis_date</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis_date</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># make a stacked plot</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
                    <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xys</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">base</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                        <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">extended_colors</span><span class="p">,</span>
                            <span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)))):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">plot</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="p">:</span>
                        <span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">pm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                        <span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">pm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="n">base</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">pm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">base</span><span class="p">))</span>
                    <span class="n">base</span> <span class="o">+=</span> <span class="n">y</span></div>

<div class="viewcode-block" id="BarPlot.get_xys"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarPlot.get_xys">[docs]</a>    <span class="k">def</span> <span class="nf">get_xys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="o">.</span><span class="n">value</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_date</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot use &#39;data&#39;-based bar width for categorical plots!&quot;</span><span class="p">)</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>
            <span class="k">elif</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># pandas default value</span>
        <span class="k">elif</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">_infer_interval_breaks</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
            <span class="n">is_datelike</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">indexes</span><span class="p">[</span><span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">is_all_dates</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_datelike</span><span class="p">:</span>
                <span class="c1"># convert to datetime</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">to_datetime</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="c1"># calculate widths in days</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">to_timedelta</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="mf">86400.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_date</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">s</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">:</span>
                <span class="c1"># Use half of the smalles step</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">_infer_interval_breaks</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
                <span class="n">width</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">arr</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span></div></div>


<div class="viewcode-block" id="ViolinXTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinXTicks">[docs]</a><span class="k">class</span> <span class="nc">ViolinXTicks</span><span class="p">(</span><span class="n">XTicks</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">XTicks</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))))</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinXTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span></div>


<div class="viewcode-block" id="ViolinYTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinYTicks">[docs]</a><span class="k">class</span> <span class="nc">ViolinYTicks</span><span class="p">(</span><span class="n">YTicks</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">YTicks</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))))</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinYTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span></div>


<div class="viewcode-block" id="ViolinXTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinXTickLabels">[docs]</a><span class="k">class</span> <span class="nc">ViolinXTickLabels</span><span class="p">(</span><span class="n">XTickLabels</span><span class="p">,</span> <span class="n">TextBase</span><span class="p">):</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">XTickLabels</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="ViolinXTickLabels.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinXTickLabels.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinXTickLabels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span>
                    <span class="n">arr</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span> <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span>
                    <span class="n">arr</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span> <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">arr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)])</span></div></div>


<div class="viewcode-block" id="ViolinYTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinYTickLabels">[docs]</a><span class="k">class</span> <span class="nc">ViolinYTickLabels</span><span class="p">(</span><span class="n">YTickLabels</span><span class="p">,</span> <span class="n">TextBase</span><span class="p">):</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">XTickLabels</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="ViolinYTickLabels.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinYTickLabels.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinYTickLabels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span>
                    <span class="n">arr</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span> <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span>
                    <span class="n">arr</span><span class="p">,</span> <span class="n">replot</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span> <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">arr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)])</span></div></div>


<div class="viewcode-block" id="ViolinPlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinPlot">[docs]</a><span class="k">class</span> <span class="nc">ViolinPlot</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose how to make the violin plot</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None or False</span>
<span class="sd">        Don&#39;t make any plotting</span>
<span class="sd">    bool</span>
<span class="sd">        If True, visualize the violins</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">plot_fmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;plotting&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;transpose&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Violin plot type&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Formatoption</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="ViolinPlot.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinPlot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># the real plot making is done by make_plot</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="ViolinPlot.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinPlot.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">:</span>
            <span class="n">artist</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span></div>

<div class="viewcode-block" id="ViolinPlot.make_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinPlot.make_plot">[docs]</a>    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">seaborn</span> <span class="kn">import</span> <span class="n">violinplot</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
                <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
            <span class="n">old_artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">containers</span><span class="p">[:]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="p">[:]</span> \
                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">collections</span><span class="p">[:]</span>
            <span class="n">palette</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">extended_colors</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">violinplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span>
                       <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;h&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span>
                       <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">containers</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">collections</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">artist</span> <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span>
                <span class="k">if</span> <span class="n">artist</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">old_artists</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="LimitBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LimitBase">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;LimitBase&#39;</span><span class="p">)</span>
<span class="nd">@dedent</span>
<span class="k">class</span> <span class="nc">LimitBase</span><span class="p">(</span><span class="n">DataTicksCalculator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for x- and y-limits</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        To not change the current limits</span>
<span class="sd">    str or list [str, str] or [[str, float], [str, float]]</span>
<span class="sd">        Automatically determine the ticks corresponding to the data. The given</span>
<span class="sd">        string determines how the limits are calculated. The float determines</span>
<span class="sd">        the percentile to use</span>
<span class="sd">        A string can be one of the following:</span>

<span class="sd">        rounded</span>
<span class="sd">            Sets the minimum and maximum of the limits to the rounded data</span>
<span class="sd">            minimum or maximum. Limits are rounded to the next 0.5 value with</span>
<span class="sd">            to the difference between data max- and minimum. The minimum</span>
<span class="sd">            will always be lower or equal than the data minimum, the maximum</span>
<span class="sd">            will always be higher or equal than the data maximum.</span>
<span class="sd">        roundedsym</span>
<span class="sd">            Same as `rounded` above but the limits are chosen such that they</span>
<span class="sd">            are symmetric around zero</span>
<span class="sd">        minmax</span>
<span class="sd">            Uses the minimum and maximum</span>
<span class="sd">        sym</span>
<span class="sd">            Same as minmax but symmetric around zero</span>
<span class="sd">    tuple (xmin, xmax)</span>
<span class="sd">        `xmin` is the smaller value, `xmax` the larger. Any of those values can</span>
<span class="sd">        be None or one of the strings (or lists) above to use the corresponding</span>
<span class="sd">        value here</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;axes&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value2share</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span>

<div class="viewcode-block" id="LimitBase.set_limit"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LimitBase.set_limit">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">set_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The method to set the minimum and maximum limit</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        min_val: float</span>
<span class="sd">            The value for the lower limit</span>
<span class="sd">        max_val: float</span>
<span class="sd">            The value for the upper limit&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LimitBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;rounded&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">,</span>
            <span class="s1">&#39;roundedsym&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roundedsym_min_max</span><span class="p">,</span>
            <span class="s1">&#39;minmax&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_max</span><span class="p">,</span>
            <span class="s1">&#39;sym&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sym_min_max</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">exp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)))</span>
            <span class="n">larger</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">],</span> <span class="n">exp</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
            <span class="n">smaller</span> <span class="o">=</span> <span class="n">round_to_05</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">],</span> <span class="n">exp</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to calculate rounded limits!&quot;</span><span class="p">,</span>
                              <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">([</span><span class="n">larger</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">smaller</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="nb">max</span><span class="p">([</span><span class="n">larger</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">smaller</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span>

    <span class="k">def</span> <span class="nf">_roundedsym_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)))</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">vmax</span><span class="p">,</span> <span class="n">vmax</span>

    <span class="k">def</span> <span class="nf">_sym_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vmin</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vmax</span><span class="p">))</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">vmax</span><span class="p">,</span> <span class="n">vmax</span>

<div class="viewcode-block" id="LimitBase.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LimitBase.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">value_lists</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">slist</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">kw</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s1">&#39;percmin&#39;</span><span class="p">,</span> <span class="s1">&#39;percmax&#39;</span><span class="p">],</span> <span class="n">value_lists</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">kw</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_vmin_vmax</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vmin</span> <span class="o">==</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">vmax</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="n">vmin</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_funcs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">value_lists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">value_lists</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">minmax</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value_lists</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
                        <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">minmax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Setting </span><span class="si">%s</span><span class="s1"> with </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_limit</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Xlim"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlim">[docs]</a><span class="k">class</span> <span class="nc">Xlim</span><span class="p">(</span><span class="n">LimitBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the x-axis limits</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LimitBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    ylim</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">LimitBase</span><span class="o">.</span><span class="n">children</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ylim&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xticks&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="n">LimitBase</span><span class="o">.</span><span class="n">connections</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;sym_lims&#39;</span><span class="p">]</span>

    <span class="n">axisname</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;x-axis limits&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">select_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;plotted_data&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">))</span> <span class="ow">or</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">select_array</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">)):</span>
            <span class="n">summed</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[[</span><span class="nb">min</span><span class="p">(</span><span class="n">summed</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">_get_index_vals</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">arr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span>  <span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">arr</span>

<div class="viewcode-block" id="Xlim.set_limit"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlim.set_limit">[docs]</a>    <span class="k">def</span> <span class="nf">set_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis_inverted</span><span class="p">():</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>  <span class="c1"># np.datetime64</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">args</span><span class="p">))</span></div>

<div class="viewcode-block" id="Xlim.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlim.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Xlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">initialize_plot</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">swap_funcs</span><span class="p">[</span><span class="s1">&#39;limits&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_swap_limits</span></div>

    <span class="k">def</span> <span class="nf">_swap_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">_swap_limits</span><span class="p">()</span>
        <span class="n">old_xlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">no_validation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylim</span><span class="o">.</span><span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ylim</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_xlim</span></div>


<div class="viewcode-block" id="Ylim"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Ylim">[docs]</a><span class="k">class</span> <span class="nc">Ylim</span><span class="p">(</span><span class="n">LimitBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the y-axis limits</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LimitBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xlim</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">LimitBase</span><span class="o">.</span><span class="n">children</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;xlim&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;yticks&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="n">LimitBase</span><span class="o">.</span><span class="n">connections</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;sym_lims&#39;</span><span class="p">]</span>

    <span class="n">axisname</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;y-axis limits&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">select_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;plotted_data&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">))</span> <span class="ow">or</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">select_array</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">)):</span>
            <span class="n">summed</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[[</span><span class="nb">min</span><span class="p">(</span><span class="n">summed</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">_get_index_vals</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">arr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">arr</span>

<div class="viewcode-block" id="Ylim.set_limit"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Ylim.set_limit">[docs]</a>    <span class="k">def</span> <span class="nf">set_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis_inverted</span><span class="p">():</span>
            <span class="n">args</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>  <span class="c1"># np.datetime64</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">args</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="SymmetricLimits"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SymmetricLimits">[docs]</a><span class="k">class</span> <span class="nc">SymmetricLimits</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make x- and y-axis symmetric</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        No symmetric type</span>
<span class="sd">    &#39;min&#39;</span>
<span class="sd">        Use the minimum of x- and y-limits</span>
<span class="sd">    &#39;max&#39;</span>
<span class="sd">        Use the maximum of x- and y-limits</span>
<span class="sd">    [str, str]</span>
<span class="sd">        A combination, ``None``, ``&#39;min&#39;`` and ``&#39;max&#39;`` specific for minimum</span>
<span class="sd">        and maximum limit</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xlim&#39;</span><span class="p">,</span> <span class="s1">&#39;ylim&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Symmetric x- and y-axis limits&#39;</span>

<div class="viewcode-block" id="SymmetricLimits.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SymmetricLimits.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">xlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlim</span><span class="o">.</span><span class="n">range</span><span class="p">[:]</span>
        <span class="n">ylim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylim</span><span class="o">.</span><span class="n">range</span><span class="p">[:]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                <span class="n">xlim</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ylim</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                <span class="n">xlim</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ylim</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xlim</span><span class="o">.</span><span class="n">set_limit</span><span class="p">(</span><span class="o">*</span><span class="n">xlim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ylim</span><span class="o">.</span><span class="n">set_limit</span><span class="p">(</span><span class="o">*</span><span class="n">ylim</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ViolinXlim"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinXlim">[docs]</a><span class="k">class</span> <span class="nc">ViolinXlim</span><span class="p">(</span><span class="n">Xlim</span><span class="p">):</span>
    <span class="c1"># xlim class for ViolinPlotter</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Xlim</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">))</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinXlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>

    <span class="k">def</span> <span class="nf">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinXlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="BarXlim"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarXlim">[docs]</a><span class="k">class</span> <span class="nc">BarXlim</span><span class="p">(</span><span class="n">ViolinXlim</span><span class="p">):</span>
    <span class="c1"># xlim class for bar plotter</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Xlim</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">ViolinXlim</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">select_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="n">categorical</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;plotted_data&#39;</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">))</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">select_array</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
            <span class="n">summed</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[[</span><span class="nb">min</span><span class="p">(</span><span class="n">summed</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">categorical</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">])</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">categorical</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_infer_interval_breaks</span><span class="p">(</span><span class="n">Xlim</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BarXlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>

    <span class="k">def</span> <span class="nf">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Xlim</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BarXlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="Xlim2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Xlim2D">[docs]</a><span class="k">class</span> <span class="nc">Xlim2D</span><span class="p">(</span><span class="n">Xlim</span><span class="p">):</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Xlim</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xcoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;get_x&#39;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s1">&#39;get_y&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="p">,</span> <span class="n">func</span><span class="p">)(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">xcoord</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">bounds</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="n">xcoord</span><span class="p">)</span></div>


<div class="viewcode-block" id="Ylim2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Ylim2D">[docs]</a><span class="k">class</span> <span class="nc">Ylim2D</span><span class="p">(</span><span class="n">Ylim</span><span class="p">):</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Ylim</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ycoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;get_x&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s1">&#39;get_y&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="p">,</span> <span class="n">func</span><span class="p">)(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">bounds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">bounds</span> <span class="o">=</span> <span class="n">ycoord</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">bounds</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span></div>


<div class="viewcode-block" id="ViolinYlim"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinYlim">[docs]</a><span class="k">class</span> <span class="nc">ViolinYlim</span><span class="p">(</span><span class="n">Ylim</span><span class="p">):</span>
    <span class="c1"># Ylim class for ViolinPlotter</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Ylim</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">))</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinYlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>

    <span class="k">def</span> <span class="nf">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ViolinYlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="BarYlim"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarYlim">[docs]</a><span class="k">class</span> <span class="nc">BarYlim</span><span class="p">(</span><span class="n">ViolinYlim</span><span class="p">):</span>
    <span class="c1"># ylim class for bar plotter</span>
    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Ylim</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">ViolinYlim</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;categorical&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">select_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="n">categorical</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;plotted_data&#39;</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">))</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">InteractiveList</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">select_array</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
            <span class="n">summed</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[[</span><span class="nb">min</span><span class="p">(</span><span class="n">summed</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">categorical</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">])</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">categorical</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_infer_interval_breaks</span><span class="p">(</span><span class="n">Ylim</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">categorical</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Ylim</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BarYlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>

    <span class="k">def</span> <span class="nf">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span><span class="o">.</span><span class="n">is_categorical</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Ylim</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">BarYlim</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_round_min_max</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="XRotation"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XRotation">[docs]</a><span class="k">class</span> <span class="nc">XRotation</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotate the x-axis ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        The rotation angle in degrees</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    yrotation&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;ticks&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;yticklabels&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Rotate x-ticklabels&#39;</span>

<div class="viewcode-block" id="XRotation.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XRotation.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
            <span class="n">text</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="YRotation"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.YRotation">[docs]</a><span class="k">class</span> <span class="nc">YRotation</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotate the y-axis ticks</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        The rotation angle in degrees</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xrotation&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;ticks&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;yticklabels&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Rotate y-ticklabels&#39;</span>

<div class="viewcode-block" id="YRotation.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.YRotation.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
            <span class="n">text</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CMap"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CMap">[docs]</a><span class="k">class</span> <span class="nc">CMap</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the color map</span>

<span class="sd">    This formatoption specifies the color coding of the data via a</span>
<span class="sd">    :class:`matplotlib.colors.Colormap`</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        %(cmap_note)s</span>
<span class="sd">    matplotlib.colors.Colormap</span>
<span class="sd">        The colormap instance to use</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    bounds: specifies the boundaries of the colormap&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Colormap&#39;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bounds&#39;</span><span class="p">,</span> <span class="s1">&#39;cbar&#39;</span><span class="p">]</span>  <span class="c1"># necessary for get_fmt_widget</span>

<div class="viewcode-block" id="CMap.get_cmap"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CMap.get_cmap">[docs]</a>    <span class="k">def</span> <span class="nf">get_cmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the :class:`matplotlib.colors.Colormap` for plotting</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        arr: np.ndarray</span>
<span class="sd">            The array to plot</span>
<span class="sd">        cmap: str or matplotlib.colors.Colormap</span>
<span class="sd">            The colormap to use. If None, the :attr:`value` of this</span>
<span class="sd">            formatoption is used</span>
<span class="sd">        N: int</span>
<span class="sd">            The number of colors in the colormap. If None, the norm of the</span>
<span class="sd">            :attr:`bounds` formatoption is used and, if necessary, the</span>
<span class="sd">            given array `arr`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        matplotlib.colors.Colormap</span>
<span class="sd">            The colormap returned by :func:`psy_simple.colors.get_cmap`&quot;&quot;&quot;</span>
        <span class="n">N</span> <span class="o">=</span> <span class="n">N</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">N</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">Ncmap</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">arr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">ravel</span><span class="p">())))</span>
        <span class="k">if</span> <span class="n">N</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span></div>

<div class="viewcode-block" id="CMap.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CMap.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>  <span class="c1"># the colormap is set when plotting</span></div>

<div class="viewcode-block" id="CMap.get_fmt_widget"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CMap.get_fmt_widget">[docs]</a>    <span class="k">def</span> <span class="nf">get_fmt_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open a :class:`psy_simple.widget.CMapFmtWidget`&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">psy_simple.widgets.colors</span> <span class="kn">import</span> <span class="n">CMapFmtWidget</span>
        <span class="k">return</span> <span class="n">CMapFmtWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MissColor"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MissColor">[docs]</a><span class="k">class</span> <span class="nc">MissColor</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the color for missing values</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Use the default from the colormap</span>
<span class="sd">    string, tuple.</span>
<span class="sd">        Defines the color of the grid.&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">END</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Color of missing values&#39;</span>

    <span class="n">update_after_plot</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="MissColor.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MissColor.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">replot</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;contourf&#39;</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">] - The miss_color formatoption is not supported for &#39;</span>
                 <span class="s1">&#39;filled contour plots!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">mappable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mappable</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">()</span><span class="o">.</span><span class="n">set_bad</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mappable</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">()</span><span class="o">.</span><span class="n">set_bad</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">mappable</span><span class="o">.</span><span class="n">changed</span><span class="p">()</span></div>

<div class="viewcode-block" id="MissColor.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MissColor.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_miss_color_plot&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_miss_color_plot</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_miss_color_plot</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Bounds"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Bounds">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;Bounds&#39;</span><span class="p">,</span> <span class="n">sections</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Possible types&#39;</span><span class="p">,</span> <span class="s1">&#39;Examples&#39;</span><span class="p">,</span>
                                              <span class="s1">&#39;See Also&#39;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">Bounds</span><span class="p">(</span><span class="n">DataTicksCalculator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the boundaries of the colorbar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        make no normalization</span>
<span class="sd">    %(DataTicksCalculator.possible_types)s</span>
<span class="sd">    int</span>
<span class="sd">        Specifies how many ticks to use with the ``&#39;rounded&#39;`` option. I.e. if</span>
<span class="sd">        integer ``i``, then this is the same as ``[&#39;rounded&#39;, i]``.</span>
<span class="sd">    matplotlib.colors.Normalize</span>
<span class="sd">        A matplotlib normalization instance</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    - Plot 11 bounds over the whole data range::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds=&#39;rounded&#39;)</span>

<span class="sd">      which is equivalent to::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds={&#39;method&#39;: &#39;rounded&#39;})</span>

<span class="sd">    - Plot 7 ticks over the whole data range where the maximal and minimal</span>
<span class="sd">      tick matches the data maximum and minimum::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds=[&#39;minmax&#39;, 7])</span>

<span class="sd">      which is equivaluent to::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds={&#39;method&#39;: &#39;minmax&#39;, &#39;N&#39;: 7})</span>

<span class="sd">    - chop the first and last five percentiles::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds=[&#39;rounded&#39;, None, 5, 95])</span>

<span class="sd">      which is equivalent to::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds={&#39;method&#39;: &#39;rounded&#39;, &#39;percmin&#39;: 5,</span>
<span class="sd">          ...                        &#39;percmax&#39;: 95})</span>

<span class="sd">    - Plot 3 bounds per power of ten::</span>

<span class="sd">          &gt;&gt;&gt; plotter.update(bounds=[&#39;log&#39;, 3])</span>

<span class="sd">    - Plot continuous logarithmic bounds::</span>

<span class="sd">          &gt;&gt;&gt; from matplotlib.colors import LogNorm</span>
<span class="sd">          &gt;&gt;&gt; plotter.update(bounds=LogNorm())</span>


<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    cmap: Specifies the colormap&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Boundaries of the color map&#39;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="s1">&#39;cbar&#39;</span><span class="p">]</span>  <span class="c1"># necessary for get_fmt_widget</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value2share</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The normalization instance&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span>

<div class="viewcode-block" id="Bounds.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Bounds.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_funcs</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]](</span><span class="o">*</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">value</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="c1"># make sure we have a small difference between the values</span>
                <span class="n">value</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.5</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BoundaryNorm</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bounds.get_fmt_widget"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Bounds.get_fmt_widget">[docs]</a>    <span class="k">def</span> <span class="nf">get_fmt_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open a :class:`psy_simple.widget.CMapFmtWidget`&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">psy_simple.widgets.colors</span> <span class="kn">import</span> <span class="n">BoundsFmtWidget</span>
        <span class="k">return</span> <span class="n">BoundsFmtWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="format_coord_func"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.format_coord_func">[docs]</a><span class="k">def</span> <span class="nf">format_coord_func</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ref</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a function that can replace the</span>
<span class="sd">    :func:`matplotlib.axes.Axes.format_coord`</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax: matplotlib.axes.Axes</span>
<span class="sd">        The axes instance</span>
<span class="sd">    ref: weakref.weakref</span>
<span class="sd">        The reference to the :class:`~psyplot.plotter.Formatoption` instance</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    function</span>
<span class="sd">        The function that can be used to replace `ax.format_coord`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">orig_format_coord</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">format_coord</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">orig_s</span> <span class="o">=</span> <span class="n">orig_format_coord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">fmto</span> <span class="o">=</span> <span class="n">ref</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fmto</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">orig_s</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">orig_s</span> <span class="o">+=</span> <span class="n">fmto</span><span class="o">.</span><span class="n">add2format_coord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">fmto</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s1">&#39;Failed to get plot informations for status bar!&#39;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">orig_s</span>

    <span class="k">return</span> <span class="n">func</span></div>


<div class="viewcode-block" id="InterpolateBounds"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.InterpolateBounds">[docs]</a><span class="k">class</span> <span class="nc">InterpolateBounds</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Interpolate grid cell boundaries for 2D plots</span>

<span class="sd">    This formatoption can be used to tell enable and disable the interpolation</span>
<span class="sd">    of grid cell boundaries. Usually, netCDF files only contain the centered</span>
<span class="sd">    coordinates. In this case, we interpolate the boundaries between the</span>
<span class="sd">    grid cell centers.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Interpolate the boundaries, except for circumpolar grids</span>
<span class="sd">    bool</span>
<span class="sd">        If True (the default), the grid cell boundaries are inter- and</span>
<span class="sd">        extrapolated. Otherwise, if False, the coordinate centers are used and</span>
<span class="sd">        the default behaviour of matplotlib cuts of the most outer row and</span>
<span class="sd">        column of the 2D-data. Note that this results in a slight shift of the</span>
<span class="sd">        data</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

<div class="viewcode-block" id="InterpolateBounds.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.InterpolateBounds.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Plot2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;Plot2D&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Plot2D</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose how to visualize a 2-dimensional scalar data field</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Don&#39;t make any plotting</span>
<span class="sd">    &#39;mesh&#39;</span>
<span class="sd">        Use the :func:`matplotlib.pyplot.pcolormesh` function to make the plot</span>
<span class="sd">        or the :func:`matplotlib.pyplot.tripcolor` for an unstructered grid</span>
<span class="sd">    &#39;poly&#39;</span>
<span class="sd">        Draw each polygon indivually. This method is used by default for</span>
<span class="sd">        unstructured grids. If there are no grid cell boundaries in the</span>
<span class="sd">        dataset, we will interpolate them</span>
<span class="sd">    &#39;contourf&#39;</span>
<span class="sd">        Make a filled contour plot using the :func:`matplotlib.pyplot.contourf`</span>
<span class="sd">        function. The levels for the contour plot are controlled by the</span>
<span class="sd">        :attr:`levels` formatoption</span>
<span class="sd">    &#39;contour&#39;</span>
<span class="sd">        Same a ``&#39;contourf&#39;``, but does not make a filled contour plot, only</span>
<span class="sd">        lines.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">plot_fmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;plotting&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;2D plot type&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="s1">&#39;bounds&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;levels&#39;</span><span class="p">,</span> <span class="s1">&#39;interp_bounds&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The (masked) data array that is plotted&quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_array</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">notnull_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The data array that is plotted&quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xbounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Boundaries of the x-coordinate&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ybounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Boundaries of the y-coordinate&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xcoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The x coordinate :class:`xarray.Variable`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ycoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The y coordinate :class:`xarray.Variable`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mappable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the mappable that can be used for colorbars&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The function that can replace the axes.format_coord method&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">format_coord_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Formatoption</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;mesh&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pcolormesh</span><span class="p">,</span>
            <span class="s1">&#39;contourf&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contourf</span><span class="p">,</span>
            <span class="s1">&#39;contour&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contourf</span><span class="p">,</span>
            <span class="s1">&#39;poly&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polycolor</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orig_format_coord</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="Plot2D.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># the real plot making is done by make_plot</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Plot2D.make_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.make_plot">[docs]</a>    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># remove the plot if it shall be replotted or any of the dependencies</span>
        <span class="c1"># changed</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">replot</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependencies</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">])):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;tri&#39;</span><span class="p">:</span>
                <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;The &#39;tri&#39; value is depreceated and will be removed &quot;</span>
                     <span class="s2">&quot;in the future. Use &#39;poly&#39; instead!&quot;</span><span class="p">,</span>
                     <span class="ne">DeprecationWarning</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_funcs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">]()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_format_coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_orig_format_coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">format_coord</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">format_coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_coord</span></div>

    <span class="k">def</span> <span class="nf">_pcolormesh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polycolor</span><span class="p">()</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">))</span>
            <span class="c1"># for cartopy, we have to consider the wrapped collection if the</span>
            <span class="c1"># data has to be transformed</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">coll</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">_wrapped_collection_fix</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">coll</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_pcolormesh</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">rasterized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_xy_pcolormesh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">interp_bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interp_bounds</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">interp_bounds</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_circumpolar</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">):</span>
            <span class="n">interp_bounds</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">interp_bounds</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xbounds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ybounds</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span><span class="o">.</span><span class="n">values</span>

    <span class="k">def</span> <span class="nf">_contourf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="o">.</span><span class="n">key</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="n">filled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="s1">&#39;contour&#39;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">set_norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">boundaries</span>
            <span class="n">xcoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span><span class="p">)</span>
            <span class="n">ycoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">):</span>
                <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tricontourf</span> <span class="k">if</span> <span class="n">filled</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tricontour</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">contourf</span> <span class="k">if</span> <span class="n">filled</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">contour</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">values</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">values</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="n">pm</span><span class="p">(</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">levels</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cell_nodes_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unstructured x-boundaries with shape (N, m) where m &gt; 2&quot;&quot;&quot;</span>
        <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span>
        <span class="n">xcoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">xbounds</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">xbounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="n">xbounds</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xbounds</span><span class="o">.</span><span class="n">values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cell_nodes_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unstructured y-boundaries with shape (N, m) where m &gt; 2&quot;&quot;&quot;</span>
        <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span>
        <span class="n">ycoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">ybounds</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
        <span class="n">ybounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="n">ybounds</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ybounds</span><span class="o">.</span><span class="n">values</span>

    <span class="k">def</span> <span class="nf">_polycolor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">matplotlib.collections</span> <span class="kn">import</span> <span class="n">PolyCollection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Retrieving bounds&#39;</span><span class="p">)</span>
        <span class="n">xbounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_nodes_x</span>
        <span class="n">ybounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_nodes_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Retrieving data&#39;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Updating plot&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Making plot with </span><span class="si">%i</span><span class="s1"> cells&#39;</span><span class="p">,</span> <span class="n">arr</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xbounds</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">xbounds</span> <span class="o">=</span> <span class="n">xbounds</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">xbounds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">ybounds</span> <span class="o">=</span> <span class="n">ybounds</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ybounds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="n">PolyCollection</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">([</span><span class="n">xbounds</span><span class="p">,</span> <span class="n">ybounds</span><span class="p">]),</span> <span class="n">array</span><span class="o">=</span><span class="n">arr</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span>
                <span class="n">norm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span><span class="p">,</span> <span class="n">rasterized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
                <span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">antialiaseds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Adding collection to axes&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_collection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">,</span> <span class="n">autolim</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Done.&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Plot2D.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>  <span class="c1"># contour plot</span>
                <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">collections</span><span class="p">[:]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">artist</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span></div>

<div class="viewcode-block" id="Plot2D.add2format_coord"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.add2format_coord">[docs]</a>    <span class="k">def</span> <span class="nf">add2format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Additional information for the :meth:`format_coord`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">xcoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span>
        <span class="n">ycoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_tri</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_1d</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_2d</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="n">xunit</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">xunit</span><span class="p">:</span>
            <span class="n">xunit</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">xunit</span>
        <span class="n">yunit</span> <span class="o">=</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">yunit</span><span class="p">:</span>
            <span class="n">yunit</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">yunit</span>
        <span class="n">zunit</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">zunit</span><span class="p">:</span>
            <span class="n">zunit</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">zunit</span>
        <span class="k">return</span> <span class="s1">&#39;, data: </span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">xcoord</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xunit</span><span class="p">,</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yunit</span><span class="p">,</span>
            <span class="n">data</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">zunit</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plot2D.get_xyz_tri"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.get_xyz_tri">[docs]</a>    <span class="k">def</span> <span class="nf">get_xyz_tri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get closest x, y and z for the given `x` and `y` in `data` for</span>
<span class="sd">        1d coords&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_2d</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="Plot2D.get_xyz_1d"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.get_xyz_1d">[docs]</a>    <span class="k">def</span> <span class="nf">get_xyz_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get closest x, y and z for the given `x` and `y` in `data` for</span>
<span class="sd">        1d coords&quot;&quot;&quot;</span>
        <span class="n">x_idx</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">indexes</span><span class="p">[</span><span class="n">xcoord</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">y_idx</span> <span class="o">=</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">indexes</span><span class="p">[</span><span class="n">ycoord</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">xclose</span> <span class="o">=</span> <span class="n">x_idx</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
        <span class="n">yclose</span> <span class="o">=</span> <span class="n">y_idx</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
        <span class="n">dx_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x_idx</span><span class="o">.</span><span class="n">sort_values</span><span class="p">())</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">dy_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">y_idx</span><span class="o">.</span><span class="n">sort_values</span><span class="p">())</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

        <span class="n">x_data</span> <span class="o">=</span> <span class="n">xcoord</span><span class="p">[</span><span class="n">xclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">y_data</span> <span class="o">=</span> <span class="n">ycoord</span><span class="p">[</span><span class="n">yclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x_data</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dx_max</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_data</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dy_max</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">yclose</span><span class="p">,</span> <span class="n">xclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">val</span></div>

<div class="viewcode-block" id="Plot2D.get_xyz_2d"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Plot2D.get_xyz_2d">[docs]</a>    <span class="k">def</span> <span class="nf">get_xyz_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get closest x, y and z for the given `x` and `y` in `data` for</span>
<span class="sd">        2d coords&quot;&quot;&quot;</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">xy</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">imin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanargmin</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>
        <span class="n">xy_min</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[</span><span class="n">imin</span><span class="p">]</span>

        <span class="n">xb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="p">{</span><span class="n">xcoord</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">ycoord</span><span class="p">},</span>
            <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">yb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="p">{</span><span class="n">xcoord</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">ycoord</span><span class="p">},</span>
            <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>

        <span class="n">dx_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xb</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">dy_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">yb</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

        <span class="n">x_data</span> <span class="o">=</span> <span class="n">xy_min</span><span class="o">.</span><span class="n">real</span>
        <span class="n">y_data</span> <span class="o">=</span> <span class="n">xy_min</span><span class="o">.</span><span class="n">imag</span>

        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x_data</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dx_max</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_data</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dy_max</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()[</span><span class="n">imin</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">,</span> <span class="n">val</span></div></div>


<span class="n">docstrings</span><span class="o">.</span><span class="n">delete_types</span><span class="p">(</span><span class="s1">&#39;Bounds.possible_types&#39;</span><span class="p">,</span> <span class="s1">&#39;no_norm|None&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib.colors.Normalize&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="ContourLevels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ContourLevels">[docs]</a><span class="k">class</span> <span class="nc">ContourLevels</span><span class="p">(</span><span class="n">Bounds</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The levels for the contour plot</span>

<span class="sd">    This formatoption sets the levels for the filled contour plot and only has</span>
<span class="sd">    an effect if the :attr:`plot` Formatoption is set to ``&#39;contourf&#39;``</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Use the settings from the :attr:`bounds` formatoption and if this</span>
<span class="sd">        does not specify boundaries, use 11</span>
<span class="sd">    %(Bounds.possible_types.no_norm|None)s</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cbounds&#39;</span><span class="p">]</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Levels for the filled contour plot&#39;</span>

<div class="viewcode-block" id="ContourLevels.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ContourLevels.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbounds</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">boundaries</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rounded&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ContourLevels</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MaskDataGrid"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MaskDataGrid">[docs]</a><span class="k">class</span> <span class="nc">MaskDataGrid</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mask the datagrid where the array is NaN</span>

<span class="sd">    This boolean formatoption enables to mask the grid of the :attr:`datagrid`</span>
<span class="sd">    formatoption where the data is NaN</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    bool</span>
<span class="sd">        Either True, to not display the data grid for cells with NaN, or False</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    datagrid&quot;&quot;&quot;</span>

<div class="viewcode-block" id="MaskDataGrid.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MaskDataGrid.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dummy, since this fmt is considered in the :class:`DataGrid ` fmt&quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>



<div class="viewcode-block" id="DataGrid"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataGrid">[docs]</a><span class="k">class</span> <span class="nc">DataGrid</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show the grid of the data</span>

<span class="sd">    This formatoption shows the grid of the data (without labels)</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Don&#39;t show the data grid</span>
<span class="sd">    str</span>
<span class="sd">        A linestyle in the form ``&#39;k-&#39;``, where ``&#39;k&#39;`` is the color and</span>
<span class="sd">        ``&#39;-&#39;`` the linestyle.</span>
<span class="sd">    dict</span>
<span class="sd">        any keyword arguments that are passed to the plotting function (</span>
<span class="sd">        :func:`matplotlib.pyplot.triplot` for unstructured grids and</span>
<span class="sd">        :func:`matplotlib.pyplot.hlines` for rectilinear grids)</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    mask_datagrid: To display cells with NaN&quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mask_datagrid&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Grid of the data&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xcoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The x coordinate :class:`xarray.Variable`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ycoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The y coordinate :class:`xarray.Variable`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xbounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Boundaries of the x-coordinate&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ybounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Boundaries of the y-coordinate&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cell_nodes_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unstructured x-boundaries with shape (N, m) where m &gt; 2&quot;&quot;&quot;</span>
        <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span>
        <span class="n">xcoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">xbounds</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
            <span class="n">nans</span><span class="o">=</span><span class="s1">&#39;skip&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_datagrid</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">xbounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="n">xbounds</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xbounds</span><span class="o">.</span><span class="n">values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cell_nodes_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unstructured y-boundaries with shape (N, m) where m &gt; 2&quot;&quot;&quot;</span>
        <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span>
        <span class="n">ycoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">ybounds</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">get_cell_node_coord</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
            <span class="n">nans</span><span class="o">=</span><span class="s1">&#39;skip&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_datagrid</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">ybounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_coordinate</span><span class="p">(</span><span class="n">ybounds</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">ybounds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ybounds</span><span class="o">.</span><span class="n">values</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(Formatoption.parameters)s&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DataGrid</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="DataGrid.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataGrid.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_nodes_x</span>
            <span class="n">yb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_nodes_y</span>
            <span class="k">if</span> <span class="n">xb</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">xb</span> <span class="o">=</span> <span class="n">xb</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">xb</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">yb</span> <span class="o">=</span> <span class="n">yb</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">yb</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">xb</span><span class="p">)</span>
            <span class="n">xb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">xb</span><span class="p">,</span> <span class="n">xb</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]]</span> <span class="o">*</span> <span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">yb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">yb</span><span class="p">,</span> <span class="n">yb</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]]</span> <span class="o">*</span> <span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xb</span><span class="p">,</span> <span class="n">yb</span><span class="p">,</span> <span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xb</span><span class="p">,</span> <span class="n">yb</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataGrid.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataGrid.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_artists&#39;</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artists</span><span class="p">:</span>
            <span class="n">artist</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artists</span></div></div>


<div class="viewcode-block" id="VectorDataGrid"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorDataGrid">[docs]</a><span class="k">class</span> <span class="nc">VectorDataGrid</span><span class="p">(</span><span class="n">DataGrid</span><span class="p">):</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="SimplePlot2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SimplePlot2D">[docs]</a><span class="k">class</span> <span class="nc">SimplePlot2D</span><span class="p">(</span><span class="n">Plot2D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the plotting method</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Don&#39;t make any plotting</span>
<span class="sd">    &#39;mesh&#39;</span>
<span class="sd">        Use the :func:`matplotlib.pyplot.pcolormesh` function to make the plot</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">Plot2D</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">T</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xbounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ybounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_plotbounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xcoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">ycoord</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">xcoord</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ycoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">xcoord</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">ycoord</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cell_nodes_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">cell_nodes_y</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">cell_nodes_x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cell_nodes_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">cell_nodes_x</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">SimplePlot2D</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">cell_nodes_y</span></div>


<div class="viewcode-block" id="XTicks2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XTicks2D">[docs]</a><span class="k">class</span> <span class="nc">XTicks2D</span><span class="p">(</span><span class="n">XTicks</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">XTicks</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">plot_data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">plot_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">plot_data</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">da</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="n">da</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s1">&#39;Failed to concatenate the data, returning first object!&#39;</span><span class="p">,</span>
                <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="YTicks2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.YTicks2D">[docs]</a><span class="k">class</span> <span class="nc">YTicks2D</span><span class="p">(</span><span class="n">YTicks</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">YTicks</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">plot_data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">YTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">plot_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">plot_data</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">da</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">da</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="p">:</span>
                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="n">da</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s1">&#39;Failed to concatenate the data, returning first object!&#39;</span><span class="p">,</span>
                <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="Extend"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Extend">[docs]</a><span class="k">class</span> <span class="nc">Extend</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draw arrows at the side of the colorbar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str {&#39;neither&#39;, &#39;both&#39;, &#39;min&#39; or &#39;max&#39;}</span>
<span class="sd">        If not &#39;neither&#39;, make pointed end(s) for out-of-range values</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Ends of the colorbar&#39;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="Extend.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Extend.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># nothing to do here because the extend is set by the Cbar formatoption</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;contourf&#39;</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">!=</span> <span class="s1">&#39;neither&#39;</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">] - Extend keyword is not implemented for contour &#39;</span>
                 <span class="s1">&#39;plots&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">extend</span> <span class="o">=</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="CbarSpacing"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CbarSpacing">[docs]</a><span class="k">class</span> <span class="nc">CbarSpacing</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the spacing of the bounds in the colorbar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str {&#39;uniform&#39;, &#39;proportional&#39;}</span>
<span class="sd">        if ``&#39;uniform&#39;``, every color has exactly the same width in the</span>
<span class="sd">        colorbar, if ``&#39;proportional&#39;``, the size is chosen according to the</span>
<span class="sd">        data&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cbar&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Spacing of the colorbar&#39;</span>

<div class="viewcode-block" id="CbarSpacing.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CbarSpacing.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;spacing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="Cbar"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;Cbar&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Cbar</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the position of the colorbars</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    bool</span>
<span class="sd">        True: defaults to &#39;b&#39;</span>
<span class="sd">        False: Don&#39;t draw any colorbar</span>
<span class="sd">    str</span>
<span class="sd">        The string can be a combination of one of the following strings:</span>
<span class="sd">        {&#39;fr&#39;, &#39;fb&#39;, &#39;fl&#39;, &#39;ft&#39;, &#39;b&#39;, &#39;r&#39;, &#39;sv&#39;, &#39;sh&#39;}</span>

<span class="sd">        - &#39;b&#39;, &#39;r&#39; stand for bottom and right of the axes</span>
<span class="sd">        - &#39;fr&#39;, &#39;fb&#39;, &#39;fl&#39;, &#39;ft&#39; stand for bottom, right, left and top of the</span>
<span class="sd">          figure</span>
<span class="sd">        - &#39;sv&#39; and &#39;sh&#39; stand for a vertical or horizontal colorbar in a</span>
<span class="sd">          separate figure</span>
<span class="sd">    list</span>
<span class="sd">        A containing one of the above positions</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Draw a colorbar at the bottom and left of the axes::</span>

<span class="sd">    &gt;&gt;&gt; plotter.update(cbar=&#39;bl&#39;)&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="s1">&#39;bounds&#39;</span><span class="p">,</span> <span class="s1">&#39;extend&#39;</span><span class="p">,</span> <span class="s1">&#39;cbarspacing&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;levels&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Position of the colorbar&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">END</span> <span class="o">+</span> <span class="mf">0.1</span>

    <span class="n">figure_positions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fr&#39;</span><span class="p">,</span> <span class="s1">&#39;fb&#39;</span><span class="p">,</span> <span class="s1">&#39;fl&#39;</span><span class="p">,</span> <span class="s1">&#39;ft&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">}</span>

    <span class="n">original_position</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">init_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="nb">super</span><span class="p">(</span><span class="n">Cbar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">init_kwargs</span><span class="p">),</span>
                          <span class="p">[(</span><span class="s1">&#39;other_cbars&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_cbars</span><span class="p">)]))</span>

    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(Formatoption.parameters)s</span>
<span class="sd">        other_cbars: list of str</span>
<span class="sd">            List of other colorbar formatoption keys (necessary for a</span>
<span class="sd">            sufficient resizing of the axes)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">other_cbars</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;other_cbars&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Cbar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_just_drawn</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<div class="viewcode-block" id="Cbar.initialize_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.initialize_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_original_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Cbar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">initialize_plot</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_set_original_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets and sets the original position of the axes without colorbar&quot;&quot;&quot;</span>
        <span class="c1"># this is somewhat a hack to make sure that we get the right position</span>
        <span class="c1"># although the figure has not been drawn so far</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_cbars</span><span class="p">:</span>
            <span class="n">fmto</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fmto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fmto</span><span class="o">.</span><span class="n">original_position</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">original_position</span> <span class="o">=</span> <span class="n">fmto</span><span class="o">.</span><span class="n">original_position</span>
                <span class="k">return</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span>
        <span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">_adjustable</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="s1">&#39;box-forced&#39;</span><span class="p">]:</span>
            <span class="n">figW</span><span class="p">,</span> <span class="n">figH</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_size_inches</span><span class="p">()</span>
            <span class="n">fig_aspect</span> <span class="o">=</span> <span class="n">figH</span> <span class="o">/</span> <span class="n">figW</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_position</span> <span class="o">=</span> <span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">original_position</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value2share</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Those colorbar positions that are directly at the axes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">intersection</span><span class="p">([</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">])</span>

<div class="viewcode-block" id="Cbar.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the colorbar</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value</span>
<span class="sd">            The value to update (see possible types)</span>
<span class="sd">        no_fig_cbars</span>
<span class="sd">            Does not update the colorbars that are not in the axes of this</span>
<span class="sd">            plot&quot;&quot;&quot;</span>
        <span class="n">plotter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span>
        <span class="k">if</span> <span class="n">plotter</span><span class="o">.</span><span class="n">replot</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span>
                <span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependencies</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_child_mapping</span><span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_mapping</span><span class="p">[</span>
                            <span class="s1">&#39;bounds&#39;</span><span class="p">]]):</span>
            <span class="n">cbars2delete</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">changed_bounds</span> <span class="o">=</span> <span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">changed_bounds</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">changed_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span>
                                   <span class="nb">type</span><span class="p">(</span><span class="n">changed_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])):</span>
                <span class="n">cbars2delete</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cbars2delete</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cbars2delete</span><span class="p">:</span>
            <span class="c1"># if the colorbars are in the figure of the axes, we have to first</span>
            <span class="c1"># remove all the colorbars and then redraw it in order to make</span>
            <span class="c1"># sure that the axes gets the right position</span>
            <span class="k">if</span> <span class="n">cbars2delete</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure_positions</span><span class="p">:</span>
                <span class="n">cbars2delete</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_positions</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">positions</span><span class="o">=</span><span class="n">cbars2delete</span><span class="p">)</span>
                <span class="c1"># remove other cbars</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_cbars</span><span class="p">:</span>
                    <span class="n">fmto</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">plotter</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                    <span class="n">fmto</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure_positions</span><span class="p">)</span>
                <span class="c1"># redraw other cbars</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_cbars</span><span class="p">:</span>
                    <span class="n">fmto</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">plotter</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                    <span class="n">fmto</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fmto</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">positions</span><span class="o">=</span><span class="n">cbars2delete</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_colorbar</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_colorbar</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">plotter</span><span class="o">.</span><span class="n">_figs2draw</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">cbar</span><span class="p">:</span> <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">(),</span>
                                      <span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Cbar.update_colorbar"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.update_colorbar">[docs]</a>    <span class="k">def</span> <span class="nf">update_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
        <span class="n">mappable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span>
        <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&lt;</span> <span class="s1">&#39;3.1&#39;</span><span class="p">:</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">set_norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span><span class="o">.</span><span class="n">norm</span><span class="p">)</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span><span class="o">.</span><span class="n">cmap</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># change the colorbar and reconnect signals</span>
            <span class="n">old</span> <span class="o">=</span> <span class="n">cbar</span><span class="o">.</span><span class="n">mappable</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">update_normal</span><span class="p">(</span><span class="n">mappable</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mappable</span><span class="p">,</span> <span class="s1">&#39;colorbar_cid&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="s1">&#39;colorbar_cid&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="n">old</span><span class="o">.</span><span class="n">callbacksSM</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">old</span><span class="o">.</span><span class="n">colorbar_cid</span><span class="p">)</span>
                    <span class="n">old</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">old</span><span class="o">.</span><span class="n">colorbar_cid</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&lt;</span> <span class="s2">&quot;3.3&quot;</span><span class="p">:</span>
                    <span class="n">cid</span> <span class="o">=</span> <span class="n">mappable</span><span class="o">.</span><span class="n">callbacksSM</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                        <span class="s1">&#39;changed&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">.</span><span class="n">on_mappable_changed</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cid</span> <span class="o">=</span> <span class="n">mappable</span><span class="o">.</span><span class="n">callbacksSM</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                        <span class="s1">&#39;changed&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">.</span><span class="n">update_normal</span>
                    <span class="p">)</span>
                <span class="n">mappable</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="n">cbar</span>
                <span class="n">mappable</span><span class="o">.</span><span class="n">colorbar_cid</span> <span class="o">=</span> <span class="n">cid</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">update_normal</span><span class="p">(</span><span class="n">cbar</span><span class="o">.</span><span class="n">mappable</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">draw_all</span><span class="p">()</span></div>

<div class="viewcode-block" id="Cbar.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="k">def</span> <span class="nf">try2remove</span><span class="p">(</span><span class="n">cbar</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cbar</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="c1"># the colorbar has been removed already from some other</span>
                <span class="c1"># Cbar instance</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">positions</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">positions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">positions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">positions</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">adjustment</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">to_adjust</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fr&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;ft&#39;</span><span class="p">:</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;fb&#39;</span><span class="p">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">:</span>
            <span class="n">cbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">,</span> <span class="s1">&#39;sv&#39;</span><span class="p">]:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># set the axes for the mappable if this has been removed</span>
                <span class="n">mappable</span> <span class="o">=</span> <span class="n">cbar</span><span class="o">.</span><span class="n">mappable</span>
                <span class="n">delaxes</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">mappable</span><span class="p">,</span> <span class="s1">&#39;axes&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mappable</span><span class="p">,</span> <span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">mappable</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">ax</span>
                    <span class="n">try2remove</span><span class="p">(</span><span class="n">cbar</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">delaxes</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">mappable</span><span class="o">.</span><span class="n">axes</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mappable</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">try2remove</span><span class="p">(</span><span class="n">cbar</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">to_adjust</span><span class="p">:</span>
                    <span class="n">adjustment</span><span class="p">[</span><span class="n">to_adjust</span><span class="p">[</span><span class="n">pos</span><span class="p">]]</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span>
                        <span class="s1">&#39;figure.subplot.&#39;</span> <span class="o">+</span> <span class="n">to_adjust</span><span class="p">[</span><span class="n">pos</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">adjustment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="o">**</span><span class="n">adjustment</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure_positions</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">positions</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_position</span><span class="p">)</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="Cbar.draw_colorbar"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.draw_colorbar">[docs]</a>    <span class="k">def</span> <span class="nf">draw_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
        <span class="c1"># TODO: Manage to draw colorbars left and top (gridspec does not work)</span>
        <span class="n">orientations</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># &#39;b&#39;: &#39;bottom&#39;, &#39;r&#39;: &#39;right&#39;, &#39;l&#39;: &#39;left&#39;, &#39;t&#39;: &#39;top&#39;,</span>
            <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
            <span class="s1">&#39;fr&#39;</span><span class="p">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="s1">&#39;sv&#39;</span><span class="p">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ft&#39;</span><span class="p">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;fb&#39;</span><span class="p">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;sh&#39;</span><span class="p">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">}</span>

        <span class="n">orientation</span> <span class="o">=</span> <span class="n">orientations</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">]:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
            <span class="c1"># kwargs = {&#39;ax&#39;: self.ax, &#39;location&#39;: orientation}</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;ax&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="s1">&#39;orientation&#39;</span><span class="p">:</span> <span class="n">orientation</span><span class="p">})</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;sh&#39;</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;cax&#39;</span><span class="p">:</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">_figs2draw</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>  <span class="c1"># add figure for drawing</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;sv&#39;</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;cax&#39;</span><span class="p">:</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">])})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">_figs2draw</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>  <span class="c1"># add figure for drawing</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;fb&#39;</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span>
                    <span class="p">[</span><span class="mf">0.125</span><span class="p">,</span> <span class="mf">0.135</span><span class="p">,</span> <span class="mf">0.775</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">],</span>
                    <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span> <span class="o">+</span> <span class="s1">&#39;_fb&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;fr&#39;</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span>
                    <span class="p">[</span><span class="mf">0.825</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.035</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span>
                    <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span> <span class="o">+</span> <span class="s1">&#39;_fr&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;fl&#39;</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.225</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span>
                    <span class="p">[</span><span class="mf">0.075</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.035</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span>
                    <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span> <span class="o">+</span> <span class="s1">&#39;_fl&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;ft&#39;</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;cax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span>
                    <span class="p">[</span><span class="mf">0.125</span><span class="p">,</span> <span class="mf">0.825</span><span class="p">,</span> <span class="mf">0.775</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">],</span>
                    <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span> <span class="o">+</span> <span class="s1">&#39;_ft&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]))</span> <span class="o">&lt;=</span> <span class="mf">3.2</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;extend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extend</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="s1">&#39;location&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;orientation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">orientation</span>
        <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;3.5.0&quot;</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">matplotlib.contour</span> <span class="kn">import</span> <span class="n">ContourSet</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;orientation&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;horizontal&quot;</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span><span class="p">,</span> <span class="n">ContourSet</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">warn</span><span class="p">(</span>
                    <span class="s2">&quot;Horizontal colorbars are not possible for contour plots &quot;</span>
                    <span class="s2">&quot;with matplotlib 3.5.0, see &quot;</span>
                    <span class="s2">&quot;https://github.com/matplotlib/matplotlib/issues/21683&quot;</span>
                <span class="p">)</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;orientation&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">cbar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">mappable</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_just_drawn</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cbar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_label_pos</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>

<div class="viewcode-block" id="Cbar.set_label_pos"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.set_label_pos">[docs]</a>    <span class="k">def</span> <span class="nf">set_label_pos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="o">.</span><span class="n">ax</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;fl&#39;</span><span class="p">:</span>
            <span class="c1"># draw tick labels left</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelleft</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labelright</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;ft&#39;</span><span class="p">:</span>
            <span class="c1"># draw ticklabels at the top</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span>
            <span class="c1"># draw ticklabels on the right</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labelright</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_right</span><span class="p">()</span></div>

<div class="viewcode-block" id="Cbar.finish_update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Cbar.finish_update">[docs]</a>    <span class="k">def</span> <span class="nf">finish_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Set the label position again in case this has been changed</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">cbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbars</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_label_pos</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_just_drawn</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="CLabel"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CLabel">[docs]</a><span class="k">class</span> <span class="nc">CLabel</span><span class="p">(</span><span class="n">TextBase</span><span class="p">,</span> <span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show the colorbar label</span>

<span class="sd">    Set the label of the colorbar.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        The title for the :meth:`~matplotlib.colorbar.Colorbar.set_label`</span>
<span class="sd">        method.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    clabelsize, clabelweight, clabelprops&quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cbar&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Colorbar label&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;labels&#39;</span>

    <span class="n">axis_locations</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span>  <span class="c1"># axes locations</span>
            <span class="s1">&#39;fr&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;sv&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span>         <span class="c1"># vertical figure cbars</span>
            <span class="s1">&#39;ft&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;fb&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;sh&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">}</span>         <span class="c1"># horizontal figure cbars</span>

<div class="viewcode-block" id="CLabel.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CLabel.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">cbar</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">cbars</span><span class="p">):</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span><span class="n">arr</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span>
                <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_locations</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;axis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_label</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="VCLabel"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VCLabel">[docs]</a><span class="k">class</span> <span class="nc">VCLabel</span><span class="p">(</span><span class="n">CLabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show the colorbar label of the vector plot</span>

<span class="sd">    Set the label of the colorbar.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        The title for the :meth:`~matplotlib.colorbar.Colorbar.set_label`</span>
<span class="sd">        method.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    vclabelsize, vclabelweight, vclabelprops&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="CbarOptions"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CbarOptions">[docs]</a><span class="k">class</span> <span class="nc">CbarOptions</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for colorbar formatoptions&quot;&quot;&quot;</span>

    <span class="n">which</span> <span class="o">=</span> <span class="s1">&#39;major&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cbar&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">cbars</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;No colorbar set&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="n">cbar</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span>

    <span class="nd">@colorbar</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cbar</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="o">=</span> <span class="n">cbar</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;axis of the colorbar with the ticks. Will be overwritten during</span>
<span class="sd">        update process.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_locations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;axis&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axisname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_locations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">data</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>

    <span class="n">axis_locations</span> <span class="o">=</span> <span class="n">CLabel</span><span class="o">.</span><span class="n">axis_locations</span>

<div class="viewcode-block" id="CbarOptions.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CbarOptions.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">cbar</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">cbars</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="n">cbar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTicks">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;CTicks&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CTicks</span><span class="p">(</span><span class="n">CbarOptions</span><span class="p">,</span> <span class="n">TicksBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the tick locations of the colorbar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        use the default ticks</span>
<span class="sd">    %(DataTicksCalculator.possible_types)s</span>
<span class="sd">            bounds</span>
<span class="sd">                let the :attr:`bounds` keyword determine the ticks. An</span>
<span class="sd">                additional integer `i` may be specified to only use every i-th</span>
<span class="sd">                bound as a tick (see also `int` below)</span>
<span class="sd">            midbounds</span>
<span class="sd">                Same as `bounds` but in the middle between two bounds</span>
<span class="sd">    int</span>
<span class="sd">        Specifies how many ticks to use with the ``&#39;bounds&#39;`` option. I.e. if</span>
<span class="sd">        integer ``i``, then this is the same as ``[&#39;bounds&#39;, i]``.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    cticklabels</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">CbarOptions</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;bounds&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="n">CbarOptions</span><span class="o">.</span><span class="n">connections</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Colorbar ticks&#39;</span>

    <span class="n">_default_locator</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default locator of the axis of the colorbars&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_locator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_default_locators</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_locator</span>

    <span class="nd">@default_locator</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">default_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_locator</span> <span class="o">=</span> <span class="n">locator</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calc_funcs</span><span class="p">[</span><span class="s1">&#39;bounds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounds_ticks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calc_funcs</span><span class="p">[</span><span class="s1">&#39;midbounds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mid_bounds_ticks</span>

<div class="viewcode-block" id="CTicks.set_ticks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTicks.set_ticks">[docs]</a>    <span class="k">def</span> <span class="nf">set_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ticks</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_bounds_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">step</span> <span class="ow">or</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">bounds</span><span class="p">[::</span><span class="n">step</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_mid_bounds_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">step</span> <span class="ow">or</span> <span class="mi">1</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">bounds</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ret</span><span class="p">[::</span><span class="n">step</span><span class="p">]</span>

<div class="viewcode-block" id="CTicks.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTicks.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># reset the locators if the colorbar has been drawn from scratch</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">_just_drawn</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">cbars</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_default_locators</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CTicks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTicks.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTicks.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_locator</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_formatter</span>
            <span class="n">cbar</span><span class="o">.</span><span class="n">update_ticks</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">TicksBase</span><span class="o">.</span><span class="n">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTicks.set_default_locators"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTicks.set_default_locators">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_locators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_locator</span> <span class="o">=</span> <span class="n">cbar</span><span class="o">.</span><span class="n">locator</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_formatter</span> <span class="o">=</span> <span class="n">cbar</span><span class="o">.</span><span class="n">formatter</span></div>

<div class="viewcode-block" id="CTicks.get_fmt_widget"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTicks.get_fmt_widget">[docs]</a>    <span class="k">def</span> <span class="nf">get_fmt_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open a :class:`psy_simple.widget.CMapFmtWidget`&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">psy_simple.widgets.colors</span> <span class="kn">import</span> <span class="n">CTicksFmtWidget</span>
        <span class="k">return</span> <span class="n">CTicksFmtWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="VectorCTicks"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorCTicks">[docs]</a><span class="k">class</span> <span class="nc">VectorCTicks</span><span class="p">(</span><span class="n">CTicks</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the tick locations of the vector colorbar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(CTicks.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    cticklabels, vcticklabels</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">CTicks</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_color_array</span>
        <span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span></div>


<div class="viewcode-block" id="CTickLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickLabels">[docs]</a><span class="k">class</span> <span class="nc">CTickLabels</span><span class="p">(</span><span class="n">CbarOptions</span><span class="p">,</span> <span class="n">TickLabelsBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the colorbar ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TickLabelsBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    cticks, cticksize, ctickweight, ctickprops</span>
<span class="sd">    vcticks, vcticksize, vctickweight, vctickprops</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Colorbar ticklabels&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_formatters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default locator of the axis of the colorbars&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_formatters</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_formatters</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_default_formatters</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_formatters</span>

    <span class="nd">@default_formatters</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">default_formatters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>  <span class="c1"># d is expected to be a dictionary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_formatters</span> <span class="o">=</span> <span class="n">d</span>

<div class="viewcode-block" id="CTickLabels.set_default_formatters"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickLabels.set_default_formatters">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_formatters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbar</span><span class="o">.</span><span class="n">cbars</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_formatters</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">formatter</span><span class="p">}</span></div>

<div class="viewcode-block" id="CTickLabels.set_formatter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickLabels.set_formatter">[docs]</a>    <span class="k">def</span> <span class="nf">set_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="p">):</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">formatter</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">update_ticks</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="CTickSize"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickSize">[docs]</a><span class="k">class</span> <span class="nc">CTickSize</span><span class="p">(</span><span class="n">CbarOptions</span><span class="p">,</span> <span class="n">TickSizeBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the font size of the colorbar ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(fontsizes)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    ctickweight, ctickprops, cticklabels, cticks</span>
<span class="sd">    vctickweight, vctickprops, vcticklabels, vcticks&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font size of the colorbar ticklabels&#39;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">CbarOptions</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ctickprops&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="CTickWeight"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickWeight">[docs]</a><span class="k">class</span> <span class="nc">CTickWeight</span><span class="p">(</span><span class="n">CbarOptions</span><span class="p">,</span> <span class="n">TickWeightBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the fontweight of the colorbar ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(fontweights)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    cticksize, ctickprops, cticklabels, cticks</span>
<span class="sd">    vcticksize, vctickprops, vcticklabels, vcticks&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font weight of the colorbar ticklabels&#39;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">CbarOptions</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ctickprops&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="CTickProps"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickProps">[docs]</a><span class="k">class</span> <span class="nc">CTickProps</span><span class="p">(</span><span class="n">CbarOptions</span><span class="p">,</span> <span class="n">TickPropsBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the font properties of the colorbar ticklabels</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(TickPropsBase.possible_types)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    cticksize, ctickweight, cticklabels, cticks</span>
<span class="sd">    vcticksize, vctickweight, vcticklabels, vcticks&quot;&quot;&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">CbarOptions</span><span class="o">.</span><span class="n">children</span> <span class="o">+</span> <span class="n">TickPropsBase</span><span class="o">.</span><span class="n">children</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Font properties of the colorbar ticklabels&#39;</span>

<div class="viewcode-block" id="CTickProps.update_axis"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CTickProps.update_axis">[docs]</a>    <span class="k">def</span> <span class="nf">update_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">default</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="s1">&#39;major&#39;</span> <span class="ow">in</span> <span class="n">default</span> <span class="ow">or</span> <span class="s1">&#39;minor&#39;</span> <span class="ow">in</span> <span class="n">default</span><span class="p">:</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">default</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span>
                <span class="n">default</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">axisname</span> <span class="o">+</span> <span class="s1">&#39;tick\.</span><span class="si">%s</span><span class="s1">\.\w&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">value</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">val</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]))</span> <span class="o">&gt;=</span> <span class="mf">1.5</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;visible&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">posnames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisname</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="k">else</span> <span class="p">[</span>
            <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]</span>
        <span class="n">label_positions</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="s1">&#39;label</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">posnames</span><span class="p">),</span>
            <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;ft&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;fl&#39;</span><span class="p">]</span> <span class="k">else</span>
            <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]))</span>
        <span class="n">label_positions</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axisname</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">which</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">label_positions</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ArrowSize"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ArrowSize">[docs]</a><span class="k">class</span> <span class="nc">ArrowSize</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the size of the arrows</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        make no scaling</span>
<span class="sd">    float</span>
<span class="sd">        Factor scaling the size of the arrows</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    arrowstyle, linewidth, density, color&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;vector&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Size of the arrows&#39;</span>

<div class="viewcode-block" id="ArrowSize.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ArrowSize.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;stream&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;arrowsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span> <span class="ow">or</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;arrowsize&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div></div>


<div class="viewcode-block" id="ArrowStyle"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ArrowStyle">[docs]</a><span class="k">class</span> <span class="nc">ArrowStyle</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Change the style of the arrows</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        Any arrow style string (see</span>
<span class="sd">        :class:`~matplotlib.patches.FancyArrowPatch`)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This formatoption only has an effect for stream plots</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    arrowsize, linewidth, density, color&quot;&quot;&quot;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;vector&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Style of the arrows&#39;</span>

<div class="viewcode-block" id="ArrowStyle.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ArrowStyle.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;stream&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;arrowstyle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;arrowstyle&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="VectorCalculator"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorCalculator">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;WindCalculator&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">VectorCalculator</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract formatoption that provides calculation functions for speed, etc.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    string {&#39;absolute&#39;, &#39;u&#39;, &#39;v&#39;}</span>
<span class="sd">        Strings may define how the formatoption is calculated. Possible strings</span>
<span class="sd">        are</span>

<span class="sd">        - **absolute**: for the absolute wind speed</span>
<span class="sd">        - **u**: for the u component</span>
<span class="sd">        - **v**: for the v component</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="s1">&#39;transpose&#39;</span><span class="p">]</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">VectorCalculator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;absolute&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_speed</span><span class="p">,</span>
            <span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_u</span><span class="p">,</span>
            <span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_v</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_maybe_ravel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">T</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;quiver&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_calc_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">data</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_ravel</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="n">scale</span>

    <span class="k">def</span> <span class="nf">_get_u</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_ravel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale</span>

    <span class="k">def</span> <span class="nf">_get_v</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_ravel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale</span></div>


<div class="viewcode-block" id="VectorLineWidth"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorLineWidth">[docs]</a><span class="k">class</span> <span class="nc">VectorLineWidth</span><span class="p">(</span><span class="n">VectorCalculator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the linewidth of the arrows</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        give the linewidth explicitly</span>
<span class="sd">    %(WindCalculator.possible_types)s</span>
<span class="sd">    tuple (string, float)</span>
<span class="sd">        `string` may be one of the above strings, `float` may be a scaling</span>
<span class="sd">        factor</span>
<span class="sd">    2D-array</span>
<span class="sd">        The values determine the linewidth for each plotted arrow. Note that</span>
<span class="sd">        the shape has to match the one of u and v.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    arrowsize, arrowstyle, density, color&quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Linewidth of the arrows&#39;</span>

<div class="viewcode-block" id="VectorLineWidth.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorLineWidth.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;quiver&#39;</span> \
                <span class="k">else</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_funcs</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]](</span>
                <span class="o">*</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_ravel</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="VectorColor"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorColor">[docs]</a><span class="k">class</span> <span class="nc">VectorColor</span><span class="p">(</span><span class="n">VectorCalculator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the color for the arrows</span>

<span class="sd">    This formatoption can be used to set a single color for the vectors or</span>
<span class="sd">    define the color coding</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        Determines the greyness</span>
<span class="sd">    color</span>
<span class="sd">        Defines the same color for all arrows. The string can be either a html</span>
<span class="sd">        hex string (e.g. &#39;#eeefff&#39;), a single letter (e.g. &#39;b&#39;: blue,</span>
<span class="sd">        &#39;g&#39;: green, &#39;r&#39;: red, &#39;c&#39;: cyan, &#39;m&#39;: magenta, &#39;y&#39;: yellow, &#39;k&#39;: black,</span>
<span class="sd">        &#39;w&#39;: white) or any other color</span>
<span class="sd">    %(WindCalculator.possible_types)s</span>
<span class="sd">    2D-array</span>
<span class="sd">        The values determine the color for each plotted arrow. Note that</span>
<span class="sd">        the shape has to match the one of u and v.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    arrowsize, arrowstyle, density, linewidth&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">VectorCalculator</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="s1">&#39;bounds&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;colors&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Color of the arrows&#39;</span>

<div class="viewcode-block" id="VectorColor.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorColor.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">validate_color</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colored</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_funcs</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_funcs</span><span class="p">[</span><span class="n">value</span><span class="p">]()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colored</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_color_array</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">validate_float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colored</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maybe_ravel</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">colored</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_color_array</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;quiver&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">colored</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_args</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colored</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_cmap</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_delete_cmap</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_set_cmap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">_initializing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_cmap</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;norm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">norm</span>

    <span class="k">def</span> <span class="nf">_delete_cmap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="Density"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Density">[docs]</a><span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Density</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Change the density of the arrows</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        Scales the density of the arrows in x- and y-direction (1.0 means</span>
<span class="sd">        no scaling)</span>
<span class="sd">    tuple (x, y)</span>
<span class="sd">        Defines the scaling in x- and y-direction manually</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    quiver plots do not support density scaling</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plot&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;vector&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Density of the arrows&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Density</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_density_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;stream&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_stream_density</span><span class="p">,</span>
            <span class="s1">&#39;quiver&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_quiver_density</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;stream&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unset_stream_density</span><span class="p">,</span>
            <span class="s1">&#39;quiver&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unset_quiver_density</span><span class="p">}</span>

<div class="viewcode-block" id="Density.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Density.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">has_changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">has_changed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">has_changed</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_density_funcs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">](</span><span class="n">value</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_set_stream_density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_set_quiver_density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">val</span> <span class="o">!=</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span><span class="p">):</span>
            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">] - Quiver plot does not support the density &quot;</span>
                 <span class="s2">&quot;keyword!&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                 <span class="ne">RuntimeWarning</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_unset_stream_density</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;density&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_unset_quiver_density</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="Density.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Density.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">plot_type</span> <span class="o">=</span> <span class="n">plot_type</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_funcs</span><span class="p">[</span><span class="n">plot_type</span><span class="p">]()</span></div></div>


<div class="viewcode-block" id="VectorPlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot">[docs]</a><span class="k">class</span> <span class="nc">VectorPlot</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose the vector plot type</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        Plot types can be either</span>

<span class="sd">        quiver</span>
<span class="sd">            to make a quiver plot</span>
<span class="sd">        stream</span>
<span class="sd">            to make a stream plot&quot;&quot;&quot;</span>

    <span class="n">plot_fmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;plotting&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Plot type of the arrows&#39;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">BEFOREPLOTTING</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="s1">&#39;bounds&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">,</span> <span class="s1">&#39;transform&#39;</span><span class="p">,</span> <span class="s1">&#39;arrowsize&#39;</span><span class="p">,</span> <span class="s1">&#39;arrowstyle&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;density&#39;</span><span class="p">,</span> <span class="s1">&#39;linewidth&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The function that can replace the axes.format_coord method&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">format_coord_func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mappable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The mappable, i.e. the container of the plot&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;stream&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">lines</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xcoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The x coordinate :class:`xarray.Variable`&quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">iter_base_variables</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ycoord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The y coordinate :class:`xarray.Variable`&quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">iter_base_variables</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Formatoption</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_funcs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;quiver&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quiver_plot</span><span class="p">,</span>
            <span class="s1">&#39;stream&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stream_plot</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_orig_format_coord</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span>

<div class="viewcode-block" id="VectorPlot.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div>
        <span class="c1"># the real plot making is done by make_plot but we store the value here</span>
        <span class="c1"># in case it is shared</span>

<div class="viewcode-block" id="VectorPlot.make_plot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.make_plot">[docs]</a>    <span class="k">def</span> <span class="nf">make_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># remove the plot if it shall be replotted or any of the dependencies</span>
        <span class="c1"># changed. Otherwise there is nothing to change</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">replot</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">has_changed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependencies</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">]))):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_funcs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">]()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_format_coord</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_orig_format_coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">format_coord</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">format_coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_coord</span></div>

    <span class="k">def</span> <span class="nf">_quiver_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="n">rasterized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_stream_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">()</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">dx</span><span class="p">):</span>
            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Rescaling x to be equally spaced!&quot;</span><span class="p">,</span> <span class="n">PsyPlotRuntimeWarning</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">*</span> <span class="n">dx</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">dy</span><span class="p">):</span>
            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Rescaling y to be equally spaced!&quot;</span><span class="p">,</span> <span class="n">PsyPlotRuntimeWarning</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">))</span> <span class="o">*</span> <span class="n">dy</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="k">assert</span> <span class="n">u</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">u</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="k">assert</span> <span class="n">u</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">u</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">streamplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">values</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">values</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span>

<div class="viewcode-block" id="VectorPlot.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">keep</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">FancyArrowPatch</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">streamplot</span><span class="o">.</span><span class="n">StreamplotSet</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="c1"># remove arrows</span>
            <span class="k">for</span> <span class="n">patch</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">keep</span><span class="p">(</span><span class="n">patch</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># the artist has already been removed</span>
                <span class="k">pass</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span></div>

<div class="viewcode-block" id="VectorPlot.add2format_coord"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.add2format_coord">[docs]</a>    <span class="k">def</span> <span class="nf">add2format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Additional information for the :meth:`format_coord`&quot;&quot;&quot;</span>
        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">uname</span><span class="p">,</span> <span class="n">vname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">xcoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xcoord</span>
        <span class="n">ycoord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycoord</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_tri</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_1d</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_2d</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="n">speed</span> <span class="o">=</span> <span class="p">(</span><span class="n">z1</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">z2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
        <span class="n">xunit</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">xunit</span><span class="p">:</span>
            <span class="n">xunit</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">xunit</span>
        <span class="n">yunit</span> <span class="o">=</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">yunit</span><span class="p">:</span>
            <span class="n">yunit</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">yunit</span>
        <span class="n">zunit</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">zunit</span><span class="p">:</span>
            <span class="n">zunit</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">zunit</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;, vector data: </span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">, &#39;</span>
                <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%.4g%s</span><span class="s1">, absolute: </span><span class="si">%.4g%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">xcoord</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xunit</span><span class="p">,</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yunit</span><span class="p">,</span>
                    <span class="n">uname</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">zunit</span><span class="p">,</span> <span class="n">vname</span><span class="p">,</span> <span class="n">z2</span><span class="p">,</span> <span class="n">zunit</span><span class="p">,</span>
                    <span class="n">speed</span><span class="p">,</span> <span class="n">zunit</span><span class="p">)</span></div>

<div class="viewcode-block" id="VectorPlot.get_xyz_tri"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.get_xyz_tri">[docs]</a>    <span class="k">def</span> <span class="nf">get_xyz_tri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get closest x, y and z for the given `x` and `y` in `data` for</span>
<span class="sd">        1d coords&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xyz_2d</span><span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span></div>

<div class="viewcode-block" id="VectorPlot.get_xyz_1d"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.get_xyz_1d">[docs]</a>    <span class="k">def</span> <span class="nf">get_xyz_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get closest x, y and z for the given `x` and `y` in `data` for</span>
<span class="sd">        1d coords&quot;&quot;&quot;</span>
        <span class="n">xclose</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">indexes</span><span class="p">[</span><span class="n">xcoord</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
        <span class="n">yclose</span> <span class="o">=</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">indexes</span><span class="p">[</span><span class="n">ycoord</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
        <span class="n">uval</span> <span class="o">=</span> <span class="n">u</span><span class="p">[</span><span class="n">yclose</span><span class="p">,</span> <span class="n">xclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">vval</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">yclose</span><span class="p">,</span> <span class="n">xclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="k">return</span> <span class="n">xcoord</span><span class="p">[</span><span class="n">xclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">[</span><span class="n">yclose</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">uval</span><span class="p">,</span> <span class="n">vval</span></div>

<div class="viewcode-block" id="VectorPlot.get_xyz_2d"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorPlot.get_xyz_2d">[docs]</a>    <span class="k">def</span> <span class="nf">get_xyz_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcoord</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get closest x, y and z for the given `x` and `y` in `data` for</span>
<span class="sd">        2d coords&quot;&quot;&quot;</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="n">xcoord</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">ycoord</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">xy</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">imin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanargmin</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>
        <span class="n">xy_min</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[</span><span class="n">imin</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">xy_min</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">xy_min</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()[</span><span class="n">imin</span><span class="p">],</span>
                <span class="n">v</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ravel</span><span class="p">()[</span><span class="n">imin</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="SimpleVectorPlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SimpleVectorPlot">[docs]</a><span class="k">class</span> <span class="nc">SimpleVectorPlot</span><span class="p">(</span><span class="n">VectorPlot</span><span class="p">):</span>
    <span class="c1"># disable the stream plot for unstructured grids because it is not supported</span>
    <span class="c1"># for 1d arrays and for circumpolar grids because 2d coordinates are not</span>
    <span class="c1"># supported</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">VectorPlot</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="SimpleVectorPlot.set_value"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SimpleVectorPlot.set_value">[docs]</a>    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;stream&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="n">u</span><span class="p">):</span>
                <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">] - Streamplot is not supported for unstructured &#39;</span>
                     <span class="s1">&#39;grids!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;quiver&#39;</span>
            <span class="k">elif</span> <span class="n">u</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_circumpolar</span><span class="p">(</span><span class="n">u</span><span class="p">):</span>
                <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">] - Streamplot is not supported for circumpolar &#39;</span>
                     <span class="s1">&#39;grids!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;quiver&#39;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SimpleVectorPlot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CombinedVectorPlot"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CombinedVectorPlot">[docs]</a><span class="k">class</span> <span class="nc">CombinedVectorPlot</span><span class="p">(</span><span class="n">VectorPlot</span><span class="p">):</span>

    <span class="vm">__doc__</span> <span class="o">=</span> <span class="n">VectorPlot</span><span class="o">.</span><span class="vm">__doc__</span>

<div class="viewcode-block" id="CombinedVectorPlot.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CombinedVectorPlot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">[</span><span class="s1">&#39;zorder&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CombinedVectorPlot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="VectorCbar"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorCbar">[docs]</a><span class="k">class</span> <span class="nc">VectorCbar</span><span class="p">(</span><span class="n">Cbar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the position of the vector plot colorbars</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(Cbar.possible_types)s</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="n">Cbar</span><span class="o">.</span><span class="n">dependencies</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">END</span>

<div class="viewcode-block" id="VectorCbar.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorCbar.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">colored</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">VectorCbar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="VectorBounds"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorBounds">[docs]</a><span class="k">class</span> <span class="nc">VectorBounds</span><span class="p">(</span><span class="n">Bounds</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the boundaries of the vector colorbar</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(Bounds.possible_types)s</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    %(Bounds.examples)s</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    %(Bounds.see_also)s&quot;&quot;&quot;</span>

    <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">_color_array</span>
        <span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">arr</span><span class="p">)]</span>

<div class="viewcode-block" id="VectorBounds.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.VectorBounds.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">colored</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">VectorBounds</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LegendLabels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LegendLabels">[docs]</a><span class="k">class</span> <span class="nc">LegendLabels</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">,</span> <span class="n">TextBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the labels of the arrays in the legend</span>

<span class="sd">    This formatoption specifies the labels for each array in the legend.</span>
<span class="sd">    %(replace_note)s</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str:</span>
<span class="sd">        A single string that shall be used for all arrays.</span>
<span class="sd">    list of str:</span>
<span class="sd">        Same as a single string but specified for each array</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    legend&quot;&quot;&quot;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Labels in the legend&#39;</span>

<div class="viewcode-block" id="LegendLabels.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LegendLabels.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">get1d</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span>
                    <span class="n">get1d</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">replot</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">arr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_enhanced_attrs</span><span class="p">(</span>
                    <span class="n">get1d</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">replot</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span> <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">arr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                        <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">)]</span></div></div>


<div class="viewcode-block" id="Legend"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Legend">[docs]</a><span class="k">class</span> <span class="nc">Legend</span><span class="p">(</span><span class="n">DictFormatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draw a legend</span>

<span class="sd">    This formatoption determines where and if to draw the legend. It uses the</span>
<span class="sd">    :attr:`labels` formatoption to determine the labels.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    bool</span>
<span class="sd">        Draw a legend or not</span>
<span class="sd">    str or int</span>
<span class="sd">        Specifies where to plot the legend (i.e. the location)</span>
<span class="sd">    dict</span>
<span class="sd">        Give the keywords for the :func:`matplotlib.pyplot.legend` function</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    labels&quot;&quot;&quot;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;legendlabels&#39;</span><span class="p">,</span> <span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">]</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Properties of the legend&#39;</span>

<div class="viewcode-block" id="Legend.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Legend.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">shared_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared_by</span>
        <span class="k">if</span> <span class="n">shared_by</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># update the legend of the other formatoption instead of this one</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">shared_by</span><span class="o">.</span><span class="n">plotter</span><span class="o">.</span><span class="n">_updating</span><span class="p">:</span>
                <span class="n">shared_by</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">shared_by</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loc&#39;</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">fmto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">union</span><span class="p">([</span><span class="bp">self</span><span class="p">]):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fmto</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="s1">&#39;_plot&#39;</span><span class="p">):</span>
                <span class="n">this_artists</span><span class="p">,</span> <span class="n">this_labels</span> <span class="o">=</span> <span class="n">fmto</span><span class="o">.</span><span class="n">get_artists_and_labels</span><span class="p">()</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">this_artists</span><span class="p">)</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">this_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="o">**</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Legend.get_artists_and_labels"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Legend.get_artists_and_labels">[docs]</a>    <span class="k">def</span> <span class="nf">get_artists_and_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_plot</span><span class="p">,</span> <span class="p">[</span>
            <span class="n">l</span> <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">ls</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legendlabels</span><span class="o">.</span><span class="n">labels</span><span class="p">,</span>
                               <span class="n">cycle</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">value</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">ls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span></div>

<div class="viewcode-block" id="Legend.remove"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Legend.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;legend&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="MeanCalculator"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MeanCalculator">[docs]</a><span class="k">class</span> <span class="nc">MeanCalculator</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine how the error is visualized</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    &#39;mean&#39;</span>
<span class="sd">        Calculate the weighted mean</span>
<span class="sd">    &#39;median&#39;</span>
<span class="sd">        Calculate the weighted median (i.e. the 50th percentile)</span>
<span class="sd">    float between 0 and 100</span>
<span class="sd">        Calculate the given quantile</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    err_calc: Determines how to calculate the error</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Mean calculation&#39;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">requires_replot</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="MeanCalculator.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.MeanCalculator.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">arr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;mean&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">fldmean</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;median&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">fldpctl</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">fldpctl</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ErrorCalculator"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorCalculator">[docs]</a><span class="k">class</span> <span class="nc">ErrorCalculator</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculation of the error</span>

<span class="sd">    This formatoption is used to calculate the error range.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Do not calculate any error range</span>
<span class="sd">    float</span>
<span class="sd">        A float between 0 and 50. This will represent the distance from the</span>
<span class="sd">        median (i.e. the 50th percentile). A value of 45 will hence correspond</span>
<span class="sd">        to the 5th and 95th percentile</span>
<span class="sd">    list of 2 floats between 0 and 100</span>
<span class="sd">        Two floats where the first corresponds to the minimum and the second</span>
<span class="sd">        to the maximum percentile</span>
<span class="sd">    str</span>
<span class="sd">        A string with &#39;std&#39; in it. Then we will use the standard deviation. Any</span>
<span class="sd">        number in this string, e.g. &#39;3.5std&#39; will serve as a multiplier</span>
<span class="sd">        (in this case 3.5 times the standard deviation).</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    mean: Determines how the line is calculated</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Mean calculation&#39;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">requires_replot</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="ErrorCalculator.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ErrorCalculator.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">isstring</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">use_std</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+\.?\d*&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                <span class="n">multiplier</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">use_std</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_raw_data</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">)):</span>
            <span class="n">mean</span> <span class="o">=</span> <span class="n">mean</span><span class="o">.</span><span class="n">to_dataset</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">use_std</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">multiplier</span> <span class="o">*</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">fldstd</span><span class="p">()</span>
                <span class="n">mean</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">err</span><span class="o">.</span><span class="n">variable</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">mean</span><span class="p">[[</span><span class="n">arr</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">]]</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">fldpctl</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="s1">&#39;pctl</span><span class="si">{:1.3g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                <span class="n">mean</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">err</span><span class="o">.</span><span class="n">variable</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">mean</span><span class="p">[</span><span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">err</span><span class="o">.</span><span class="n">variable</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">mean</span><span class="p">[[</span><span class="n">arr</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="n">names</span><span class="p">]</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
            <span class="n">data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">arr_name</span>
            <span class="n">data</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span></div></div>


<span class="n">docstrings</span><span class="o">.</span><span class="n">delete_types</span><span class="p">(</span><span class="s1">&#39;LimitBase.possible_types&#39;</span><span class="p">,</span> <span class="s1">&#39;no_None&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="Hist2DXRange"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Hist2DXRange">[docs]</a><span class="k">class</span> <span class="nc">Hist2DXRange</span><span class="p">(</span><span class="n">LimitBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the range of the histogram for the x-dimension</span>

<span class="sd">    This formatoption specifies the minimum and maximum of the histogram</span>
<span class="sd">    in the x-dimension</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LimitBase.possible_types.no_None)s</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This formatoption always acts on the coordinate, no matter what the</span>
<span class="sd">    value of the :attr:`transpose` formatoption is</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    yrange&quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Range of the histogram in x-direction&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;coord&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># We don&#39;t use the :attr:`data` attribute because this fails if the</span>
        <span class="c1"># formatoption is shared and the ``coord`` formatoption is not None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">get_alternative_coord</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_in_list</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">da</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">coord</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">coord</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">ret</span>

<div class="viewcode-block" id="Hist2DXRange.set_limit"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Hist2DXRange.set_limit">[docs]</a>    <span class="k">def</span> <span class="nf">set_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="n">args</span></div></div>


<div class="viewcode-block" id="Hist2DYRange"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Hist2DYRange">[docs]</a><span class="k">class</span> <span class="nc">Hist2DYRange</span><span class="p">(</span><span class="n">Hist2DXRange</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the range of the histogram for the x-dimension</span>

<span class="sd">    This formatoption specifies the minimum and maximum of the histogram</span>
<span class="sd">    in the x-dimension</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    %(LimitBase.possible_types.no_None)s</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This formatoption always acts on the DataArray, no matter what the</span>
<span class="sd">    value of the :attr:`transpose` formatoption is</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    xrange&quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Range of the histogram in y-direction&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="p">)[</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span><span class="o">.</span><span class="n">notnull</span><span class="p">())]</span></div>


<div class="viewcode-block" id="DataPrecision"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataPrecision">[docs]</a><span class="k">class</span> <span class="nc">DataPrecision</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the precision of the data</span>

<span class="sd">    This formatoption can be used to specify the precision of the data which</span>
<span class="sd">    then will be the minimal bin width of the 2D histogram or the bandwith of</span>
<span class="sd">    the kernel size (if the :attr:`density` formatoption is set to ``&#39;kde&#39;``)</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    float</span>
<span class="sd">        If 0, this formatoption has no effect at all. Otherwise it is assumed</span>
<span class="sd">        to be the precision of the data</span>
<span class="sd">    str</span>
<span class="sd">        One of ``{&#39;scott&#39; | &#39;silverman&#39;}``. This uses the statsmodels package</span>
<span class="sd">        to estimate the bandwidth of the data that is then used in the</span>
<span class="sd">        histogram or KDE plot&quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xrange&#39;</span><span class="p">,</span> <span class="s1">&#39;yrange&#39;</span><span class="p">]</span>

    <span class="n">connections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;density&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Precision of the visualized data&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="DataPrecision.estimate_bw"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataPrecision.estimate_bw">[docs]</a>    <span class="k">def</span> <span class="nf">estimate_bw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">data_range</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">statsmodels.nonparametric.api</span> <span class="k">as</span> <span class="nn">smnp</span>
        <span class="n">bw_func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">smnp</span><span class="o">.</span><span class="n">bandwidths</span><span class="p">,</span> <span class="s2">&quot;bw_&quot;</span> <span class="o">+</span> <span class="n">method</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data_range</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data_range</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[(</span><span class="n">values</span> <span class="o">&gt;=</span> <span class="n">vmin</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">values</span> <span class="o">&lt;=</span> <span class="n">vmax</span><span class="p">)]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No values found within the given range of &quot;</span>
                             <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data_range</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bw_func</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataPrecision.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DataPrecision.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">slist</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prec</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">da</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">data</span><span class="p">)]</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="o">.</span><span class="n">range</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">da</span><span class="p">[</span><span class="n">da</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span><span class="o">.</span><span class="n">values</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yrange</span><span class="o">.</span><span class="n">range</span>
            <span class="k">if</span> <span class="n">isstring</span><span class="p">(</span><span class="n">prec</span><span class="p">):</span>
                <span class="n">prec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_bw</span><span class="p">(</span><span class="n">prec</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="n">r</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">prec</span><span class="p">)</span> <span class="o">*</span> <span class="n">prec</span>
                <span class="n">dmin</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">dmax</span> <span class="o">-</span> <span class="n">dmin</span><span class="p">)</span> <span class="o">/</span> <span class="n">prec</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="HistBins"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.HistBins">[docs]</a><span class="k">class</span> <span class="nc">HistBins</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the bins of the 2D-Histogramm</span>

<span class="sd">    This formatoption can be used to specify, how many bins to use. In other</span>
<span class="sd">    words, it determines the grid size of the resulting histogram or kde plot.</span>
<span class="sd">    If however you also set the :attr:`precision` formatoption keyword then the</span>
<span class="sd">    minimum of precision and the bins specified here will be used.</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    int</span>
<span class="sd">        If 0, only use the bins specified by the :attr:`precision` keyword</span>
<span class="sd">        (raises an error if the :attr:`precision` is also set to 0),</span>
<span class="sd">        otherwise the number of bins to use</span>
<span class="sd">    tuple (x, y) of int</span>
<span class="sd">        The bins for x and y explicitly</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Number of bins of the histogram&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="HistBins.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.HistBins.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">bins_prec</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="o">.</span><span class="n">bins</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">bins</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">bins_prec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;precision and bins must not both be 0!&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">bins</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">bins_prec</span>
            <span class="k">elif</span> <span class="n">bins_prec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">bins</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">bins_prec</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="NormedHist2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.NormedHist2D">[docs]</a><span class="k">class</span> <span class="nc">NormedHist2D</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the normalization of the histogram</span>

<span class="sd">    This formatoption can be used to normalize the histogram. It has no effect</span>
<span class="sd">    if the :attr:`density` formatoption is set to ``&#39;kde&#39;``</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    None</span>
<span class="sd">        Do not make any normalization</span>
<span class="sd">    str</span>
<span class="sd">        One of</span>

<span class="sd">        counts</span>
<span class="sd">            To make the normalization based on the total number counts</span>
<span class="sd">        area</span>
<span class="sd">            To make the normalization basen on the total number of counts and</span>
<span class="sd">            area (the default behaviour of :func:`numpy.histogram2d`)</span>
<span class="sd">        x, col, column or columns</span>
<span class="sd">            To normalize every column</span>
<span class="sd">        y, row or rows</span>
<span class="sd">            To normalize every row</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    density</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Specify how to normalize the histogram&#39;</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Normalize the histogram&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="NormedHist2D.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.NormedHist2D.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>  <span class="c1"># nothing to do here</span></div>

<div class="viewcode-block" id="NormedHist2D.hist2d"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.NormedHist2D.hist2d">[docs]</a>    <span class="k">def</span> <span class="nf">hist2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">da</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make the two dimensional histogram</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        da: xarray.DataArray</span>
<span class="sd">            The data source&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;counts&#39;</span><span class="p">:</span>
            <span class="n">normed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">normed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">values</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">counts</span><span class="p">,</span> <span class="n">xedges</span><span class="p">,</span> <span class="n">yedges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram2d</span><span class="p">(</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="n">normed</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;counts&#39;</span><span class="p">:</span>  <span class="c1"># normalize such that all values sum to one</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">/</span> <span class="n">counts</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;col&#39;</span><span class="p">,</span> <span class="s1">&#39;column&#39;</span><span class="p">,</span> <span class="s1">&#39;columns&#39;</span><span class="p">]:</span>
            <span class="c1"># normalize such that every column sums to one</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">/</span> <span class="n">counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="s1">&#39;rows&#39;</span><span class="p">]:</span>
            <span class="c1"># normalize such that every row sums to one</span>
            <span class="n">counts</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">/</span> <span class="n">counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">counts</span><span class="p">,</span> <span class="n">xedges</span><span class="p">,</span> <span class="n">yedges</span></div></div>


<div class="viewcode-block" id="PointDensity"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.PointDensity">[docs]</a><span class="k">class</span> <span class="nc">PointDensity</span><span class="p">(</span><span class="n">Formatoption</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the method to calculate the density</span>

<span class="sd">    Possible types</span>
<span class="sd">    --------------</span>
<span class="sd">    str</span>
<span class="sd">        One of the following strings are possible</span>

<span class="sd">        hist</span>
<span class="sd">            Make a 2D-histogram. The normalization is controlled by the</span>
<span class="sd">            :attr:`normed` formatoption</span>
<span class="sd">        kde</span>
<span class="sd">            Fit a bivariate kernel density estimate to the data. Note that</span>
<span class="sd">            this choice requires pythons [statsmodels]_ module to be</span>
<span class="sd">            installed</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [statsmodels] http://statsmodels.sourceforge.net/</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">priority</span> <span class="o">=</span> <span class="n">START</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Type of the density plot&#39;</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;normed&#39;</span><span class="p">,</span> <span class="s1">&#39;bins&#39;</span><span class="p">,</span> <span class="s1">&#39;xrange&#39;</span><span class="p">,</span> <span class="s1">&#39;yrange&#39;</span><span class="p">,</span> <span class="s1">&#39;precision&#39;</span><span class="p">,</span> <span class="s1">&#39;coord&#39;</span><span class="p">]</span>

    <span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Calculation of the point density&#39;</span>

    <span class="n">data_dependent</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="PointDensity.update"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.PointDensity.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;hist&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hist</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kde</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_kde</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">raw_da</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">raw_da</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">replace_coord</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">xyranges</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="o">.</span><span class="n">range</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yrange</span><span class="o">.</span><span class="n">range</span><span class="p">]</span>
        <span class="n">bws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="o">.</span><span class="n">prec</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="o">.</span><span class="n">bins</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bw</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bws</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">bw</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">bws</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;scott&#39;</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="n">raw_da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">raw_da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">xname</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">name</span>
        <span class="n">yname</span> <span class="o">=</span> <span class="n">raw_da</span><span class="o">.</span><span class="n">name</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_statsmodels_bivariate_kde</span><span class="p">(</span>
            <span class="n">raw_da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">raw_da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">raw_da</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">bws</span><span class="p">,</span>
            <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">grid</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">xyranges</span><span class="p">)</span>
        <span class="n">xcent</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">xname</span><span class="p">,</span> <span class="p">),</span> <span class="n">x</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">coord</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">ycent</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">yname</span><span class="p">,</span> <span class="p">),</span> <span class="n">y</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">raw_da</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span> <span class="n">z</span><span class="p">,</span>
                          <span class="n">attrs</span><span class="o">=</span><span class="n">raw_da</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">({</span><span class="s1">&#39;counts&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">},</span> <span class="p">{</span><span class="n">xname</span><span class="p">:</span> <span class="n">xcent</span><span class="p">,</span> <span class="n">yname</span><span class="p">:</span> <span class="n">ycent</span><span class="p">})</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_other_coords</span><span class="p">(</span><span class="n">raw_da</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span> <span class="o">=</span> <span class="n">CFDecoder</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">counts</span>
        <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">init_accessor</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span> <span class="n">decoder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">arr</span>

    <span class="k">def</span> <span class="nf">_statsmodels_bivariate_kde</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">bws</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span><span class="p">,</span> <span class="n">xyranges</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compute a bivariate kde using statsmodels.</span>
<span class="sd">        This function is mainly motivated through</span>
<span class="sd">        seaborn.distributions._statsmodels_bivariate_kde&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">statsmodels.nonparametric.api</span> <span class="k">as</span> <span class="nn">smnp</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">bw</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">bws</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bw</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
                <span class="n">bw_func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">smnp</span><span class="o">.</span><span class="n">bandwidths</span><span class="p">,</span> <span class="s2">&quot;bw_&quot;</span> <span class="o">+</span> <span class="n">bw</span><span class="p">)</span>
                <span class="n">bws</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">bw_func</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span>
        <span class="n">kde</span> <span class="o">=</span> <span class="n">smnp</span><span class="o">.</span><span class="n">KDEMultivariate</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="s2">&quot;cc&quot;</span><span class="p">,</span> <span class="n">bws</span><span class="p">)</span>
        <span class="n">x_support</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">xyranges</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">xyranges</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">xsize</span><span class="p">)</span>
        <span class="n">y_support</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">xyranges</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">xyranges</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">ysize</span><span class="p">)</span>
        <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x_support</span><span class="p">,</span> <span class="n">y_support</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">kde</span><span class="o">.</span><span class="n">pdf</span><span class="p">([</span><span class="n">xx</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">yy</span><span class="o">.</span><span class="n">ravel</span><span class="p">()])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">xx</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x_support</span><span class="p">,</span> <span class="n">y_support</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="nf">_hist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">raw_da</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">raw_da</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">replace_coord</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bins</span><span class="o">.</span><span class="n">bins</span>
        <span class="n">range_</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">xrange</span><span class="o">.</span><span class="n">range</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yrange</span><span class="o">.</span><span class="n">range</span><span class="p">]</span>
        <span class="n">z</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normed</span><span class="o">.</span><span class="n">hist2d</span><span class="p">(</span><span class="n">raw_da</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">range_</span><span class="p">)</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="n">raw_da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">raw_da</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">xname</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">name</span>
        <span class="n">yname</span> <span class="o">=</span> <span class="n">raw_da</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># calculate the centers</span>
        <span class="n">xcent</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">xname</span><span class="p">,</span> <span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[[</span><span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                            <span class="n">attrs</span><span class="o">=</span><span class="n">coord</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">ycent</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">yname</span><span class="p">,</span> <span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[[</span><span class="n">y</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                            <span class="n">attrs</span><span class="o">=</span><span class="n">raw_da</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">xbounds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">xname</span><span class="p">,</span> <span class="s1">&#39;bnds&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[[</span><span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
        <span class="n">ybounds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">yname</span><span class="p">,</span> <span class="s1">&#39;bnds&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[[</span><span class="n">y</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
        <span class="n">xcent</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;bounds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xname</span> <span class="o">+</span> <span class="s1">&#39;_bnds&#39;</span>
        <span class="n">ycent</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;bounds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yname</span> <span class="o">+</span> <span class="s1">&#39;_bnds&#39;</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Variable</span><span class="p">((</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span> <span class="n">z</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
                          <span class="n">attrs</span><span class="o">=</span><span class="n">raw_da</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;counts&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">}</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">{</span><span class="n">xname</span><span class="p">:</span> <span class="n">xcent</span><span class="p">,</span> <span class="n">yname</span><span class="p">:</span> <span class="n">ycent</span><span class="p">,</span>
                  <span class="n">xname</span> <span class="o">+</span> <span class="s1">&#39;_bnds&#39;</span><span class="p">:</span> <span class="n">xbounds</span><span class="p">,</span> <span class="n">yname</span> <span class="o">+</span> <span class="s1">&#39;_bnds&#39;</span><span class="p">:</span> <span class="n">ybounds</span><span class="p">}</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_other_coords</span><span class="p">(</span><span class="n">raw_da</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decoder</span> <span class="o">=</span> <span class="n">CFDecoder</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">counts</span>
        <span class="n">arr</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">init_accessor</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span> <span class="n">decoder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">decoder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">arr</span>

    <span class="k">def</span> <span class="nf">_get_other_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_da</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">raw_da</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">raw_da</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">raw_da</span><span class="o">.</span><span class="n">dims</span><span class="p">)}</span></div>


<div class="viewcode-block" id="XYTickPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.XYTickPlotter">[docs]</a><span class="k">class</span> <span class="nc">XYTickPlotter</span><span class="p">(</span><span class="n">Plotter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotter class for x- and y-ticks and x- and y- ticklabels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plotter.simple.&#39;</span><span class="p">]</span>

    <span class="n">transpose</span> <span class="o">=</span> <span class="n">Transpose</span><span class="p">(</span><span class="s1">&#39;transpose&#39;</span><span class="p">)</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">XTicks</span><span class="p">(</span><span class="s1">&#39;xticks&#39;</span><span class="p">)</span>
    <span class="n">xticklabels</span> <span class="o">=</span> <span class="n">XTickLabels</span><span class="p">(</span><span class="s1">&#39;xticklabels&#39;</span><span class="p">)</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="n">YTicks</span><span class="p">(</span><span class="s1">&#39;yticks&#39;</span><span class="p">)</span>
    <span class="n">yticklabels</span> <span class="o">=</span> <span class="n">YTickLabels</span><span class="p">(</span><span class="s1">&#39;yticklabels&#39;</span><span class="p">)</span>
    <span class="n">ticksize</span> <span class="o">=</span> <span class="n">TickSize</span><span class="p">(</span><span class="s1">&#39;ticksize&#39;</span><span class="p">)</span>
    <span class="n">tickweight</span> <span class="o">=</span> <span class="n">TickWeight</span><span class="p">(</span><span class="s1">&#39;tickweight&#39;</span><span class="p">)</span>
    <span class="n">xtickprops</span> <span class="o">=</span> <span class="n">XTickProps</span><span class="p">(</span><span class="s1">&#39;xtickprops&#39;</span><span class="p">)</span>
    <span class="n">ytickprops</span> <span class="o">=</span> <span class="n">YTickProps</span><span class="p">(</span><span class="s1">&#39;ytickprops&#39;</span><span class="p">)</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="n">Xlabel</span><span class="p">(</span><span class="s1">&#39;xlabel&#39;</span><span class="p">)</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="n">Ylabel</span><span class="p">(</span><span class="s1">&#39;ylabel&#39;</span><span class="p">)</span>
    <span class="n">labelsize</span> <span class="o">=</span> <span class="n">LabelSize</span><span class="p">(</span><span class="s1">&#39;labelsize&#39;</span><span class="p">)</span>
    <span class="n">labelweight</span> <span class="o">=</span> <span class="n">LabelWeight</span><span class="p">(</span><span class="s1">&#39;labelweight&#39;</span><span class="p">)</span>
    <span class="n">labelprops</span> <span class="o">=</span> <span class="n">LabelProps</span><span class="p">(</span><span class="s1">&#39;labelprops&#39;</span><span class="p">)</span>
    <span class="n">xrotation</span> <span class="o">=</span> <span class="n">XRotation</span><span class="p">(</span><span class="s1">&#39;xrotation&#39;</span><span class="p">)</span>
    <span class="n">yrotation</span> <span class="o">=</span> <span class="n">YRotation</span><span class="p">(</span><span class="s1">&#39;yrotation&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base2D"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Base2D">[docs]</a><span class="k">class</span> <span class="nc">Base2D</span><span class="p">(</span><span class="n">Plotter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base plotter for 2-dimensional plots</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plotter.plot2d.&#39;</span><span class="p">]</span>

    <span class="n">cmap</span> <span class="o">=</span> <span class="n">CMap</span><span class="p">(</span><span class="s1">&#39;cmap&#39;</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">Bounds</span><span class="p">(</span><span class="s1">&#39;bounds&#39;</span><span class="p">)</span>
    <span class="n">extend</span> <span class="o">=</span> <span class="n">Extend</span><span class="p">(</span><span class="s1">&#39;extend&#39;</span><span class="p">)</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">Cbar</span><span class="p">(</span><span class="s1">&#39;cbar&#39;</span><span class="p">)</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">clabel</span> <span class="o">=</span> <span class="n">CLabel</span><span class="p">(</span><span class="s1">&#39;clabel&#39;</span><span class="p">)</span>
    <span class="n">clabelsize</span> <span class="o">=</span> <span class="n">label_size</span><span class="p">(</span><span class="n">clabel</span><span class="p">,</span> <span class="s1">&#39;Colorbar label&#39;</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;clabel&#39;</span><span class="p">])</span>
    <span class="n">clabelweight</span> <span class="o">=</span> <span class="n">label_weight</span><span class="p">(</span><span class="n">clabel</span><span class="p">,</span> <span class="s1">&#39;Colorbar label&#39;</span><span class="p">,</span>
                                <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;clabel&#39;</span><span class="p">])</span>
    <span class="n">cbarspacing</span> <span class="o">=</span> <span class="n">CbarSpacing</span><span class="p">(</span><span class="s1">&#39;cbarspacing&#39;</span><span class="p">)</span>
    <span class="n">clabelprops</span> <span class="o">=</span> <span class="n">label_props</span><span class="p">(</span><span class="n">clabel</span><span class="p">,</span> <span class="s1">&#39;Colorbar label&#39;</span><span class="p">,</span>
                              <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;clabel&#39;</span><span class="p">])</span>
    <span class="n">cticks</span> <span class="o">=</span> <span class="n">CTicks</span><span class="p">(</span><span class="s1">&#39;cticks&#39;</span><span class="p">)</span>
    <span class="n">cticklabels</span> <span class="o">=</span> <span class="n">CTickLabels</span><span class="p">(</span><span class="s1">&#39;cticklabels&#39;</span><span class="p">)</span>
    <span class="n">cticksize</span> <span class="o">=</span> <span class="n">CTickSize</span><span class="p">(</span><span class="s1">&#39;cticksize&#39;</span><span class="p">)</span>
    <span class="n">ctickweight</span> <span class="o">=</span> <span class="n">CTickWeight</span><span class="p">(</span><span class="s1">&#39;ctickweight&#39;</span><span class="p">)</span>
    <span class="n">ctickprops</span> <span class="o">=</span> <span class="n">CTickProps</span><span class="p">(</span><span class="s1">&#39;ctickprops&#39;</span><span class="p">)</span>
    <span class="n">mask_datagrid</span> <span class="o">=</span> <span class="n">MaskDataGrid</span><span class="p">(</span><span class="s1">&#39;mask_datagrid&#39;</span><span class="p">)</span>
    <span class="n">datagrid</span> <span class="o">=</span> <span class="n">DataGrid</span><span class="p">(</span><span class="s1">&#39;datagrid&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimplePlotterBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SimplePlotterBase">[docs]</a><span class="k">class</span> <span class="nc">SimplePlotterBase</span><span class="p">(</span><span class="n">BasePlotter</span><span class="p">,</span> <span class="n">XYTickPlotter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for all simple plotters&quot;&quot;&quot;</span>

    <span class="c1">#: The number variables that one data array visualized by this plotter</span>
    <span class="c1">#: might have.</span>
    <span class="n">allowed_vars</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1">#: The number of allowed dimensions in the for the visualization. If</span>
    <span class="c1">#: the array is unstructured, one dimension will be subtracted</span>
    <span class="n">allowed_dims</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">transpose</span> <span class="o">=</span> <span class="n">Transpose</span><span class="p">(</span><span class="s1">&#39;transpose&#39;</span><span class="p">)</span>
    <span class="n">axiscolor</span> <span class="o">=</span> <span class="n">AxisColor</span><span class="p">(</span><span class="s1">&#39;axiscolor&#39;</span><span class="p">)</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="s1">&#39;grid&#39;</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">LineColors</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
    <span class="n">xlim</span> <span class="o">=</span> <span class="n">Xlim</span><span class="p">(</span><span class="s1">&#39;xlim&#39;</span><span class="p">)</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">Ylim</span><span class="p">(</span><span class="s1">&#39;ylim&#39;</span><span class="p">)</span>
    <span class="n">sym_lims</span> <span class="o">=</span> <span class="n">SymmetricLimits</span><span class="p">(</span><span class="s1">&#39;sym_lims&#39;</span><span class="p">)</span>
    <span class="n">legendlabels</span> <span class="o">=</span> <span class="n">LegendLabels</span><span class="p">(</span><span class="s1">&#39;legendlabels&#39;</span><span class="p">)</span>
    <span class="n">legend</span> <span class="o">=</span> <span class="n">Legend</span><span class="p">(</span><span class="s1">&#39;legend&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="SimplePlotterBase.check_data"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SimplePlotterBase.check_data">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">is_unstructured</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A validation method for the data shape</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str or list of str</span>
<span class="sd">            The variable names (at maximum :attr:`allowed_vars` variables per</span>
<span class="sd">            array)</span>
<span class="sd">        dims: list with length 1 or list of lists with length 1</span>
<span class="sd">            The dimension of the arrays. Only 1D-Arrays are allowed</span>
<span class="sd">        is_unstructured: bool or list of bool, optional</span>
<span class="sd">            True if the corresponding array is unstructured. This keyword is</span>
<span class="sd">            ignored</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        %(Plotter.check_data.returns)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">[</span><span class="n">dims</span><span class="p">]</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">)</span> <span class="o">!=</span> <span class="n">N</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;Number of provided names (</span><span class="si">%i</span><span class="s1">) and dimensions &#39;</span>
                <span class="s1">&#39;</span><span class="si">%(i) a</span><span class="s1">re not the same&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">))]</span> <span class="o">*</span> <span class="n">N</span>
        <span class="n">checks</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dims</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">checks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;At least one variable name is required!&#39;</span>
            <span class="k">elif</span> <span class="p">((</span><span class="ow">not</span> <span class="n">isstring</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="ow">and</span>
                   <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">cls</span><span class="o">.</span><span class="n">allowed_vars</span><span class="p">)</span> <span class="ow">and</span>
                  <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">allowed_dims</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">slist</span><span class="p">(</span><span class="n">n</span><span class="p">)))):</span>
                <span class="n">checks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Only </span><span class="si">%i</span><span class="s1"> names are allowed per array!&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">allowed_vars</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">allowed_dims</span><span class="p">:</span>
                <span class="n">checks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">messages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Only </span><span class="si">%i</span><span class="s1">-dimensional arrays are allowed!&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">allowed_dims</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">checks</span><span class="p">,</span> <span class="n">messages</span></div></div>


<div class="viewcode-block" id="LinePlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.LinePlotter">[docs]</a><span class="k">class</span> <span class="nc">LinePlotter</span><span class="p">(</span><span class="n">SimplePlotterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotter for simple one-dimensional line plots</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plotter.line.&#39;</span><span class="p">]</span>

    <span class="c1">#: The number variables that one data array visualized by this plotter</span>
    <span class="c1">#: might have. We allow up to 3 variableswhere the second and third</span>
    <span class="c1">#: variable might be the errors (see the :attr:`error` formatoption)</span>
    <span class="n">allowed_vars</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">coord</span> <span class="o">=</span> <span class="n">AlternativeXCoord</span><span class="p">(</span><span class="s1">&#39;coord&#39;</span><span class="p">)</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="s1">&#39;marker&#39;</span><span class="p">)</span>
    <span class="n">markersize</span> <span class="o">=</span> <span class="n">MarkerSize</span><span class="p">(</span><span class="s1">&#39;markersize&#39;</span><span class="p">)</span>
    <span class="n">linewidth</span> <span class="o">=</span> <span class="n">LineWidth</span><span class="p">(</span><span class="s1">&#39;linewidth&#39;</span><span class="p">)</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">LinePlot</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">ErrorPlot</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
    <span class="n">erroralpha</span> <span class="o">=</span> <span class="n">ErrorAlpha</span><span class="p">(</span><span class="s1">&#39;erroralpha&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ViolinPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ViolinPlotter">[docs]</a><span class="k">class</span> <span class="nc">ViolinPlotter</span><span class="p">(</span><span class="n">SimplePlotterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotter for making violin plots&quot;&quot;&quot;</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plotter.violin.&#39;</span><span class="p">]</span>

    <span class="n">plot</span> <span class="o">=</span> <span class="n">ViolinPlot</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">)</span>
    <span class="n">xlim</span> <span class="o">=</span> <span class="n">ViolinXlim</span><span class="p">(</span><span class="s1">&#39;xlim&#39;</span><span class="p">)</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">ViolinYlim</span><span class="p">(</span><span class="s1">&#39;ylim&#39;</span><span class="p">)</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">ViolinXTicks</span><span class="p">(</span><span class="s1">&#39;xticks&#39;</span><span class="p">)</span>
    <span class="n">xticklabels</span> <span class="o">=</span> <span class="n">ViolinXTickLabels</span><span class="p">(</span><span class="s1">&#39;xticklabels&#39;</span><span class="p">)</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="n">ViolinYTicks</span><span class="p">(</span><span class="s1">&#39;yticks&#39;</span><span class="p">)</span>
    <span class="n">yticklabels</span> <span class="o">=</span> <span class="n">ViolinYTickLabels</span><span class="p">(</span><span class="s1">&#39;yticklabels&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BarPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BarPlotter">[docs]</a><span class="k">class</span> <span class="nc">BarPlotter</span><span class="p">(</span><span class="n">SimplePlotterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotter for making bar plots&quot;&quot;&quot;</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plotter.bar.&#39;</span><span class="p">]</span>

    <span class="n">coord</span> <span class="o">=</span> <span class="n">AlternativeXCoord</span><span class="p">(</span><span class="s1">&#39;coord&#39;</span><span class="p">)</span>
    <span class="n">widths</span> <span class="o">=</span> <span class="n">BarWidths</span><span class="p">(</span><span class="s1">&#39;widths&#39;</span><span class="p">)</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">BarAlpha</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">)</span>
    <span class="n">categorical</span> <span class="o">=</span> <span class="n">CategoricalBars</span><span class="p">(</span><span class="s1">&#39;categorical&#39;</span><span class="p">)</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">BarPlot</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">)</span>
    <span class="n">xlim</span> <span class="o">=</span> <span class="n">BarXlim</span><span class="p">(</span><span class="s1">&#39;xlim&#39;</span><span class="p">)</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">BarYlim</span><span class="p">(</span><span class="s1">&#39;ylim&#39;</span><span class="p">)</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">BarXTicks</span><span class="p">(</span><span class="s1">&#39;xticks&#39;</span><span class="p">)</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="n">BarYTicks</span><span class="p">(</span><span class="s1">&#39;yticks&#39;</span><span class="p">)</span>
    <span class="n">xticklabels</span> <span class="o">=</span> <span class="n">BarXTickLabels</span><span class="p">(</span><span class="s1">&#39;xticklabels&#39;</span><span class="p">)</span>
    <span class="n">yticklabels</span> <span class="o">=</span> <span class="n">BarYTickLabels</span><span class="p">(</span><span class="s1">&#39;yticklabels&#39;</span><span class="p">)</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="n">BarXlabel</span><span class="p">(</span><span class="s1">&#39;xlabel&#39;</span><span class="p">)</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="n">BarYlabel</span><span class="p">(</span><span class="s1">&#39;ylabel&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Simple2DBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Simple2DBase">[docs]</a><span class="k">class</span> <span class="nc">Simple2DBase</span><span class="p">(</span><span class="n">Base2D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for :class:`Simple2DPlotter` and</span>
<span class="sd">    :class:`psyplot.plotter.maps.FieldPlotter` that defines the data</span>
<span class="sd">    management&quot;&quot;&quot;</span>

    <span class="c1">#: The number of allowed dimensions in the for the visualization. If</span>
    <span class="c1">#: the array is unstructured, one dimension will be subtracted</span>
    <span class="n">allowed_dims</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="n">miss_color</span> <span class="o">=</span> <span class="n">MissColor</span><span class="p">(</span><span class="s1">&#39;miss_color&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<div class="viewcode-block" id="Simple2DBase.check_data"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Simple2DBase.check_data">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">is_unstructured</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A validation method for the data shape</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str or list of str</span>
<span class="sd">            The variable names (one variable per array)</span>
<span class="sd">        dims: list with length 1 or list of lists with length 1</span>
<span class="sd">            The dimension of the arrays. Only 1D-Arrays are allowed</span>
<span class="sd">        is_unstructured: bool or list of bool</span>
<span class="sd">            True if the corresponding array is unstructured.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        %(Plotter.check_data.returns)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">[</span><span class="n">dims</span><span class="p">]</span>
            <span class="n">is_unstructured</span> <span class="o">=</span> <span class="p">[</span><span class="n">is_unstructured</span><span class="p">]</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;Number of provided names (</span><span class="si">%i</span><span class="s1">) must equal 1!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">N</span><span class="p">)]</span> <span class="o">*</span> <span class="n">N</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="s1">&#39;Number of provided dimension lists (</span><span class="si">%i</span><span class="s1">) must equal 1!&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">))]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">is_unstructured</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="p">(</span><span class="s1">&#39;Number of provided unstructured information (</span><span class="si">%i</span><span class="s1">) must &#39;</span>
                 <span class="s1">&#39;equal 1!&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">is_unstructured</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;At least one variable name must be provided!&#39;</span><span class="p">]</span>
        <span class="c1"># unstructured arrays have only 1 dimension</span>
        <span class="n">dimlen</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">allowed_dims</span>
        <span class="k">if</span> <span class="n">is_unstructured</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">dimlen</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="c1"># Check that the array is two-dimensional</span>
        <span class="c1">#</span>
        <span class="c1"># if more than one array name is provided, the dimensions should be</span>
        <span class="c1"># one les than dimlen to have a 2D array</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">isstring</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="n">dimlen</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Only one name is allowed per array!&#39;</span><span class="p">]</span>
        <span class="c1"># otherwise the number of dimensions must equal dimlen</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="n">dimlen</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="s1">&#39;An array with dimension </span><span class="si">%i</span><span class="s1"> is required, not </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">dimlen</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]))]</span>
        <span class="k">return</span> <span class="p">[</span><span class="kc">True</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span></div>

    <span class="k">def</span> <span class="nf">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Plotter</span><span class="o">.</span><span class="n">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">ndims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowed_dims</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">ndims</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="n">ndims</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can only plot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">allowed_dims</span><span class="si">}</span><span class="s2">-dimensional &quot;</span>
                             <span class="s2">&quot;data!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Simple2DPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.Simple2DPlotter">[docs]</a><span class="k">class</span> <span class="nc">Simple2DPlotter</span><span class="p">(</span><span class="n">Simple2DBase</span><span class="p">,</span> <span class="n">SimplePlotterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotter for visualizing 2-dimensional data.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    psyplot.plotter.maps.FieldPlotter&quot;&quot;&quot;</span>

    <span class="n">transpose</span> <span class="o">=</span> <span class="n">Transpose</span><span class="p">(</span><span class="s1">&#39;transpose&#39;</span><span class="p">)</span>
    <span class="n">interp_bounds</span> <span class="o">=</span> <span class="n">InterpolateBounds</span><span class="p">(</span><span class="s1">&#39;interp_bounds&#39;</span><span class="p">)</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">SimplePlot2D</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">)</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">XTicks2D</span><span class="p">(</span><span class="s1">&#39;xticks&#39;</span><span class="p">)</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="n">YTicks2D</span><span class="p">(</span><span class="s1">&#39;yticks&#39;</span><span class="p">)</span>
    <span class="n">xlim</span> <span class="o">=</span> <span class="n">Xlim2D</span><span class="p">(</span><span class="s1">&#39;xlim&#39;</span><span class="p">)</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">Ylim2D</span><span class="p">(</span><span class="s1">&#39;ylim&#39;</span><span class="p">)</span>
    <span class="n">levels</span> <span class="o">=</span> <span class="n">ContourLevels</span><span class="p">(</span><span class="s1">&#39;levels&#39;</span><span class="p">,</span> <span class="n">cbounds</span><span class="o">=</span><span class="s1">&#39;bounds&#39;</span><span class="p">)</span>
    <span class="n">legend</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">legendlabels</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># no need for this formatoption</span></div>


<div class="viewcode-block" id="DensityPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.DensityPlotter">[docs]</a><span class="k">class</span> <span class="nc">DensityPlotter</span><span class="p">(</span><span class="n">Simple2DPlotter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A plotter to visualize the density of points in a 2-dimensional grid&quot;&quot;&quot;</span>

    <span class="n">allowed_vars</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">allowed_dims</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;plotter.density.&#39;</span><span class="p">]</span>

    <span class="n">coord</span> <span class="o">=</span> <span class="n">AlternativeXCoord</span><span class="p">(</span><span class="s1">&#39;coord&#39;</span><span class="p">)</span>
    <span class="n">xrange</span> <span class="o">=</span> <span class="n">Hist2DXRange</span><span class="p">(</span><span class="s1">&#39;xrange&#39;</span><span class="p">)</span>
    <span class="n">yrange</span> <span class="o">=</span> <span class="n">Hist2DYRange</span><span class="p">(</span><span class="s1">&#39;yrange&#39;</span><span class="p">)</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="n">DataPrecision</span><span class="p">(</span><span class="s1">&#39;precision&#39;</span><span class="p">)</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="n">HistBins</span><span class="p">(</span><span class="s1">&#39;bins&#39;</span><span class="p">)</span>
    <span class="n">normed</span> <span class="o">=</span> <span class="n">NormedHist2D</span><span class="p">(</span><span class="s1">&#39;normed&#39;</span><span class="p">)</span>
    <span class="n">density</span> <span class="o">=</span> <span class="n">PointDensity</span><span class="p">(</span><span class="s1">&#39;density&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BaseVectorPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BaseVectorPlotter">[docs]</a><span class="k">class</span> <span class="nc">BaseVectorPlotter</span><span class="p">(</span><span class="n">Base2D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base plotter for vector plots</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;plotter.vector.&quot;</span><span class="p">]</span>

    <span class="n">allowed_dims</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">arrowsize</span> <span class="o">=</span> <span class="n">ArrowSize</span><span class="p">(</span><span class="s1">&#39;arrowsize&#39;</span><span class="p">)</span>
    <span class="n">arrowstyle</span> <span class="o">=</span> <span class="n">ArrowStyle</span><span class="p">(</span><span class="s1">&#39;arrowstyle&#39;</span><span class="p">)</span>
    <span class="n">density</span> <span class="o">=</span> <span class="n">Density</span><span class="p">(</span><span class="s1">&#39;density&#39;</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">VectorColor</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
    <span class="n">linewidth</span> <span class="o">=</span> <span class="n">VectorLineWidth</span><span class="p">(</span><span class="s1">&#39;linewidth&#39;</span><span class="p">)</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">VectorCbar</span><span class="p">(</span><span class="s1">&#39;cbar&#39;</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">VectorBounds</span><span class="p">(</span><span class="s1">&#39;bounds&#39;</span><span class="p">)</span>
    <span class="n">cticks</span> <span class="o">=</span> <span class="n">VectorCTicks</span><span class="p">(</span><span class="s1">&#39;cticks&#39;</span><span class="p">)</span>
    <span class="n">datagrid</span> <span class="o">=</span> <span class="n">VectorDataGrid</span><span class="p">(</span><span class="s1">&#39;datagrid&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="BaseVectorPlotter.check_data"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.BaseVectorPlotter.check_data">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">is_unstructured</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A validation method for the data shape</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str or list of str</span>
<span class="sd">            The variable names (two variables for the array or one if the dims</span>
<span class="sd">            are one greater)</span>
<span class="sd">        dims: list with length 1 or list of lists with length 1</span>
<span class="sd">            The dimension of the arrays. Only 2D-Arrays are allowed (or 1-D if</span>
<span class="sd">            the array is unstructured)</span>
<span class="sd">        is_unstructured: bool or list of bool</span>
<span class="sd">            True if the corresponding array is unstructured.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        %(Plotter.check_data.returns)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">[</span><span class="n">dims</span><span class="p">]</span>
            <span class="n">is_unstructured</span> <span class="o">=</span> <span class="p">[</span><span class="n">is_unstructured</span><span class="p">]</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">N</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;Number of provided names (</span><span class="si">%i</span><span class="s1">) must equal 1!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">N</span><span class="p">)]</span> <span class="o">*</span> <span class="n">N</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="s1">&#39;Number of provided dimension lists (</span><span class="si">%i</span><span class="s1">) must equal 1!&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">))]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">is_unstructured</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="p">(</span><span class="s1">&#39;Number of provided unstructured information (</span><span class="si">%i</span><span class="s1">) must &#39;</span>
                 <span class="s1">&#39;equal 1!&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">is_unstructured</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Two variable names must be provided!&#39;</span><span class="p">]</span>
        <span class="c1"># unstructured arrays have only 1 dimension</span>
        <span class="n">dimlen</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">is_unstructured</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="mi">2</span>
        <span class="c1"># Check that the array is two-dimensional</span>
        <span class="c1">#</span>
        <span class="c1"># if more than one array name is provided, the dimensions should be</span>
        <span class="c1"># one les than dimlen to have a 2D array</span>
        <span class="k">if</span> <span class="p">(((</span><span class="n">isstring</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="ow">or</span>
              <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="n">dimlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="p">(</span><span class="s1">&#39;Two variables (one for x- and one for y-direction) are &#39;</span>
                 <span class="s1">&#39;required!&#39;</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="p">((</span><span class="n">isstring</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span>
              <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="n">dimlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">dimlen</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># otherwise the number of dimensions must equal dimlen</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="n">dimlen</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span>
                <span class="s1">&#39;An array with dimension </span><span class="si">%i</span><span class="s1"> is required, not </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">dimlen</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]))]</span>
        <span class="k">return</span> <span class="p">[</span><span class="kc">True</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span></div>

    <span class="k">def</span> <span class="nf">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Plotter</span><span class="o">.</span><span class="n">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">ndims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowed_dims</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">psy</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">is_unstructured</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">ndims</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="n">ndims</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can only plot </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">allowed_dims</span><span class="si">}</span><span class="s2">-dimensional &quot;</span>
                             <span class="s2">&quot;data!&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleVectorPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.SimpleVectorPlotter">[docs]</a><span class="k">class</span> <span class="nc">SimpleVectorPlotter</span><span class="p">(</span><span class="n">BaseVectorPlotter</span><span class="p">,</span> <span class="n">SimplePlotterBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plotter for visualizing 2-dimensional vector data</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    psyplot.plotter.maps.VectorPlotter&quot;&quot;&quot;</span>

    <span class="n">plot</span> <span class="o">=</span> <span class="n">SimpleVectorPlot</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">)</span>
    <span class="n">xticks</span> <span class="o">=</span> <span class="n">XTicks2D</span><span class="p">(</span><span class="s1">&#39;xticks&#39;</span><span class="p">)</span>
    <span class="n">yticks</span> <span class="o">=</span> <span class="n">YTicks2D</span><span class="p">(</span><span class="s1">&#39;yticks&#39;</span><span class="p">)</span>
    <span class="n">xlim</span> <span class="o">=</span> <span class="n">Xlim2D</span><span class="p">(</span><span class="s1">&#39;xlim&#39;</span><span class="p">)</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">Ylim2D</span><span class="p">(</span><span class="s1">&#39;ylim&#39;</span><span class="p">)</span>
    <span class="n">legend</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">legendlabels</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ScalarCombinedBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.ScalarCombinedBase">[docs]</a><span class="k">class</span> <span class="nc">ScalarCombinedBase</span><span class="p">(</span><span class="n">Plotter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base plotter for combined 2-dimensional scalar field with any other</span>
<span class="sd">    plotter&quot;&quot;&quot;</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;plotter.combinedsimple.&quot;</span><span class="p">]</span>

    <span class="c1"># scalar plot formatoptions</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">Cbar</span><span class="p">(</span><span class="s1">&#39;cbar&#39;</span><span class="p">,</span> <span class="n">other_cbars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vcbar&#39;</span><span class="p">])</span>
    <span class="n">cticks</span> <span class="o">=</span> <span class="n">CTicks</span><span class="p">(</span><span class="s1">&#39;cticks&#39;</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">Bounds</span><span class="p">(</span><span class="s1">&#39;bounds&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># make sure that masking options only affect the scalar field</span>
    <span class="n">maskless</span> <span class="o">=</span> <span class="n">MaskLess</span><span class="p">(</span><span class="s1">&#39;maskless&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">maskleq</span> <span class="o">=</span> <span class="n">MaskLeq</span><span class="p">(</span><span class="s1">&#39;maskleq&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">maskgreater</span> <span class="o">=</span> <span class="n">MaskGreater</span><span class="p">(</span><span class="s1">&#39;maskgreater&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">maskgeq</span> <span class="o">=</span> <span class="n">MaskGeq</span><span class="p">(</span><span class="s1">&#39;maskgeq&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">maskbetween</span> <span class="o">=</span> <span class="n">MaskBetween</span><span class="p">(</span><span class="s1">&#39;maskbetween&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="CombinedBase"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CombinedBase">[docs]</a><span class="k">class</span> <span class="nc">CombinedBase</span><span class="p">(</span><span class="n">ScalarCombinedBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base plotter for combined 2-dimensional scalar and vector plot&quot;&quot;&quot;</span>

    <span class="c1"># vector plot formatoptions</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">VectorColor</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vcmap&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="s1">&#39;vbounds&#39;</span><span class="p">,</span>
                        <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">linewidth</span> <span class="o">=</span> <span class="n">VectorLineWidth</span><span class="p">(</span><span class="s1">&#39;linewidth&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">arrowsize</span> <span class="o">=</span> <span class="n">ArrowSize</span><span class="p">(</span><span class="s1">&#39;arrowsize&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">arrowstyle</span> <span class="o">=</span> <span class="n">ArrowStyle</span><span class="p">(</span><span class="s1">&#39;arrowstyle&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vcbar</span> <span class="o">=</span> <span class="n">VectorCbar</span><span class="p">(</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vcmap&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="s1">&#39;vbounds&#39;</span><span class="p">,</span>
                       <span class="n">cbarspacing</span><span class="o">=</span><span class="s1">&#39;vcbarspacing&#39;</span><span class="p">,</span> <span class="n">other_cbars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;cbar&#39;</span><span class="p">],</span>
                       <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vcbarspacing</span> <span class="o">=</span> <span class="n">CbarSpacing</span><span class="p">(</span><span class="s1">&#39;vcbarspacing&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vclabel</span> <span class="o">=</span> <span class="n">VCLabel</span><span class="p">(</span><span class="s1">&#39;vclabel&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vclabelsize</span> <span class="o">=</span> <span class="n">label_size</span><span class="p">(</span><span class="n">vclabel</span><span class="p">,</span> <span class="s1">&#39;Vector colorbar label&#39;</span><span class="p">,</span>
                             <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vclabel&#39;</span><span class="p">])</span>
    <span class="n">vclabelweight</span> <span class="o">=</span> <span class="n">label_weight</span><span class="p">(</span><span class="n">vclabel</span><span class="p">,</span> <span class="s1">&#39;Vector colorbar label&#39;</span><span class="p">,</span>
                                 <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vclabel&#39;</span><span class="p">])</span>
    <span class="n">vclabelprops</span> <span class="o">=</span> <span class="n">label_props</span><span class="p">(</span><span class="n">vclabel</span><span class="p">,</span> <span class="s1">&#39;Vector colorbar label&#39;</span><span class="p">,</span>
                               <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;vclabel&#39;</span><span class="p">])</span>
    <span class="n">vcmap</span> <span class="o">=</span> <span class="n">CMap</span><span class="p">(</span><span class="s1">&#39;vcmap&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="s1">&#39;vbounds&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">)</span>
    <span class="n">vbounds</span> <span class="o">=</span> <span class="n">VectorBounds</span><span class="p">(</span><span class="s1">&#39;vbounds&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vcmap&#39;</span><span class="p">,</span>
                           <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">)</span>
    <span class="n">vcticks</span> <span class="o">=</span> <span class="n">VectorCTicks</span><span class="p">(</span><span class="s1">&#39;vcticks&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span>
                           <span class="n">bounds</span><span class="o">=</span><span class="s1">&#39;vbounds&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vcticklabels</span> <span class="o">=</span> <span class="n">CTickLabels</span><span class="p">(</span><span class="s1">&#39;vcticklabels&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vcticksize</span> <span class="o">=</span> <span class="n">CTickSize</span><span class="p">(</span><span class="s1">&#39;vcticksize&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">ctickprops</span><span class="o">=</span><span class="s1">&#39;vctickprops&#39;</span><span class="p">)</span>
    <span class="n">vctickweight</span> <span class="o">=</span> <span class="n">CTickWeight</span><span class="p">(</span><span class="s1">&#39;vctickweight&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">vctickprops</span> <span class="o">=</span> <span class="n">CTickProps</span><span class="p">(</span><span class="s1">&#39;vctickprops&#39;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="s1">&#39;vcbar&#39;</span><span class="p">,</span>
                             <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="CombinedBase.check_data"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CombinedBase.check_data">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">is_unstructured</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A validation method for the data shape</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: list of str with length 2</span>
<span class="sd">            The variable names (one for the first, two for the second array)</span>
<span class="sd">        dims: list with length 2 of lists with length 1</span>
<span class="sd">            The dimension of the arrays. Only 2D-Arrays are allowed (or 1-D if</span>
<span class="sd">            an array is unstructured)</span>
<span class="sd">        is_unstructured: bool or list of bool</span>
<span class="sd">            True if the corresponding array is unstructured.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        %(Plotter.check_data.returns)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="p">[</span><span class="n">dims</span><span class="p">]</span>
            <span class="n">is_unstructured</span> <span class="o">=</span> <span class="p">[</span><span class="n">is_unstructured</span><span class="p">]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Two arrays are required (one for the scalar and &#39;</span>
               <span class="s1">&#39;one for the vector field)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span> <span class="p">[</span><span class="n">msg</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="p">[</span><span class="n">msg</span><span class="p">]</span>
        <span class="n">valid1</span><span class="p">,</span> <span class="n">msg1</span> <span class="o">=</span> <span class="n">Simple2DBase</span><span class="o">.</span><span class="n">check_data</span><span class="p">(</span><span class="n">name</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span>
                                               <span class="n">is_unstructured</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">valid2</span><span class="p">,</span> <span class="n">msg2</span> <span class="o">=</span> <span class="n">BaseVectorPlotter</span><span class="o">.</span><span class="n">check_data</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                                                    <span class="n">is_unstructured</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">return</span> <span class="n">valid1</span> <span class="o">+</span> <span class="n">valid2</span><span class="p">,</span> <span class="n">msg1</span> <span class="o">+</span> <span class="n">msg2</span></div>

    <span class="k">def</span> <span class="nf">_set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CombinedBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_set_data</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># implement 2 simple checks to make sure that we get the right data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">,</span> <span class="n">InteractiveList</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Combined plots must be lists of one scalar field and a&quot;</span>
                <span class="s2">&quot;vector field. Got one </span><span class="si">%s</span><span class="s2"> instead&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Combined plots must be lists of one scalar field and a&quot;</span>
                <span class="s2">&quot;vector field. Got a list of length </span><span class="si">%i</span><span class="s2"> instead!&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot_data</span><span class="p">))</span></div>


<div class="viewcode-block" id="CombinedSimplePlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.CombinedSimplePlotter">[docs]</a><span class="k">class</span> <span class="nc">CombinedSimplePlotter</span><span class="p">(</span><span class="n">CombinedBase</span><span class="p">,</span> <span class="n">Simple2DPlotter</span><span class="p">,</span>
                            <span class="n">SimpleVectorPlotter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Combined 2D plotter and vector plotter</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    psyplot.plotter.maps.CombinedPlotter: for visualizing the data on a map&quot;&quot;&quot;</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">Plot2D</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">vplot</span> <span class="o">=</span> <span class="n">CombinedVectorPlot</span><span class="p">(</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;vcmap&#39;</span><span class="p">,</span>
                               <span class="n">bounds</span><span class="o">=</span><span class="s1">&#39;vbounds&#39;</span><span class="p">)</span>
    <span class="n">density</span> <span class="o">=</span> <span class="n">Density</span><span class="p">(</span><span class="s1">&#39;density&#39;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="s1">&#39;vplot&#39;</span><span class="p">,</span> <span class="n">index_in_list</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="FldmeanPlotter"><a class="viewcode-back" href="../../api/psy_simple.plotters.html#psy_simple.plotters.FldmeanPlotter">[docs]</a><span class="k">class</span> <span class="nc">FldmeanPlotter</span><span class="p">(</span><span class="n">LinePlotter</span><span class="p">):</span>

    <span class="n">_rcparams_string</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;plotter.fldmean.&quot;</span><span class="p">]</span>

    <span class="n">allowed_dims</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">err_calc</span> <span class="o">=</span> <span class="n">ErrorCalculator</span><span class="p">(</span><span class="s1">&#39;err_calc&#39;</span><span class="p">)</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">MeanCalculator</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>

    <span class="c1"># We reimplement the masking formatoption to make sure, that they are</span>
    <span class="c1"># called after the mean calculation</span>
    <span class="n">maskgeq</span> <span class="o">=</span> <span class="n">MaskGeq</span><span class="p">(</span><span class="s1">&#39;maskgeq&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span>
    <span class="n">maskleq</span> <span class="o">=</span> <span class="n">MaskLeq</span><span class="p">(</span><span class="s1">&#39;maskleq&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span>
    <span class="n">maskgreater</span> <span class="o">=</span> <span class="n">MaskGreater</span><span class="p">(</span><span class="s1">&#39;maskgreater&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span>
    <span class="n">maskless</span> <span class="o">=</span> <span class="n">MaskLess</span><span class="p">(</span><span class="s1">&#39;maskless&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span>
    <span class="n">maskbetween</span> <span class="o">=</span> <span class="n">MaskBetween</span><span class="p">(</span><span class="s1">&#39;maskbetween&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">Mask</span><span class="p">(</span><span class="s1">&#39;mask&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span>
    <span class="n">coord</span> <span class="o">=</span> <span class="n">AlternativeXCoordPost</span><span class="p">(</span><span class="s1">&#39;coord&#39;</span><span class="p">,</span> <span class="n">additional_children</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;err_calc&#39;</span><span class="p">])</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 Helmholtz-Zentrum Hereon, 2020-2021 Helmholtz-Zentrum Geesthacht, 2016-2021 University of Lausanne.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>